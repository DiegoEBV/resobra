import{a as Vt,b as Bt,c as At,d as Lt,e as jt,f as Rt}from"./chunk-LX5WZ4ZJ.js";import{a as Ut,b as Wt,c as Nt,d as Gt,f as qt,g as Qt,h as Ht}from"./chunk-HTLDYV3H.js";import"./chunk-NDUK2CYE.js";import{a as Dt,c as It,d as Tt}from"./chunk-LUBQLQMY.js";import{a as xt,b as kt}from"./chunk-7ORSVDA5.js";import{c as Ge,d as qe,g as Qe}from"./chunk-NB3HFZVT.js";import{a as rt,b as ot,c as at,d as st,e as dt,f as ct,g as lt,h as mt}from"./chunk-Q7IKAR2H.js";import{a as ii}from"./chunk-XUS77LSM.js";import"./chunk-4KID2SBG.js";import{a as ti}from"./chunk-6E7IQQWE.js";import{a as li}from"./chunk-NXOYKD4N.js";import"./chunk-UZ4WZDEA.js";import"./chunk-FPI72KVE.js";import"./chunk-S62OKC6W.js";import{c as Zt,g as Yt}from"./chunk-XUW3P5LX.js";import"./chunk-MS4AQ6UA.js";import{a as Xt,b as ei}from"./chunk-4WQTEZOQ.js";import{c as Jt}from"./chunk-T4G463S7.js";import"./chunk-F5X5MWHG.js";import{a as zt,b as Kt}from"./chunk-TXLZEOAT.js";import"./chunk-ZBAF6PQQ.js";import{a as $t}from"./chunk-EBI2TTL3.js";import{a as Ot}from"./chunk-4SALBWPR.js";import"./chunk-SGFNFZY3.js";import{a as Pt,b as Et,c as St}from"./chunk-ZJYJPMQY.js";import{b as ft,c as _t}from"./chunk-5ME2OED7.js";import{C as ut,F as ht,G as gt,b as He,g as Ze,k as Ye,w as Je,y as pt}from"./chunk-GGGSXGOB.js";import{D as ae,F as ve,Ga as yt,Ha as N,I as Xe,Ia as Ft,Ja as we,Q as et,R as tt,W as it,a as Re,aa as nt,ca as be,da as R,h as $e,i as Ue,j as We,p as Ne,pa as vt,ra as bt,sa as wt,ta as Ct,ua as Mt}from"./chunk-MD4YSZKI.js";import{$b as Z,A as Pe,Aa as J,Ba as X,Bc as oe,C as U,Cb as ge,Db as _,E as y,Ea as ee,Eb as L,Fb as I,G as Ee,Ha as Ve,I as Se,Ib as H,J as le,Ma as Be,Mb as o,Nb as a,Ob as te,Ra as he,Sb as B,V as me,W as Oe,Wb as v,X as F,Xb as b,Yb as z,Zb as S,ac as fe,ba as De,bc as K,ca as Ie,cc as j,db as l,ea as pe,f as D,fc as ze,ga as Te,gc as d,ha as p,hb as Ae,hc as A,ib as V,ic as x,j as E,jc as _e,k,lc as ie,mc as ne,nc as re,pa as g,pb as T,pc as W,q as M,qa as f,qb as Le,qc as Ke,rc as je,ta as Y,tb as Q,va as ue,vb as P,x as Fe}from"./chunk-OYRL5FJJ.js";import"./chunk-X5YLR3NI.js";import{a as G,b as q,g as ci,i as $}from"./chunk-ODN5LVDJ.js";var u=ci(li());var ce=["*"],pi=["content"],ui=[[["mat-drawer"]],[["mat-drawer-content"]],"*"],hi=["mat-drawer","mat-drawer-content","*"];function gi(r,w){if(r&1){let e=B();o(0,"div",1),v("click",function(){g(e);let i=b();return f(i._onBackdropClicked())}),a()}if(r&2){let e=b();I("mat-drawer-shown",e._isShowingBackdrop())}}function fi(r,w){r&1&&(o(0,"mat-drawer-content"),S(1,2),a())}var _i=[[["mat-sidenav"]],[["mat-sidenav-content"]],"*"],vi=["mat-sidenav","mat-sidenav-content","*"];function bi(r,w){if(r&1){let e=B();o(0,"div",1),v("click",function(){g(e);let i=b();return f(i._onBackdropClicked())}),a()}if(r&2){let e=b();I("mat-drawer-shown",e._isShowingBackdrop())}}function wi(r,w){r&1&&(o(0,"mat-sidenav-content"),S(1,2),a())}var Ci=`.mat-drawer-container{position:relative;z-index:1;color:var(--mat-sidenav-content-text-color, var(--mat-sys-on-background));background-color:var(--mat-sidenav-content-background-color, var(--mat-sys-background));box-sizing:border-box;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible;background-color:var(--mat-sidenav-scrim-color, color-mix(in srgb, var(--mat-sys-neutral-variant20) 40%, transparent))}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}@media(forced-colors: active){.mat-drawer-backdrop{opacity:.5}}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-content.mat-drawer-content-hidden{opacity:0}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;color:var(--mat-sidenav-container-text-color, var(--mat-sys-on-surface-variant));box-shadow:var(--mat-sidenav-container-elevation-shadow, none);background-color:var(--mat-sidenav-container-background-color, var(--mat-sys-surface));border-top-right-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-bottom-right-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));width:var(--mat-sidenav-container-width, 360px);display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}@media(forced-colors: active){.mat-drawer,[dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}}@media(forced-colors: active){[dir=rtl] .mat-drawer,.mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0);border-top-left-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-bottom-left-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-top-right-radius:0;border-bottom-right-radius:0}[dir=rtl] .mat-drawer{border-top-left-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-bottom-left-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-top-right-radius:0;border-bottom-right-radius:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{border-top-right-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-bottom-right-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-top-left-radius:0;border-bottom-left-radius:0;left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer-transition .mat-drawer{transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-drawer:not(.mat-drawer-opened):not(.mat-drawer-animating){visibility:hidden;box-shadow:none}.mat-drawer:not(.mat-drawer-opened):not(.mat-drawer-animating) .mat-drawer-inner-container{display:none}.mat-drawer.mat-drawer-opened.mat-drawer-opened{transform:none}.mat-drawer-side{box-shadow:none;border-right-color:var(--mat-sidenav-container-divider-color, transparent);border-right-width:1px;border-right-style:solid}.mat-drawer-side.mat-drawer-end{border-left-color:var(--mat-sidenav-container-divider-color, transparent);border-left-width:1px;border-left-style:solid;border-right:none}[dir=rtl] .mat-drawer-side{border-left-color:var(--mat-sidenav-container-divider-color, transparent);border-left-width:1px;border-left-style:solid;border-right:none}[dir=rtl] .mat-drawer-side.mat-drawer-end{border-right-color:var(--mat-sidenav-container-divider-color, transparent);border-right-width:1px;border-right-style:solid;border-left:none}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto}.mat-sidenav-fixed{position:fixed}
`;var Mi=new pe("MAT_DRAWER_DEFAULT_AUTOSIZE",{providedIn:"root",factory:xi}),xe=new pe("MAT_DRAWER_CONTAINER");function xi(){return!1}var se=(()=>{class r extends N{_platform=p(ae);_changeDetectorRef=p(oe);_container=p(Me);constructor(){let e=p(ee),t=p(yt),i=p(X);super(e,t,i)}ngAfterContentInit(){this._container._contentMarginChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})}_shouldBeHidden(){if(this._platform.isBrowser)return!1;let{start:e,end:t}=this._container;return e!=null&&e.mode!=="over"&&e.opened||t!=null&&t.mode!=="over"&&t.opened}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=T({type:r,selectors:[["mat-drawer-content"]],hostAttrs:[1,"mat-drawer-content"],hostVars:6,hostBindings:function(t,i){t&2&&(L("margin-left",i._container._contentMargins.left,"px")("margin-right",i._container._contentMargins.right,"px"),I("mat-drawer-content-hidden",i._shouldBeHidden()))},features:[W([{provide:N,useExisting:r}]),Q],ngContentSelectors:ce,decls:1,vars:0,template:function(t,i){t&1&&(z(),S(0))},encapsulation:2,changeDetection:0})}return r})(),Ce=(()=>{class r{_elementRef=p(ee);_focusTrapFactory=p(tt);_focusMonitor=p(Xe);_platform=p(ae);_ngZone=p(X);_renderer=p(Ae);_interactivityChecker=p(et);_doc=p(Re,{optional:!0});_container=p(xe,{optional:!0});_focusTrap=null;_elementFocusedBeforeDrawerWasOpened=null;_eventCleanups;_isAttached;_anchor;get position(){return this._position}set position(e){e=e==="end"?"end":"start",e!==this._position&&(this._isAttached&&this._updatePositionInParent(e),this._position=e,this.onPositionChanged.emit())}_position="start";get mode(){return this._mode}set mode(e){this._mode=e,this._updateFocusTrapState(),this._modeChanged.next()}_mode="over";get disableClose(){return this._disableClose}set disableClose(e){this._disableClose=R(e)}_disableClose=!1;get autoFocus(){let e=this._autoFocus;return e??(this.mode==="side"?"dialog":"first-tabbable")}set autoFocus(e){(e==="true"||e==="false"||e==null)&&(e=R(e)),this._autoFocus=e}_autoFocus;get opened(){return this._opened}set opened(e){this.toggle(R(e))}_opened=!1;_openedVia;_animationStarted=new D;_animationEnd=new D;openedChange=new J(!0);_openedStream=this.openedChange.pipe(U(e=>e),M(()=>{}));openedStart=this._animationStarted.pipe(U(()=>this.opened),le(void 0));_closedStream=this.openedChange.pipe(U(e=>!e),M(()=>{}));closedStart=this._animationStarted.pipe(U(()=>!this.opened),le(void 0));_destroyed=new D;onPositionChanged=new J;_content;_modeChanged=new D;_injector=p(ue);_changeDetectorRef=p(oe);constructor(){this.openedChange.pipe(F(this._destroyed)).subscribe(e=>{e?(this._doc&&(this._elementFocusedBeforeDrawerWasOpened=this._doc.activeElement),this._takeFocus()):this._isFocusWithinDrawer()&&this._restoreFocus(this._openedVia||"program")}),this._ngZone.runOutsideAngular(()=>{let e=this._elementRef.nativeElement;Fe(e,"keydown").pipe(U(t=>t.keyCode===27&&!this.disableClose&&!it(t)),F(this._destroyed)).subscribe(t=>this._ngZone.run(()=>{this.close(),t.stopPropagation(),t.preventDefault()})),this._eventCleanups=[this._renderer.listen(e,"transitionrun",this._handleTransitionEvent),this._renderer.listen(e,"transitionend",this._handleTransitionEvent),this._renderer.listen(e,"transitioncancel",this._handleTransitionEvent)]}),this._animationEnd.subscribe(()=>{this.openedChange.emit(this._opened)})}_forceFocus(e,t){this._interactivityChecker.isFocusable(e)||(e.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{let i=()=>{n(),s(),e.removeAttribute("tabindex")},n=this._renderer.listen(e,"blur",i),s=this._renderer.listen(e,"mousedown",i)})),e.focus(t)}_focusByCssSelector(e,t){let i=this._elementRef.nativeElement.querySelector(e);i&&this._forceFocus(i,t)}_takeFocus(){if(!this._focusTrap)return;let e=this._elementRef.nativeElement;switch(this.autoFocus){case!1:case"dialog":return;case!0:case"first-tabbable":he(()=>{!this._focusTrap.focusInitialElement()&&typeof e.focus=="function"&&e.focus()},{injector:this._injector});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this.autoFocus);break}}_restoreFocus(e){this.autoFocus!=="dialog"&&(this._elementFocusedBeforeDrawerWasOpened?this._focusMonitor.focusVia(this._elementFocusedBeforeDrawerWasOpened,e):this._elementRef.nativeElement.blur(),this._elementFocusedBeforeDrawerWasOpened=null)}_isFocusWithinDrawer(){let e=this._doc.activeElement;return!!e&&this._elementRef.nativeElement.contains(e)}ngAfterViewInit(){this._isAttached=!0,this._position==="end"&&this._updatePositionInParent("end"),this._platform.isBrowser&&(this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._updateFocusTrapState())}ngOnDestroy(){this._eventCleanups.forEach(e=>e()),this._focusTrap?.destroy(),this._anchor?.remove(),this._anchor=null,this._animationStarted.complete(),this._animationEnd.complete(),this._modeChanged.complete(),this._destroyed.next(),this._destroyed.complete()}open(e){return this.toggle(!0,e)}close(){return this.toggle(!1)}_closeViaBackdropClick(){return this._setOpen(!1,!0,"mouse")}toggle(e=!this.opened,t){e&&t&&(this._openedVia=t);let i=this._setOpen(e,!e&&this._isFocusWithinDrawer(),this._openedVia||"program");return e||(this._openedVia=null),i}_setOpen(e,t,i){return e===this._opened?Promise.resolve(e?"open":"close"):(this._opened=e,this._container?._transitionsEnabled?this._setIsAnimating(!0):setTimeout(()=>{this._animationStarted.next(),this._animationEnd.next()}),this._elementRef.nativeElement.classList.toggle("mat-drawer-opened",e),!e&&t&&this._restoreFocus(i),this._changeDetectorRef.markForCheck(),this._updateFocusTrapState(),new Promise(n=>{this.openedChange.pipe(Se(1)).subscribe(s=>n(s?"open":"close"))}))}_setIsAnimating(e){this._elementRef.nativeElement.classList.toggle("mat-drawer-animating",e)}_getWidth(){return this._elementRef.nativeElement.offsetWidth||0}_updateFocusTrapState(){this._focusTrap&&(this._focusTrap.enabled=!!this._container?.hasBackdrop&&this.opened)}_updatePositionInParent(e){if(!this._platform.isBrowser)return;let t=this._elementRef.nativeElement,i=t.parentNode;e==="end"?(this._anchor||(this._anchor=this._doc.createComment("mat-drawer-anchor"),i.insertBefore(this._anchor,t)),i.appendChild(t)):this._anchor&&this._anchor.parentNode.insertBefore(t,this._anchor)}_handleTransitionEvent=e=>{let t=this._elementRef.nativeElement;e.target===t&&this._ngZone.run(()=>{e.type==="transitionrun"?this._animationStarted.next(e):(e.type==="transitionend"&&this._setIsAnimating(!1),this._animationEnd.next(e))})};static \u0275fac=function(t){return new(t||r)};static \u0275cmp=T({type:r,selectors:[["mat-drawer"]],viewQuery:function(t,i){if(t&1&&fe(pi,5),t&2){let n;K(n=j())&&(i._content=n.first)}},hostAttrs:[1,"mat-drawer"],hostVars:12,hostBindings:function(t,i){t&2&&(ge("align",null)("tabIndex",i.mode!=="side"?"-1":null),L("visibility",!i._container&&!i.opened?"hidden":null),I("mat-drawer-end",i.position==="end")("mat-drawer-over",i.mode==="over")("mat-drawer-push",i.mode==="push")("mat-drawer-side",i.mode==="side"))},inputs:{position:"position",mode:"mode",disableClose:"disableClose",autoFocus:"autoFocus",opened:"opened"},outputs:{openedChange:"openedChange",_openedStream:"opened",openedStart:"openedStart",_closedStream:"closed",closedStart:"closedStart",onPositionChanged:"positionChanged"},exportAs:["matDrawer"],ngContentSelectors:ce,decls:3,vars:0,consts:[["content",""],["cdkScrollable","",1,"mat-drawer-inner-container"]],template:function(t,i){t&1&&(z(),o(0,"div",1,0),S(2),a())},dependencies:[N],encapsulation:2,changeDetection:0})}return r})(),Me=(()=>{class r{_dir=p(nt,{optional:!0});_element=p(ee);_ngZone=p(X);_changeDetectorRef=p(oe);_animationMode=p(Be,{optional:!0});_transitionsEnabled=!1;_allDrawers;_drawers=new Ve;_content;_userContent;get start(){return this._start}get end(){return this._end}get autosize(){return this._autosize}set autosize(e){this._autosize=R(e)}_autosize=p(Mi);get hasBackdrop(){return this._drawerHasBackdrop(this._start)||this._drawerHasBackdrop(this._end)}set hasBackdrop(e){this._backdropOverride=e==null?null:R(e)}_backdropOverride;backdropClick=new J;_start;_end;_left;_right;_destroyed=new D;_doCheckSubject=new D;_contentMargins={left:null,right:null};_contentMarginChanges=new D;get scrollable(){return this._userContent||this._content}_injector=p(ue);constructor(){let e=p(ae),t=p(Ft);this._dir?.change.pipe(F(this._destroyed)).subscribe(()=>{this._validateDrawers(),this.updateContentMargins()}),t.change().pipe(F(this._destroyed)).subscribe(()=>this.updateContentMargins()),this._animationMode!=="NoopAnimations"&&e.isBrowser&&this._ngZone.runOutsideAngular(()=>{setTimeout(()=>{this._element.nativeElement.classList.add("mat-drawer-transition"),this._transitionsEnabled=!0},200)})}ngAfterContentInit(){this._allDrawers.changes.pipe(me(this._allDrawers),F(this._destroyed)).subscribe(e=>{this._drawers.reset(e.filter(t=>!t._container||t._container===this)),this._drawers.notifyOnChanges()}),this._drawers.changes.pipe(me(null)).subscribe(()=>{this._validateDrawers(),this._drawers.forEach(e=>{this._watchDrawerToggle(e),this._watchDrawerPosition(e),this._watchDrawerMode(e)}),(!this._drawers.length||this._isDrawerOpen(this._start)||this._isDrawerOpen(this._end))&&this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),this._ngZone.runOutsideAngular(()=>{this._doCheckSubject.pipe(Ee(10),F(this._destroyed)).subscribe(()=>this.updateContentMargins())})}ngOnDestroy(){this._contentMarginChanges.complete(),this._doCheckSubject.complete(),this._drawers.destroy(),this._destroyed.next(),this._destroyed.complete()}open(){this._drawers.forEach(e=>e.open())}close(){this._drawers.forEach(e=>e.close())}updateContentMargins(){let e=0,t=0;if(this._left&&this._left.opened){if(this._left.mode=="side")e+=this._left._getWidth();else if(this._left.mode=="push"){let i=this._left._getWidth();e+=i,t-=i}}if(this._right&&this._right.opened){if(this._right.mode=="side")t+=this._right._getWidth();else if(this._right.mode=="push"){let i=this._right._getWidth();t+=i,e-=i}}e=e||null,t=t||null,(e!==this._contentMargins.left||t!==this._contentMargins.right)&&(this._contentMargins={left:e,right:t},this._ngZone.run(()=>this._contentMarginChanges.next(this._contentMargins)))}ngDoCheck(){this._autosize&&this._isPushed()&&this._ngZone.runOutsideAngular(()=>this._doCheckSubject.next())}_watchDrawerToggle(e){e._animationStarted.pipe(F(this._drawers.changes)).subscribe(()=>{this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),e.mode!=="side"&&e.openedChange.pipe(F(this._drawers.changes)).subscribe(()=>this._setContainerClass(e.opened))}_watchDrawerPosition(e){e.onPositionChanged.pipe(F(this._drawers.changes)).subscribe(()=>{he({read:()=>this._validateDrawers()},{injector:this._injector})})}_watchDrawerMode(e){e._modeChanged.pipe(F(Pe(this._drawers.changes,this._destroyed))).subscribe(()=>{this.updateContentMargins(),this._changeDetectorRef.markForCheck()})}_setContainerClass(e){let t=this._element.nativeElement.classList,i="mat-drawer-container-has-open";e?t.add(i):t.remove(i)}_validateDrawers(){this._start=this._end=null,this._drawers.forEach(e=>{e.position=="end"?(this._end!=null,this._end=e):(this._start!=null,this._start=e)}),this._right=this._left=null,this._dir&&this._dir.value==="rtl"?(this._left=this._end,this._right=this._start):(this._left=this._start,this._right=this._end)}_isPushed(){return this._isDrawerOpen(this._start)&&this._start.mode!="over"||this._isDrawerOpen(this._end)&&this._end.mode!="over"}_onBackdropClicked(){this.backdropClick.emit(),this._closeModalDrawersViaBackdrop()}_closeModalDrawersViaBackdrop(){[this._start,this._end].filter(e=>e&&!e.disableClose&&this._drawerHasBackdrop(e)).forEach(e=>e._closeViaBackdropClick())}_isShowingBackdrop(){return this._isDrawerOpen(this._start)&&this._drawerHasBackdrop(this._start)||this._isDrawerOpen(this._end)&&this._drawerHasBackdrop(this._end)}_isDrawerOpen(e){return e!=null&&e.opened}_drawerHasBackdrop(e){return this._backdropOverride==null?!!e&&e.mode!=="side":this._backdropOverride}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=T({type:r,selectors:[["mat-drawer-container"]],contentQueries:function(t,i,n){if(t&1&&(Z(n,se,5),Z(n,Ce,5)),t&2){let s;K(s=j())&&(i._content=s.first),K(s=j())&&(i._allDrawers=s)}},viewQuery:function(t,i){if(t&1&&fe(se,5),t&2){let n;K(n=j())&&(i._userContent=n.first)}},hostAttrs:[1,"mat-drawer-container"],hostVars:2,hostBindings:function(t,i){t&2&&I("mat-drawer-container-explicit-backdrop",i._backdropOverride)},inputs:{autosize:"autosize",hasBackdrop:"hasBackdrop"},outputs:{backdropClick:"backdropClick"},exportAs:["matDrawerContainer"],features:[W([{provide:xe,useExisting:r}])],ngContentSelectors:hi,decls:4,vars:2,consts:[[1,"mat-drawer-backdrop",3,"mat-drawer-shown"],[1,"mat-drawer-backdrop",3,"click"]],template:function(t,i){t&1&&(z(ui),P(0,gi,1,2,"div",0),S(1),S(2,1),P(3,fi,2,0,"mat-drawer-content")),t&2&&(H(i.hasBackdrop?0:-1),l(3),H(i._content?-1:3))},dependencies:[se],styles:[`.mat-drawer-container{position:relative;z-index:1;color:var(--mat-sidenav-content-text-color, var(--mat-sys-on-background));background-color:var(--mat-sidenav-content-background-color, var(--mat-sys-background));box-sizing:border-box;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible;background-color:var(--mat-sidenav-scrim-color, color-mix(in srgb, var(--mat-sys-neutral-variant20) 40%, transparent))}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}@media(forced-colors: active){.mat-drawer-backdrop{opacity:.5}}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-content.mat-drawer-content-hidden{opacity:0}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;color:var(--mat-sidenav-container-text-color, var(--mat-sys-on-surface-variant));box-shadow:var(--mat-sidenav-container-elevation-shadow, none);background-color:var(--mat-sidenav-container-background-color, var(--mat-sys-surface));border-top-right-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-bottom-right-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));width:var(--mat-sidenav-container-width, 360px);display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}@media(forced-colors: active){.mat-drawer,[dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}}@media(forced-colors: active){[dir=rtl] .mat-drawer,.mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0);border-top-left-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-bottom-left-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-top-right-radius:0;border-bottom-right-radius:0}[dir=rtl] .mat-drawer{border-top-left-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-bottom-left-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-top-right-radius:0;border-bottom-right-radius:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{border-top-right-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-bottom-right-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-top-left-radius:0;border-bottom-left-radius:0;left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer-transition .mat-drawer{transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-drawer:not(.mat-drawer-opened):not(.mat-drawer-animating){visibility:hidden;box-shadow:none}.mat-drawer:not(.mat-drawer-opened):not(.mat-drawer-animating) .mat-drawer-inner-container{display:none}.mat-drawer.mat-drawer-opened.mat-drawer-opened{transform:none}.mat-drawer-side{box-shadow:none;border-right-color:var(--mat-sidenav-container-divider-color, transparent);border-right-width:1px;border-right-style:solid}.mat-drawer-side.mat-drawer-end{border-left-color:var(--mat-sidenav-container-divider-color, transparent);border-left-width:1px;border-left-style:solid;border-right:none}[dir=rtl] .mat-drawer-side{border-left-color:var(--mat-sidenav-container-divider-color, transparent);border-left-width:1px;border-left-style:solid;border-right:none}[dir=rtl] .mat-drawer-side.mat-drawer-end{border-right-color:var(--mat-sidenav-container-divider-color, transparent);border-right-width:1px;border-right-style:solid;border-left:none}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto}.mat-sidenav-fixed{position:fixed}
`],encapsulation:2,changeDetection:0})}return r})(),de=(()=>{class r extends se{static \u0275fac=(()=>{let e;return function(i){return(e||(e=Y(r)))(i||r)}})();static \u0275cmp=T({type:r,selectors:[["mat-sidenav-content"]],hostAttrs:[1,"mat-drawer-content","mat-sidenav-content"],features:[W([{provide:N,useExisting:r}]),Q],ngContentSelectors:ce,decls:1,vars:0,template:function(t,i){t&1&&(z(),S(0))},encapsulation:2,changeDetection:0})}return r})(),ke=(()=>{class r extends Ce{get fixedInViewport(){return this._fixedInViewport}set fixedInViewport(e){this._fixedInViewport=R(e)}_fixedInViewport=!1;get fixedTopGap(){return this._fixedTopGap}set fixedTopGap(e){this._fixedTopGap=ve(e)}_fixedTopGap=0;get fixedBottomGap(){return this._fixedBottomGap}set fixedBottomGap(e){this._fixedBottomGap=ve(e)}_fixedBottomGap=0;static \u0275fac=(()=>{let e;return function(i){return(e||(e=Y(r)))(i||r)}})();static \u0275cmp=T({type:r,selectors:[["mat-sidenav"]],hostAttrs:[1,"mat-drawer","mat-sidenav"],hostVars:16,hostBindings:function(t,i){t&2&&(ge("tabIndex",i.mode!=="side"?"-1":null)("align",null),L("top",i.fixedInViewport?i.fixedTopGap:null,"px")("bottom",i.fixedInViewport?i.fixedBottomGap:null,"px"),I("mat-drawer-end",i.position==="end")("mat-drawer-over",i.mode==="over")("mat-drawer-push",i.mode==="push")("mat-drawer-side",i.mode==="side")("mat-sidenav-fixed",i.fixedInViewport))},inputs:{fixedInViewport:"fixedInViewport",fixedTopGap:"fixedTopGap",fixedBottomGap:"fixedBottomGap"},exportAs:["matSidenav"],features:[W([{provide:Ce,useExisting:r}]),Q],ngContentSelectors:ce,decls:3,vars:0,consts:[["content",""],["cdkScrollable","",1,"mat-drawer-inner-container"]],template:function(t,i){t&1&&(z(),o(0,"div",1,0),S(2),a())},dependencies:[N],encapsulation:2,changeDetection:0})}return r})(),ri=(()=>{class r extends Me{_allDrawers=void 0;_content=void 0;static \u0275fac=(()=>{let e;return function(i){return(e||(e=Y(r)))(i||r)}})();static \u0275cmp=T({type:r,selectors:[["mat-sidenav-container"]],contentQueries:function(t,i,n){if(t&1&&(Z(n,de,5),Z(n,ke,5)),t&2){let s;K(s=j())&&(i._content=s.first),K(s=j())&&(i._allDrawers=s)}},hostAttrs:[1,"mat-drawer-container","mat-sidenav-container"],hostVars:2,hostBindings:function(t,i){t&2&&I("mat-drawer-container-explicit-backdrop",i._backdropOverride)},exportAs:["matSidenavContainer"],features:[W([{provide:xe,useExisting:r},{provide:Me,useExisting:r}]),Q],ngContentSelectors:vi,decls:4,vars:2,consts:[[1,"mat-drawer-backdrop",3,"mat-drawer-shown"],[1,"mat-drawer-backdrop",3,"click"]],template:function(t,i){t&1&&(z(_i),P(0,bi,1,2,"div",0),S(1),S(2,1),P(3,wi,2,0,"mat-sidenav-content")),t&2&&(H(i.hasBackdrop?0:-1),l(3),H(i._content?-1:3))},dependencies:[de],styles:[Ci],encapsulation:2,changeDetection:0})}return r})(),oi=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275mod=Le({type:r});static \u0275inj=Ie({imports:[be,we,we,be]})}return r})();var ai=(()=>{class r{constructor(e){this.supabase=e}getKilometros(){return E(this.supabase.client.from("kilometros").select("*").order("frente_id",{ascending:!0}).order("kilometro",{ascending:!0})).pipe(M(e=>e.error?(console.error("Error fetching all kil\xF3metros:",e.error),[]):e.data||[]),y(e=>(console.error("Error in getKilometros:",e),k([]))))}getKilometrosByFrente(e){return E(this.supabase.client.from("kilometros").select("*").eq("frente_id",e).order("kilometro",{ascending:!0})).pipe(M(t=>t.error?(console.error("Error fetching kil\xF3metros:",t.error),[]):t.data||[]),y(t=>(console.error("Error in getKilometrosByFrente:",t),k([]))))}getKilometro(e,t){return E(this.supabase.client.from("kilometros").select("*").eq("frente_id",e).eq("kilometro",t).single()).pipe(M(i=>i.error?(console.error("Error fetching kil\xF3metro:",i.error),null):i.data),y(i=>(console.error("Error in getKilometro:",i),k(null))))}createKilometro(e){let t=new Date().toISOString(),i=q(G({},e),{created_at:t,updated_at:t});return E(this.supabase.client.from("kilometros").insert([i]).select().single()).pipe(M(n=>n.error?(console.error("Error creating kil\xF3metro:",n.error),null):n.data),y(n=>(console.error("Error in createKilometro:",n),k(null))))}updateKilometro(e,t){let i=q(G({},t),{updated_at:new Date().toISOString()});return E(this.supabase.client.from("kilometros").update(i).eq("id",e).select().single()).pipe(M(n=>n.error?(console.error("Error updating kil\xF3metro:",n.error),null):n.data),y(n=>(console.error("Error in updateKilometro:",n),k(null))))}updateKilometroEstado(e,t,i){return this.getColorByEstado(t).pipe(Oe(n=>{let s=new Date().toISOString(),c={estado:t,progreso_porcentaje:i,color:n||"#6B7280",fecha_ultima_actualizacion:s,updated_at:s};return E(this.supabase.client.from("kilometros").update(c).eq("id",e).select().single()).pipe(M(m=>m.error?(console.error("Error updating kil\xF3metro estado:",m.error),null):m.data),y(m=>(console.error("Error in updateKilometroEstado:",m),k(null))))}),y(n=>(console.error("Error in updateKilometroEstado:",n),k(null))))}deleteKilometro(e){return E(this.supabase.client.from("kilometros").delete().eq("id",e)).pipe(M(t=>t.error?(console.error("Error deleting kil\xF3metro:",t.error),!1):!0),y(t=>(console.error("Error in deleteKilometro:",t),k(!1))))}generateKilometrosForFrente(e,t,i){let n=[],s=new Date().toISOString();for(let c=Math.ceil(t);c<=Math.floor(i);c++)n.push({frente_id:e,kilometro:c,estado:"no_iniciado",color:"#6B7280",progreso_porcentaje:0,actividades_count:0,fecha_ultima_actualizacion:s,created_at:s,updated_at:s});return E(this.supabase.client.from("kilometros").insert(n).select()).pipe(M(c=>c.error?(console.error("Error generating kil\xF3metros:",c.error),[]):c.data||[]),y(c=>(console.error("Error in generateKilometrosForFrente:",c),k([]))))}getEstadosConfig(){return E(this.supabase.client.from("estados_config").select("*").eq("activo",!0).order("umbral_minimo",{ascending:!0})).pipe(M(e=>e.error?(console.error("Error fetching estados config:",e.error),[]):e.data||[]),y(e=>(console.error("Error in getEstadosConfig:",e),k([]))))}getColorByEstado(e){return E(this.supabase.client.from("estados_config").select("color_hex").eq("estado_nombre",e).eq("activo",!0).single()).pipe(M(t=>t.error?(console.error("Error fetching color by estado:",t.error),null):t.data?.color_hex||null),y(t=>(console.error("Error in getColorByEstado:",t),k(null))))}updateEstadoConfig(e,t){return E(this.supabase.client.from("estados_config").update(t).eq("id",e).select().single()).pipe(M(i=>i.error?(console.error("Error updating estado config:",i.error),null):i.data),y(i=>(console.error("Error in updateEstadoConfig:",i),k(null))))}getKilometrosConActividades(e){return E(this.supabase.client.from("kilometros").select(`
          *,
          actividades:actividades!frente_id(
            id,
            nombre,
            descripcion,
            estado,
            progreso_porcentaje,
            kilometro
          )
        `).eq("frente_id",e).order("kilometro",{ascending:!0})).pipe(M(t=>t.error?(console.error("Error fetching kil\xF3metros con actividades:",t.error),[]):t.data||[]),y(t=>(console.error("Error in getKilometrosConActividades:",t),k([]))))}getEstadisticasKilometricas(e){return this.getKilometrosByFrente(e).pipe(M(t=>{let i=t.length,n=t.filter(h=>h.estado==="no_iniciado").length,s=t.filter(h=>h.estado==="en_progreso").length,c=t.filter(h=>h.estado==="completado").length,m=t.filter(h=>h.estado==="con_observaciones").length,C=i>0?t.reduce((h,O)=>h+O.progreso_porcentaje,0)/i:0;return{total:i,noIniciados:n,enProgreso:s,completados:c,conObservaciones:m,progresoPromedio:Math.round(C*100)/100,porcentajeCompletado:i>0?Math.round(c/i*100):0}}))}static{this.\u0275fac=function(t){return new(t||r)(Te(St))}}static{this.\u0275prov=De({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();var Fi=()=>["/actividades"],Pi=r=>({frente:r});function Ei(r,w){r&1&&(o(0,"mat-chip",37)(1,"mat-icon"),d(2,"open_with"),a(),d(3," Modo Arrastrar "),a())}function Si(r,w){if(r&1&&(o(0,"mat-option",38),d(1),a()),r&2){let e=w.$implicit;_("value",e.value),l(),x(" ",e.label," ")}}function Oi(r,w){if(r&1&&(o(0,"mat-option",38),d(1),a()),r&2){let e=w.$implicit;_("value",e.value),l(),x(" ",e.label," ")}}function Di(r,w){r&1&&(o(0,"div",39),te(1,"mat-spinner",40),o(2,"p"),d(3,"Cargando frentes..."),a()())}function Ii(r,w){if(r&1){let e=B();o(0,"mat-list-item",42),v("click",function(){let i=g(e).$implicit,n=b(2);return f(n.centerOnFrente(i))}),o(1,"div",43)(2,"mat-icon",44),d(3),a()(),o(4,"div",45),d(5),a(),o(6,"div",46)(7,"span",47),d(8),a(),o(9,"span",48),d(10),a()(),o(11,"div",49)(12,"span"),d(13),a(),o(14,"span"),d(15),a()(),o(16,"button",50),v("click",function(i){let n=g(e).$implicit;return b(2).centerOnFrente(n),f(i.stopPropagation())}),o(17,"mat-icon"),d(18,"my_location"),a()()()}if(r&2){let e=w.$implicit,t=b(2);I("selected",(t.selectedFrente==null?null:t.selectedFrente.id)===e.id),l(2),L("color",t.getFrenteIconColor(e.estado)),_("matBadge",t.getActividadesEnProgreso(e.id))("matBadgeHidden",t.getActividadesEnProgreso(e.id)===0),l(),x(" ",t.getFrenteIcon(e.estado)," "),l(2),A(e.nombre),l(2),_("ngClass","estado-"+e.estado),l(),x(" ",t.getEstadoLabel(e.estado)," "),l(2),_e("Lat: ",e.ubicacion_lat==null?null:e.ubicacion_lat.toFixed(4),", Lng: ",e.ubicacion_lng==null?null:e.ubicacion_lng.toFixed(4),""),l(3),x("Progreso: ",t.getProgresoPromedio(e.id).toFixed(1),"%"),l(2),x("",t.getActividadesByFrente(e.id).length," actividades")}}function Ti(r,w){if(r&1&&(o(0,"mat-nav-list"),P(1,Ii,19,14,"mat-list-item",41),a()),r&2){let e=b();l(),_("ngForOf",e.filteredFrente)}}function Vi(r,w){r&1&&(o(0,"div",51)(1,"mat-icon"),d(2,"location_off"),a(),o(3,"p"),d(4,"No se encontraron frentes con los filtros aplicados"),a()())}function Bi(r,w){r&1&&(o(0,"div",52),te(1,"mat-spinner",53),o(2,"p"),d(3,"Cargando mapa..."),a()())}function Ai(r,w){if(r&1){let e=B();o(0,"div",54)(1,"mat-card",55)(2,"mat-card-content")(3,"div",56)(4,"mat-icon",57),d(5,"add_location"),a(),o(6,"h3"),d(7,"Creando Nuevo Frente"),a(),o(8,"p"),d(9,"Haz clic en el mapa para seleccionar la ubicaci\xF3n del frente"),a(),o(10,"button",58),v("click",function(){g(e);let i=b();return f(i.cancelFrenteCreation())}),o(11,"mat-icon"),d(12,"cancel"),a(),d(13," Cancelar "),a()()()()()}}function Li(r,w){if(r&1&&(o(0,"div",63)(1,"mat-icon"),d(2,"description"),a(),o(3,"span"),d(4),a()()),r&2){let e=b(2);l(4),A(e.selectedFrente.descripcion)}}function zi(r,w){if(r&1){let e=B();o(0,"mat-card",59)(1,"mat-card-header")(2,"div",60)(3,"mat-icon"),d(4),a()(),o(5,"mat-card-title"),d(6),a(),o(7,"mat-card-subtitle")(8,"span",47),d(9),a()(),o(10,"button",61),v("click",function(){g(e);let i=b();return f(i.selectedFrente=null)}),o(11,"mat-icon"),d(12,"close"),a()()(),o(13,"mat-card-content")(14,"div",62)(15,"div",63)(16,"mat-icon"),d(17,"location_on"),a(),o(18,"span"),d(19),a()(),P(20,Li,5,1,"div",64),o(21,"div",63)(22,"mat-icon"),d(23,"trending_up"),a(),o(24,"span"),d(25),a()()(),o(26,"div",65)(27,"h4"),d(28,"Actividades del Frente"),a(),o(29,"div",66)(30,"div",67)(31,"span",68),d(32),a(),o(33,"span",69),d(34,"Total"),a()(),o(35,"div",67)(36,"span",68),d(37),a(),o(38,"span",69),d(39,"En Progreso"),a()(),o(40,"div",67)(41,"span",68),d(42),a(),o(43,"span",69),d(44,"Completadas"),a()(),o(45,"div",67)(46,"span",68),d(47),a(),o(48,"span",69),d(49,"Progreso"),a()()()()(),o(50,"mat-card-actions")(51,"button",70)(52,"mat-icon"),d(53,"list"),a(),d(54," Ver Actividades "),a(),o(55,"button",71),v("click",function(){g(e);let i=b();return f(i.centerOnFrente(i.selectedFrente))}),o(56,"mat-icon"),d(57,"center_focus_strong"),a(),d(58," Centrar en Mapa "),a(),o(59,"button",72),v("click",function(){g(e);let i=b();return f(i.generateKilometrosForFrente(i.selectedFrente))}),o(60,"mat-icon"),d(61,"timeline"),a(),d(62," Generar Kil\xF3metros "),a(),o(63,"button",73),v("click",function(){g(e);let i=b();return f(i.editFrente(i.selectedFrente))}),o(64,"mat-icon"),d(65,"edit"),a(),d(66," Editar Frente "),a(),o(67,"button",74),v("click",function(){g(e);let i=b();return f(i.deleteFrente(i.selectedFrente))}),o(68,"mat-icon"),d(69,"delete"),a(),d(70," Eliminar "),a()()()}if(r&2){let e=b();l(3),L("color",e.getFrenteIconColor(e.selectedFrente.estado)),l(),x(" ",e.getFrenteIcon(e.selectedFrente.estado)," "),l(2),A(e.selectedFrente.nombre),l(2),_("ngClass","estado-"+e.selectedFrente.estado),l(),x(" ",e.getEstadoLabel(e.selectedFrente.estado)," "),l(10),_e("Ubicaci\xF3n: ",e.selectedFrente.ubicacion_lat==null?null:e.selectedFrente.ubicacion_lat.toFixed(6),", ",e.selectedFrente.ubicacion_lng==null?null:e.selectedFrente.ubicacion_lng.toFixed(6),""),l(),_("ngIf",e.selectedFrente.descripcion),l(5),x("Progreso General: ",e.getProgresoPromedio(e.selectedFrente.id).toFixed(1),"%"),l(7),A(e.getActividadesByFrente(e.selectedFrente.id).length),l(5),A(e.getActividadesEnProgreso(e.selectedFrente.id)),l(5),A(e.getActividadesCompletadas(e.selectedFrente.id)),l(5),x("",e.getProgresoPromedio(e.selectedFrente.id).toFixed(1),"%"),l(4),_("routerLink",Ke(17,Fi))("queryParams",je(18,Pi,e.selectedFrente.id)),l(8),_("disabled",!e.selectedFrente.km_inicial||!e.selectedFrente.km_final)}}var Hn=(()=>{class r{constructor(e,t,i,n,s,c,m){this.mapService=e,this.actividadesService=t,this.authService=i,this.kilometrosService=n,this.snackBar=s,this.dialog=c,this.router=m,this.destroy$=new D,this.markers=new u.LayerGroup,this.kilometroLayers=new u.LayerGroup,this.loading=!0,this.sidenavOpened=!0,this.selectedFrente=null,this.isCreatingFrente=!1,this.tempMarker=null,this.isDragMode=!1,this.showKilometricView=!1,this.frentes=[],this.actividades=[],this.filteredFrente=[],this.kilometros=[],this.estadosConfig=[],this.estadoFilter="todos",this.tipoFilter="todos",this.searchTerm="",this.estadosFrente=[{value:"todos",label:"Todos los Estados"},{value:"activo",label:"Activo"},{value:"pausado",label:"Pausado"},{value:"completado",label:"Completado"},{value:"planificado",label:"Planificado"}],this.tiposActividad=[{value:"todos",label:"Todos los Tipos"},{value:"excavacion",label:"Excavaci\xF3n"},{value:"pavimentacion",label:"Pavimentaci\xF3n"},{value:"se\xF1alizacion",label:"Se\xF1alizaci\xF3n"},{value:"drenaje",label:"Drenaje"},{value:"puentes",label:"Puentes y Estructuras"},{value:"mantenimiento",label:"Mantenimiento"}]}ngOnInit(){this.loadData()}ngAfterViewInit(){this.initializeMap()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.map&&this.map.remove()}loadData(){return $(this,null,function*(){try{console.log("\u{1F680} [LoadData] Iniciando carga de datos del mapa"),this.loading=!0,this.actividadesService.frentes$.pipe(F(this.destroy$)).subscribe(e=>{console.log("\u{1F3D7}\uFE0F [LoadData] Frentes recibidos:",e.length),e.forEach(t=>{console.log(`\u{1F4CD} [LoadData] Frente: ${t.nombre}`),console.log(`   - ID: ${t.id}`),console.log(`   - Ubicaci\xF3n: ${t.ubicacion_lat}, ${t.ubicacion_lng}`),console.log(`   - Coordenadas inicio: ${t.coordenadas_inicio}`),console.log(`   - Coordenadas fin: ${t.coordenadas_fin}`),console.log(`   - KM inicial: ${t.km_inicial}, KM final: ${t.km_final}`)}),this.frentes=e,this.applyFilters(),this.updateMapMarkers()}),this.actividadesService.actividades$.pipe(F(this.destroy$)).subscribe(e=>{console.log("\u{1F4CB} [LoadData] Actividades recibidas:",e.length),this.actividades=e,this.updateMapMarkers()}),console.log("\u{1F504} [LoadData] Refrescando datos del servicio..."),yield this.actividadesService.refresh(),console.log("\u2705 [LoadData] Datos del servicio refrescados"),console.log("\u{1F4CF} [LoadData] Iniciando carga de datos kilom\xE9tricos..."),yield this.loadKilometricData(),console.log("\u2705 [LoadData] Datos kilom\xE9tricos cargados")}catch(e){console.error("\u274C [LoadData] Error loading map data:",e),this.snackBar.open("Error al cargar los datos del mapa","Cerrar",{duration:5e3,panelClass:["error-snackbar"]})}finally{this.loading=!1,console.log("\u{1F3C1} [LoadData] Carga de datos completada")}})}initializeMap(){let n=u.icon({iconRetinaUrl:"assets/marker-icon-2x.png",iconUrl:"assets/marker-icon.png",shadowUrl:"assets/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]});u.Marker.prototype.options.icon=n,this.map=u.map("map").setView([4.5709,-74.2973],6),u.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"\xA9 OpenStreetMap contributors",maxZoom:19}).addTo(this.map),this.markers.addTo(this.map),this.kilometroLayers.addTo(this.map),this.map.on("click",s=>{this.isCreatingFrente?this.handleMapClickForFrente(s):this.selectedFrente=null})}updateMapMarkers(){if(this.map&&(this.markers.clearLayers(),this.filteredFrente.forEach(e=>{if(e.ubicacion_lat&&e.ubicacion_lng){let t=this.isDragMode?this.createDraggableFrenteMarker(e):this.createFrenteMarker(e);this.markers.addLayer(t)}}),this.filteredFrente.length>0)){let e=new u.FeatureGroup(this.markers.getLayers());e.getBounds().isValid()&&this.map.fitBounds(e.getBounds(),{padding:[20,20]})}}createFrenteMarker(e){let i=this.actividades.filter(C=>C.frente_id===e.id).filter(C=>C.estado==="ejecucion").length,n=this.getFrenteIconColor(e.estado),s=u.divIcon({html:`
        <div class="custom-marker ${e.estado}">
          <mat-icon class="marker-icon">${this.getFrenteIcon(e.estado)}</mat-icon>
          ${i>0?`<span class="activity-badge">${i}</span>`:""}
        </div>
      `,className:"custom-div-icon",iconSize:[40,40],iconAnchor:[20,40]}),c=u.marker([e.ubicacion_lat,e.ubicacion_lng],{icon:s}),m=this.createFrentePopup(e);return c.bindPopup(m,{maxWidth:300}),c.on("click",()=>{this.selectedFrente=e,this.sidenavOpened=!0}),c}createFrentePopup(e){let t=this.getActividadesByFrente(e.id),i=t.filter(c=>c.estado==="finalizado").length,n=t.filter(c=>c.estado==="ejecucion").length,s=t.length>0?Math.round(i/t.length*100):0;return`
      <div class="frente-popup">
        <h3>${e.nombre}</h3>
        <p><strong>Estado:</strong> <span class="estado-${e.estado}">${this.getEstadoLabel(e.estado)}</span></p>
        <p><strong>Ubicaci\xF3n:</strong> ${e.ubicacion_lat?.toFixed(4)||"N/A"}, ${e.ubicacion_lng?.toFixed(4)||"N/A"}</p>
        <div class="actividades-summary">
          <h4>Actividades:</h4>
          <p>Total: ${t.length}</p>
          <p>En progreso: ${n}</p>
          <p>Completadas: ${i}</p>
          <p>Progreso promedio: ${s.toFixed(1)}%</p>
        </div>
        ${e.descripcion?`<p><strong>Descripci\xF3n:</strong> ${e.descripcion}</p>`:""}
      </div>
    `}getFrenteIconColor(e){return{activo:"#4caf50",pausado:"#ff9800",completado:"#2196f3",planificado:"#9e9e9e"}[e]||"#9e9e9e"}getFrenteIcon(e){return{activo:"construction",pausado:"pause_circle",completado:"check_circle",planificado:"schedule"}[e]||"location_on"}getFrenteMarkerIcon(e){let t=this.getFrenteIconColor(e);return u.divIcon({html:`
        <div class="custom-marker ${e}">
          <mat-icon class="marker-icon">${this.getFrenteIcon(e)}</mat-icon>
        </div>
      `,className:"custom-div-icon",iconSize:[40,40],iconAnchor:[20,40]})}getEstadoLabel(e){return{activo:"Activo",pausado:"Pausado",completado:"Completado",planificado:"Planificado"}[e]||e}applyFilters(){this.filteredFrente=this.frentes.filter(e=>{let t=this.estadoFilter==="todos"||e.estado===this.estadoFilter,i=!this.searchTerm||e.nombre.toLowerCase().includes(this.searchTerm.toLowerCase())||e.descripcion?.toLowerCase().includes(this.searchTerm.toLowerCase()),n=this.tipoFilter==="todos";return n||(n=this.actividades.filter(c=>c.frente_id===e.id).some(c=>c.tipo_actividad===this.tipoFilter)),t&&i&&n}),this.updateMapMarkers()}onEstadoFilterChange(){this.applyFilters()}onTipoFilterChange(){this.applyFilters()}onSearchChange(){this.applyFilters()}centerOnFrente(e){e.ubicacion_lat&&e.ubicacion_lng&&(this.map.setView([e.ubicacion_lat,e.ubicacion_lng],15),this.selectedFrente=e)}toggleSidenav(){this.sidenavOpened=!this.sidenavOpened}getActividadesByFrente(e){return this.actividades.filter(t=>t.frente_id===e)}getProgresoPromedio(e){let t=this.getActividadesByFrente(e);if(t.length===0)return 0;let i=t.filter(n=>n.estado==="finalizado").length;return Math.round(i/t.length*100)}getActividadesEnProgreso(e){return this.getActividadesByFrente(e).filter(t=>t.estado==="ejecucion").length}getActividadesCompletadas(e){return this.getActividadesByFrente(e).filter(t=>t.estado==="finalizado").length}getEstadoColor(e){return{activo:"primary",pausado:"warn",completado:"accent",planificado:""}[e]||""}refreshData(){this.loadData()}loadKilometricData(){return $(this,null,function*(){try{console.log("\u{1F50D} [LoadKilometricData] Iniciando carga de datos kilom\xE9tricos"),this.estadosConfig=(yield this.kilometrosService.getEstadosConfig().toPromise())||[],console.log("\u{1F4CA} [LoadKilometricData] Estados config cargados:",this.estadosConfig.length),this.kilometros=[],console.log("\u{1F3D7}\uFE0F [LoadKilometricData] Frentes disponibles:",this.frentes.length);for(let e of this.frentes){console.log(`\u{1F50D} [LoadKilometricData] Cargando kil\xF3metros para frente: ${e.nombre} (${e.id})`),console.log("\u{1F4CD} [LoadKilometricData] Coordenadas inicio:",e.coordenadas_inicio),console.log("\u{1F4CD} [LoadKilometricData] Coordenadas fin:",e.coordenadas_fin),console.log(`\u{1F4CF} [LoadKilometricData] KM inicial: ${e.km_inicial}, KM final: ${e.km_final}`);let t=(yield this.kilometrosService.getKilometrosByFrente(e.id).toPromise())||[];console.log(`\u{1F4CA} [LoadKilometricData] Kil\xF3metros encontrados para ${e.nombre}:`,t.length),this.kilometros.push(...t)}console.log("\u{1F4CA} [LoadKilometricData] Total kil\xF3metros cargados:",this.kilometros.length),this.showKilometricView&&(console.log("\u{1F5FA}\uFE0F [LoadKilometricData] Actualizando visualizaci\xF3n kilom\xE9trica"),this.updateKilometricVisualization())}catch(e){console.error("\u274C [LoadKilometricData] Error loading kilometric data:",e)}})}toggleKilometricView(){this.showKilometricView=!this.showKilometricView,console.log("\u{1F504} [ToggleKilometricView] Vista kilom\xE9trica:",this.showKilometricView?"ACTIVADA":"DESACTIVADA"),this.showKilometricView?(console.log("\u{1F5FA}\uFE0F [ToggleKilometricView] Iniciando visualizaci\xF3n kilom\xE9trica"),console.log("\u{1F4CA} [ToggleKilometricView] Frentes disponibles:",this.frentes.length),console.log("\u{1F4CA} [ToggleKilometricView] Kil\xF3metros disponibles:",this.kilometros.length),this.updateKilometricVisualization(),this.snackBar.open("Vista kilom\xE9trica activada","Cerrar",{duration:3e3,panelClass:["info-snackbar"]})):(this.kilometroLayers.clearLayers(),this.snackBar.open("Vista kilom\xE9trica desactivada","Cerrar",{duration:3e3,panelClass:["info-snackbar"]}))}updateKilometricVisualization(){if(console.log("\u{1F5FA}\uFE0F [UpdateKilometricVisualization] Iniciando actualizaci\xF3n de visualizaci\xF3n"),console.log("\u{1F5FA}\uFE0F [UpdateKilometricVisualization] Map exists:",!!this.map),console.log("\u{1F5FA}\uFE0F [UpdateKilometricVisualization] Show kilometric view:",this.showKilometricView),!this.map||!this.showKilometricView){console.log("\u26A0\uFE0F [UpdateKilometricVisualization] Saliendo: mapa no existe o vista kilom\xE9trica desactivada");return}this.kilometroLayers.clearLayers(),console.log("\u{1F9F9} [UpdateKilometricVisualization] Capas kilom\xE9tricas limpiadas");let e=this.groupKilometrosByFrente();console.log("\u{1F4CA} [UpdateKilometricVisualization] Kil\xF3metros agrupados por frente:",Object.keys(e).length),Object.entries(e).forEach(([t,i])=>{let n=this.frentes.find(s=>s.id===t);console.log(`\u{1F3D7}\uFE0F [UpdateKilometricVisualization] Procesando frente: ${n?.nombre||t}`),console.log("\u{1F4CD} [UpdateKilometricVisualization] Coordenadas inicio:",n?.coordenadas_inicio),console.log("\u{1F4CD} [UpdateKilometricVisualization] Coordenadas fin:",n?.coordenadas_fin),console.log("\u{1F4CA} [UpdateKilometricVisualization] Kil\xF3metros en frente:",i.length),n&&n.coordenadas_inicio&&n.coordenadas_fin?(console.log(`\u2705 [UpdateKilometricVisualization] Creando ruta kilom\xE9trica para ${n.nombre}`),this.createKilometricRoute(n,i)):console.log(`\u26A0\uFE0F [UpdateKilometricVisualization] Frente ${n?.nombre||t} no tiene coordenadas completas`)}),console.log("\u{1F5FA}\uFE0F [UpdateKilometricVisualization] Visualizaci\xF3n kilom\xE9trica completada")}groupKilometrosByFrente(){return this.kilometros.reduce((e,t)=>(e[t.frente_id]||(e[t.frente_id]=[]),e[t.frente_id].push(t),e),{})}createKilometricRoute(e,t){if(!e.coordenadas_inicio||!e.coordenadas_fin)return;let i=this.getRoutePoints(e),n=u.polyline(i,{color:"#cccccc",weight:8,opacity:.7});this.kilometroLayers.addLayer(n),t.sort((s,c)=>s.kilometro-c.kilometro).forEach((s,c)=>{let m=this.interpolateAlongCurve(e,s.kilometro);if(!m)return;let C=null;if(c<t.length-1?C=this.interpolateAlongCurve(e,t[c+1].kilometro):e.coordenadas_fin&&(C=[e.coordenadas_fin.lat,e.coordenadas_fin.lng]),C){let si=this.getSegmentPoints(e,s.kilometro,c<t.length-1?t[c+1].kilometro:e.km_final),ye=u.polyline(si,{color:s.color,weight:6,opacity:.9}),di=this.createKilometroPopup(s,e);ye.bindPopup(di),this.kilometroLayers.addLayer(ye)}let h=u.circleMarker(m,{radius:8,fillColor:s.color,color:"#ffffff",weight:2,opacity:1,fillOpacity:.8}),O=this.createKilometroPopup(s,e);h.bindPopup(O),this.kilometroLayers.addLayer(h)}),e.coordenadas_intermedias&&e.coordenadas_intermedias.length>0&&e.coordenadas_intermedias.forEach((s,c)=>{let m=u.circleMarker([s.lat,s.lng],{radius:6,fillColor:"#ff9800",color:"#ffffff",weight:2,opacity:1,fillOpacity:.8});m.bindPopup(`
          <div class="control-point-popup">
            <h4>Punto de Control ${c+1}</h4>
            <p><strong>Kilometraje:</strong> ${s.kilometraje}</p>
            <p><strong>Coordenadas:</strong> ${s.lat.toFixed(6)}, ${s.lng.toFixed(6)}</p>
          </div>
        `),this.kilometroLayers.addLayer(m)})}getSegmentPoints(e,t,i){let n=[],s=this.getRoutePoints(e);if(!e.km_inicial||!e.km_final)return n;if(!e.coordenadas_intermedias||e.coordenadas_intermedias.length===0){let h=this.interpolateAlongCurve(e,t),O=this.interpolateAlongCurve(e,i);return h&&O&&n.push(h,O),n}let c=[];e.coordenadas_inicio&&e.km_inicial&&c.push({lat:e.coordenadas_inicio.lat,lng:e.coordenadas_inicio.lng,kilometraje:e.km_inicial}),c.push(...e.coordenadas_intermedias),e.coordenadas_fin&&e.km_final&&c.push({lat:e.coordenadas_fin.lat,lng:e.coordenadas_fin.lng,kilometraje:e.km_final}),c.sort((h,O)=>h.kilometraje-O.kilometraje);let m=this.interpolateAlongCurve(e,t);m&&n.push(m),c.forEach(h=>{h.kilometraje>t&&h.kilometraje<i&&n.push([h.lat,h.lng])});let C=this.interpolateAlongCurve(e,i);return C&&n.push(C),n}interpolatePoint(e,t,i){let n=e[0]+(t[0]-e[0])*i,s=e[1]+(t[1]-e[1])*i;return[n,s]}interpolateAlongCurve(e,t){if(!e.coordenadas_inicio||!e.coordenadas_fin||!e.km_inicial||!e.km_final)return null;let i=[];i.push({lat:e.coordenadas_inicio.lat,lng:e.coordenadas_inicio.lng,kilometraje:e.km_inicial}),e.coordenadas_intermedias&&e.coordenadas_intermedias.length>0&&i.push(...e.coordenadas_intermedias),i.push({lat:e.coordenadas_fin.lat,lng:e.coordenadas_fin.lng,kilometraje:e.km_final}),i.sort((c,m)=>c.kilometraje-m.kilometraje);for(let c=0;c<i.length-1;c++){let m=i[c],C=i[c+1];if(t>=m.kilometraje&&t<=C.kilometraje){let h=C.kilometraje-m.kilometraje,O=h>0?(t-m.kilometraje)/h:0;return this.interpolatePoint([m.lat,m.lng],[C.lat,C.lng],O)}}let n=e.km_final-e.km_inicial,s=n>0?(t-e.km_inicial)/n:0;return this.interpolatePoint([e.coordenadas_inicio.lat,e.coordenadas_inicio.lng],[e.coordenadas_fin.lat,e.coordenadas_fin.lng],s)}getRoutePoints(e){if(!e.coordenadas_inicio||!e.coordenadas_fin)return[];let t=[];return t.push([e.coordenadas_inicio.lat,e.coordenadas_inicio.lng]),e.coordenadas_intermedias&&e.coordenadas_intermedias.length>0&&[...e.coordenadas_intermedias].sort((n,s)=>n.kilometraje-s.kilometraje).forEach(n=>{t.push([n.lat,n.lng])}),t.push([e.coordenadas_fin.lat,e.coordenadas_fin.lng]),t}createKilometroPopup(e,t){return`
      <div class="kilometro-popup">
        <h4>Kil\xF3metro ${e.kilometro}</h4>
        <p><strong>Frente:</strong> ${t.nombre}</p>
        <p><strong>Estado:</strong> <span style="color: ${e.color}">${e.estado}</span></p>
        <p><strong>Progreso:</strong> ${e.progreso_porcentaje}%</p>
        <p><strong>Actividades:</strong> ${e.actividades_count}</p>
        <p><strong>\xDAltima actualizaci\xF3n:</strong> ${new Date(e.fecha_ultima_actualizacion).toLocaleDateString()}</p>
      </div>
    `}generateKilometrosForFrente(e){return $(this,null,function*(){if(!e.km_inicial||!e.km_final){this.snackBar.open("El frente debe tener rangos kilom\xE9tricos definidos","Cerrar",{duration:5e3,panelClass:["error-snackbar"]});return}try{yield this.kilometrosService.generateKilometrosForFrente(e.id,e.km_inicial,e.km_final).toPromise(),this.snackBar.open("Kil\xF3metros generados exitosamente","Cerrar",{duration:3e3,panelClass:["success-snackbar"]}),yield this.loadKilometricData()}catch(t){console.error("Error generating kilometros:",t),this.snackBar.open("Error al generar kil\xF3metros","Cerrar",{duration:5e3,panelClass:["error-snackbar"]})}})}startCreatingFrente(){this.isCreatingFrente=!0,this.snackBar.open("Haz clic en el mapa para seleccionar la ubicaci\xF3n del frente","Cancelar",{duration:0,panelClass:["info-snackbar"]}).onAction().subscribe(()=>{this.cancelFrenteCreation()})}cancelFrenteCreation(){this.isCreatingFrente=!1,this.tempMarker&&(this.map.removeLayer(this.tempMarker),this.tempMarker=null),this.snackBar.dismiss()}handleMapClickForFrente(e){let{lat:t,lng:i}=e.latlng;this.tempMarker&&this.map.removeLayer(this.tempMarker),this.tempMarker=u.marker([t,i],{icon:u.divIcon({html:`
          <div class="temp-marker">
            <mat-icon class="marker-icon">add_location</mat-icon>
          </div>
        `,className:"temp-div-icon",iconSize:[40,40],iconAnchor:[20,40]})}).addTo(this.map),this.openFrenteForm("create",{lat:t,lng:i})}openFrenteForm(e,t,i){let n={mode:e,frente:i,initialCoordinates:t};this.dialog.open(ii,{width:"600px",maxWidth:"90vw",data:n,disableClose:!0}).afterClosed().subscribe(c=>{c&&this.refreshData(),e==="create"&&this.cancelFrenteCreation()})}editFrente(e){this.openFrenteForm("edit",void 0,e)}deleteFrente(e){return $(this,null,function*(){if(confirm(`\xBFEst\xE1s seguro de que deseas eliminar el frente "${e.nombre}"?`))try{yield this.actividadesService.deleteFrente(e.id),this.snackBar.open("Frente eliminado exitosamente","Cerrar",{duration:3e3,panelClass:["success-snackbar"]}),this.refreshData(),this.selectedFrente?.id===e.id&&(this.selectedFrente=null)}catch(t){console.error("Error deleting frente:",t),this.snackBar.open("Error al eliminar el frente","Cerrar",{duration:5e3,panelClass:["error-snackbar"]})}})}createDraggableFrenteMarker(e){let t=u.marker([e.ubicacion_lat,e.ubicacion_lng],{icon:this.getFrenteMarkerIcon(e.estado),draggable:!0});return t.bindPopup(this.createFrentePopup(e)),t.on("dragend",i=>$(this,null,function*(){let n=i.target.getLatLng();try{yield this.actividadesService.updateFrenteLocation(e.id,n.lat,n.lng),this.snackBar.open("Ubicaci\xF3n del frente actualizada","Cerrar",{duration:3e3,panelClass:["success-snackbar"]});let s=this.frentes.findIndex(c=>c.id===e.id);s!==-1&&(this.frentes[s]=q(G({},this.frentes[s]),{ubicacion_lat:n.lat,ubicacion_lng:n.lng}),this.applyFilters())}catch(s){console.error("Error updating frente location:",s),this.snackBar.open("Error al actualizar la ubicaci\xF3n","Cerrar",{duration:5e3,panelClass:["error-snackbar"]}),t.setLatLng([e.ubicacion_lat,e.ubicacion_lng])}})),t}toggleDragMode(){this.isDragMode=!this.isDragMode;let e=this.isDragMode?"Modo arrastrar activado - Puedes mover los frentes arrastrando los marcadores":"Modo arrastrar desactivado";this.snackBar.open(e,"Cerrar",{duration:3e3,panelClass:["info-snackbar"]}),this.updateMapMarkers()}navigateToCreateFrente(){this.router.navigate(["/frentes/nuevo"])}navigateToEditFrente(e){this.router.navigate(["/frentes",e,"editar"])}navigateToFrentesManagement(){this.router.navigate(["/frentes"])}static{this.\u0275fac=function(t){return new(t||r)(V(ti),V($t),V(Ot),V(ai),V(Pt),V(Zt),V(Ge))}}static{this.\u0275cmp=T({type:r,selectors:[["app-mapa"]],decls:80,vars:25,consts:[["frenteMenu","matMenu"],["sidenav",""],[1,"mapa-container"],[1,"toolbar-card"],[1,"toolbar-content"],[1,"toolbar-left"],["mat-icon-button","","matTooltip","Alternar panel de filtros",3,"click"],[1,"page-title"],[1,"toolbar-right"],["mat-raised-button","","matTooltip","Alternar vista kilom\xE9trica",3,"click","color","disabled"],["mat-raised-button","","color","primary","matTooltip","Crear nuevo frente",3,"click","disabled"],["mat-icon-button","","matTooltip","Opciones de frentes",3,"matMenuTriggerFor","disabled"],["mat-menu-item","",3,"click"],[3,"color"],["color","accent","selected","",4,"ngIf"],[1,"main-container"],[1,"sidenav-container"],["mode","side",1,"filters-sidenav",3,"opened"],[1,"sidenav-content"],[1,"sidenav-header"],["mat-icon-button","",3,"click"],[1,"filters-section"],["appearance","outline",1,"full-width"],["matInput","","placeholder","Nombre o descripci\xF3n",3,"ngModelChange","input","ngModel"],["matSuffix",""],[3,"valueChange","selectionChange","value"],[3,"value",4,"ngFor","ngForOf"],[1,"frentes-section"],["class","loading-container",4,"ngIf"],[4,"ngIf"],["class","no-results",4,"ngIf"],[1,"map-content"],[1,"map-container"],["id","map",1,"leaflet-map"],["class","map-loading-overlay",4,"ngIf"],["class","creating-frente-overlay",4,"ngIf"],["class","frente-info-card",4,"ngIf"],["color","accent","selected",""],[3,"value"],[1,"loading-container"],["diameter","40"],["class","frente-item",3,"selected","click",4,"ngFor","ngForOf"],[1,"frente-item",3,"click"],["matListItemAvatar",""],["matBadgeColor","accent","matBadgeSize","small",3,"matBadge","matBadgeHidden"],["matListItemTitle",""],["matListItemLine",""],[1,"estado-chip",3,"ngClass"],[1,"ubicacion"],["matListItemLine","",1,"progress-info"],["mat-icon-button","","matListItemMeta","",3,"click"],[1,"no-results"],[1,"map-loading-overlay"],["diameter","60"],[1,"creating-frente-overlay"],[1,"creating-frente-card"],[1,"creating-frente-content"],["color","primary"],["mat-raised-button","","color","warn",3,"click"],[1,"frente-info-card"],["mat-card-avatar",""],["mat-icon-button","",1,"close-button",3,"click"],[1,"frente-details"],[1,"detail-row"],["class","detail-row",4,"ngIf"],[1,"actividades-stats"],[1,"stats-grid"],[1,"stat-item"],[1,"stat-number"],[1,"stat-label"],["mat-button","","color","primary",3,"routerLink","queryParams"],["mat-button","",3,"click"],["mat-button","","color","accent","matTooltip","Generar kil\xF3metros para este frente",3,"click","disabled"],["mat-button","","color","accent",3,"click"],["mat-button","","color","warn",3,"click"]],template:function(t,i){if(t&1){let n=B();o(0,"div",2)(1,"mat-card",3)(2,"mat-card-content")(3,"div",4)(4,"div",5)(5,"button",6),v("click",function(){return g(n),f(i.toggleSidenav())}),o(6,"mat-icon"),d(7,"menu"),a()(),o(8,"h2",7),d(9,"Mapa Interactivo de Frentes"),a()(),o(10,"div",8)(11,"button",9),v("click",function(){return g(n),f(i.toggleKilometricView())}),o(12,"mat-icon"),d(13),a(),d(14),a(),o(15,"button",10),v("click",function(){return g(n),f(i.startCreatingFrente())}),o(16,"mat-icon"),d(17,"add_location"),a(),d(18),a(),o(19,"button",11)(20,"mat-icon"),d(21,"more_vert"),a()(),o(22,"mat-menu",null,0)(24,"button",12),v("click",function(){return g(n),f(i.toggleDragMode())}),o(25,"mat-icon",13),d(26,"open_with"),a(),o(27,"span"),d(28),a()(),o(29,"button",12),v("click",function(){return g(n),f(i.refreshData())}),o(30,"mat-icon"),d(31,"refresh"),a(),o(32,"span"),d(33,"Actualizar Datos"),a()()(),o(34,"mat-chip-set")(35,"mat-chip"),d(36),a(),P(37,Ei,4,0,"mat-chip",14),a()()()()(),o(38,"div",15)(39,"mat-sidenav-container",16)(40,"mat-sidenav",17,1)(42,"div",18)(43,"div",19)(44,"h3"),d(45,"Filtros y Frentes"),a(),o(46,"button",20),v("click",function(){return g(n),f(i.toggleSidenav())}),o(47,"mat-icon"),d(48,"close"),a()()(),o(49,"div",21)(50,"h4"),d(51,"Filtros"),a(),o(52,"mat-form-field",22)(53,"mat-label"),d(54,"Buscar frente"),a(),o(55,"input",23),re("ngModelChange",function(c){return g(n),ne(i.searchTerm,c)||(i.searchTerm=c),f(c)}),v("input",function(){return g(n),f(i.onSearchChange())}),a(),o(56,"mat-icon",24),d(57,"search"),a()(),o(58,"mat-form-field",22)(59,"mat-label"),d(60,"Estado"),a(),o(61,"mat-select",25),re("valueChange",function(c){return g(n),ne(i.estadoFilter,c)||(i.estadoFilter=c),f(c)}),v("selectionChange",function(){return g(n),f(i.onEstadoFilterChange())}),P(62,Si,2,2,"mat-option",26),a()(),o(63,"mat-form-field",22)(64,"mat-label"),d(65,"Tipo de Actividad"),a(),o(66,"mat-select",25),re("valueChange",function(c){return g(n),ne(i.tipoFilter,c)||(i.tipoFilter=c),f(c)}),v("selectionChange",function(){return g(n),f(i.onTipoFilterChange())}),P(67,Oi,2,2,"mat-option",26),a()()(),o(68,"div",27)(69,"h4"),d(70),a(),P(71,Di,4,0,"div",28)(72,Ti,2,1,"mat-nav-list",29)(73,Vi,5,0,"div",30),a()()(),o(74,"mat-sidenav-content",31)(75,"div",32),te(76,"div",33),P(77,Bi,4,0,"div",34)(78,Ai,14,0,"div",35),a(),P(79,zi,71,20,"mat-card",36),a()()()()}if(t&2){let n=ze(23);l(11),_("color",i.showKilometricView?"accent":"basic")("disabled",i.loading),l(2),A(i.showKilometricView?"route":"timeline"),l(),x(" ",i.showKilometricView?"Vista Normal":"Vista Kilom\xE9trica"," "),l(),_("disabled",i.loading||i.isCreatingFrente),l(3),x(" ",i.isCreatingFrente?"Selecciona ubicaci\xF3n...":"Crear Frente"," "),l(),_("matMenuTriggerFor",n)("disabled",i.loading),l(6),_("color",i.isDragMode?"accent":""),l(3),x("",i.isDragMode?"Desactivar":"Activar"," Modo Arrastrar"),l(8),x("",i.filteredFrente.length," frentes"),l(),_("ngIf",i.isDragMode),l(3),_("opened",i.sidenavOpened),l(15),ie("ngModel",i.searchTerm),l(6),ie("value",i.estadoFilter),l(),_("ngForOf",i.estadosFrente),l(4),ie("value",i.tipoFilter),l(),_("ngForOf",i.tiposActividad),l(3),x("Frentes (",i.filteredFrente.length,")"),l(),_("ngIf",i.loading),l(),_("ngIf",!i.loading),l(),_("ngIf",!i.loading&&i.filteredFrente.length===0),l(4),_("ngIf",i.loading),l(),_("ngIf",i.isCreatingFrente),l(),_("ngIf",i.selectedFrente)}},dependencies:[Ne,$e,Ue,We,Je,He,Ze,Ye,Qe,qe,mt,rt,dt,lt,at,ct,st,ot,wt,bt,vt,Mt,Ct,oi,ke,ri,de,Ht,Qt,qt,Gt,Wt,Ut,Nt,gt,ht,pt,ut,ei,Xt,Jt,_t,ft,Tt,Dt,It,Rt,jt,Kt,zt,kt,xt,Et,Yt,Lt,Bt,Vt,At],styles:[".mapa-container[_ngcontent-%COMP%]{height:100vh;display:flex;flex-direction:column;background-color:#fafafa}.toolbar-card[_ngcontent-%COMP%]{margin:0;border-radius:0;box-shadow:0 2px 4px #0000001a;z-index:1000}.toolbar-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:8px 0}.toolbar-left[_ngcontent-%COMP%], .toolbar-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px}.page-title[_ngcontent-%COMP%]{margin:0;font-size:1.5rem;font-weight:500;color:#333}.main-container[_ngcontent-%COMP%]{flex:1;overflow:hidden}.sidenav-container[_ngcontent-%COMP%]{height:100%}.filters-sidenav[_ngcontent-%COMP%]{width:350px;border-right:1px solid #e0e0e0;background-color:#fff}.sidenav-content[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;overflow:hidden}.sidenav-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px;border-bottom:1px solid #e0e0e0;background-color:#1976d2;color:#fff}.sidenav-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.2rem;font-weight:500}.sidenav-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#fff}.filters-section[_ngcontent-%COMP%]{padding:16px;border-bottom:1px solid #e0e0e0}.filters-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 16px;font-size:1rem;font-weight:500;color:#333}.full-width[_ngcontent-%COMP%]{width:100%;margin-bottom:16px}.frentes-section[_ngcontent-%COMP%]{flex:1;overflow:hidden;display:flex;flex-direction:column}.frentes-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;padding:16px 16px 8px;font-size:1rem;font-weight:500;color:#333}.frentes-section[_ngcontent-%COMP%]   mat-nav-list[_ngcontent-%COMP%]{flex:1;overflow-y:auto}.frente-item[_ngcontent-%COMP%]{border-bottom:1px solid #e0e0e0;cursor:pointer;transition:background-color .2s ease}.frente-item[_ngcontent-%COMP%]:hover{background-color:#0000000a}.frente-item.selected[_ngcontent-%COMP%]{background-color:#1976d21f;border-left:4px solid #1976d2}.estado-chip[_ngcontent-%COMP%]{display:inline-block;padding:2px 8px;border-radius:12px;font-size:.75rem;font-weight:500;text-transform:uppercase;margin-right:8px}.estado-activo[_ngcontent-%COMP%]{background-color:#e8f5e8;color:#2e7d32}.estado-pausado[_ngcontent-%COMP%]{background-color:#fff3e0;color:#f57c00}.estado-completado[_ngcontent-%COMP%]{background-color:#e3f2fd;color:#1976d2}.estado-planificado[_ngcontent-%COMP%]{background-color:#f5f5f5;color:#616161}.kilometraje[_ngcontent-%COMP%]{font-size:.875rem;color:#666}.progress-info[_ngcontent-%COMP%]{display:flex;justify-content:space-between;font-size:.75rem;color:#666;margin-top:4px}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:32px;text-align:center}.loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:16px;color:#666}.no-results[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:32px;text-align:center;color:#666}.no-results[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px;margin-bottom:16px;opacity:.5}.map-content[_ngcontent-%COMP%]{position:relative;height:100%}.map-container[_ngcontent-%COMP%]{position:relative;height:100%;width:100%}.leaflet-map[_ngcontent-%COMP%]{height:100%;width:100%;z-index:1}.map-loading-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background-color:#fffc;display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:1000}.map-loading-overlay[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:16px;color:#666}.frente-info-card[_ngcontent-%COMP%]{position:absolute;top:16px;right:16px;width:320px;max-height:calc(100vh - 200px);overflow-y:auto;z-index:1000;box-shadow:0 4px 12px #00000026}.frente-info-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{position:relative}.close-button[_ngcontent-%COMP%]{position:absolute;top:8px;right:8px}.frente-details[_ngcontent-%COMP%]{margin-bottom:16px}.detail-row[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:8px;margin-bottom:8px;font-size:.875rem}.detail-row[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px;color:#666;margin-top:2px}.actividades-stats[_ngcontent-%COMP%]{border-top:1px solid #e0e0e0;padding-top:16px}.actividades-stats[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 12px;font-size:1rem;font-weight:500}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:12px}.stat-item[_ngcontent-%COMP%]{text-align:center;padding:12px;background-color:#f5f5f5;border-radius:8px}.stat-number[_ngcontent-%COMP%]{display:block;font-size:1.5rem;font-weight:600;color:#1976d2}.stat-label[_ngcontent-%COMP%]{display:block;font-size:.75rem;color:#666;margin-top:4px}[_nghost-%COMP%]     .custom-div-icon{background:transparent;border:none}[_nghost-%COMP%]     .custom-marker{position:relative;width:40px;height:40px;background-color:#fff;border:3px solid #1976d2;border-radius:50%;display:flex;align-items:center;justify-content:center;box-shadow:0 2px 8px #0000004d;transition:transform .2s ease}[_nghost-%COMP%]     .custom-marker:hover{transform:scale(1.1)}[_nghost-%COMP%]     .custom-marker.activo{border-color:#4caf50}[_nghost-%COMP%]     .custom-marker.pausado{border-color:#ff9800}[_nghost-%COMP%]     .custom-marker.completado{border-color:#2196f3}[_nghost-%COMP%]     .custom-marker.planificado{border-color:#9e9e9e}[_nghost-%COMP%]     .marker-icon{font-size:20px;color:#333}[_nghost-%COMP%]     .activity-badge{position:absolute;top:-8px;right:-8px;background-color:#f44336;color:#fff;border-radius:50%;width:20px;height:20px;display:flex;align-items:center;justify-content:center;font-size:10px;font-weight:700;border:2px solid white}[_nghost-%COMP%]     .leaflet-popup-content{margin:8px 12px;line-height:1.4}[_nghost-%COMP%]     .frente-popup h3{margin:0 0 8px;color:#1976d2}[_nghost-%COMP%]     .frente-popup p{margin:4px 0;font-size:.875rem}[_nghost-%COMP%]     .actividades-summary{background-color:#f5f5f5;padding:8px;border-radius:4px;margin:8px 0}[_nghost-%COMP%]     .actividades-summary h4{margin:0 0 4px;font-size:.875rem}[_nghost-%COMP%]     .actividades-summary p{margin:2px 0;font-size:.75rem}.creating-frente-overlay[_ngcontent-%COMP%]{position:absolute;top:20px;left:50%;transform:translate(-50%);z-index:1000;pointer-events:none}.creating-frente-card[_ngcontent-%COMP%]{pointer-events:all;box-shadow:0 4px 12px #00000026;border-radius:8px}.creating-frente-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;text-align:center;gap:12px}.creating-frente-content[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:2rem;width:2rem;height:2rem}.creating-frente-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.1rem;font-weight:500}.creating-frente-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#666;font-size:.9rem}.toolbar-right[_ngcontent-%COMP%]   button[mat-raised-button][_ngcontent-%COMP%]{margin-right:8px}.toolbar-right[_ngcontent-%COMP%]   mat-menu[_ngcontent-%COMP%]{margin-top:8px}.frente-info-card[_ngcontent-%COMP%]   mat-card-actions[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px;padding:16px}.frente-info-card[_ngcontent-%COMP%]   mat-card-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;min-width:120px}.temp-marker[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse 2s infinite}@keyframes _ngcontent-%COMP%_pulse{0%{transform:scale(1);opacity:1}50%{transform:scale(1.1);opacity:.7}to{transform:scale(1);opacity:1}}@media (max-width: 768px){.filters-sidenav[_ngcontent-%COMP%]{width:100%}.toolbar-content[_ngcontent-%COMP%]{flex-direction:column;gap:8px;align-items:stretch}.toolbar-left[_ngcontent-%COMP%], .toolbar-right[_ngcontent-%COMP%]{justify-content:center}.toolbar-right[_ngcontent-%COMP%]{flex-wrap:wrap}.frente-info-card[_ngcontent-%COMP%]{position:relative;bottom:auto;right:auto;width:100%;margin:8px}.stats-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}.creating-frente-overlay[_ngcontent-%COMP%]{left:10px;right:10px;transform:none}.frente-info-card[_ngcontent-%COMP%]   mat-card-actions[_ngcontent-%COMP%]{flex-direction:column}.frente-info-card[_ngcontent-%COMP%]   mat-card-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}.page-title[_ngcontent-%COMP%]{font-size:1.25rem}}@media (max-width: 480px){.filters-sidenav[_ngcontent-%COMP%]{width:100vw}.stats-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(4,1fr);gap:8px}.stat-item[_ngcontent-%COMP%]{padding:8px 4px}.stat-number[_ngcontent-%COMP%]{font-size:1.25rem}}@media (prefers-color-scheme: dark){.mapa-container[_ngcontent-%COMP%]{background-color:#121212}.toolbar-card[_ngcontent-%COMP%]{background-color:#1e1e1e;color:#fff}.filters-sidenav[_ngcontent-%COMP%]{background-color:#1e1e1e;border-right-color:#333}.sidenav-header[_ngcontent-%COMP%]{background-color:#1976d2;border-bottom-color:#333}.filters-section[_ngcontent-%COMP%], .frente-item[_ngcontent-%COMP%]{border-bottom-color:#333}.frente-item[_ngcontent-%COMP%]:hover{background-color:#ffffff14}.frente-info-card[_ngcontent-%COMP%]{background-color:#1e1e1e;color:#fff}.actividades-stats[_ngcontent-%COMP%]{border-top-color:#333}.stat-item[_ngcontent-%COMP%]{background-color:#2a2a2a}[_nghost-%COMP%]     .custom-marker{background-color:#1e1e1e}[_nghost-%COMP%]     .marker-icon{color:#fff}}@media (prefers-contrast: high){.estado-chip[_ngcontent-%COMP%]{border:2px solid currentColor}.frente-item.selected[_ngcontent-%COMP%]{border-left-width:6px}[_nghost-%COMP%]     .custom-marker{border-width:4px}}.frente-item[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease-in-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.frente-info-card[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideInRight .3s ease-out}@keyframes _ngcontent-%COMP%_slideInRight{0%{opacity:0;transform:translate(20px)}to{opacity:1;transform:translate(0)}}.frente-item[_ngcontent-%COMP%]:focus{outline:2px solid #1976d2;outline-offset:2px}button[_ngcontent-%COMP%]:focus{outline:2px solid #1976d2;outline-offset:2px}@media (prefers-reduced-motion: reduce){.frente-item[_ngcontent-%COMP%], .frente-info-card[_ngcontent-%COMP%], [_nghost-%COMP%]     .custom-marker{animation:none;transition:none}[_nghost-%COMP%]     .custom-marker:hover{transform:none}}"]})}}return r})();export{Hn as MapaComponent};
