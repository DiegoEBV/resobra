import{a as nn}from"./chunk-3KGNB6JB.js";import"./chunk-FK6H3RFT.js";import{a as Nt,b as qt,c as Vt,d as $t,e as Qt}from"./chunk-XE6RDNXY.js";import{a as Tt,b as Ft,c as Wt,d as It,e as Ht,f as At,g as jt,h as zt,i as Yt,j as Lt,k as Bt,l as Pe}from"./chunk-WNWKSLW4.js";import{a as Kt,b as Gt,c as Xt,d as Jt}from"./chunk-EPNA6SYW.js";import{b as Ut}from"./chunk-ZLVJQ2UH.js";import"./chunk-SXXER37Y.js";import{g as Dt}from"./chunk-JUW7GNWS.js";import"./chunk-MS4AQ6UA.js";import{a as Rt,b as Et}from"./chunk-DMZJ7K26.js";import{c as Ot}from"./chunk-7BCONPA6.js";import{a as Zt,b as en,c as tn}from"./chunk-T2B3FFAI.js";import"./chunk-F5X5MWHG.js";import{b as Mt}from"./chunk-WI2E4B7N.js";import"./chunk-CSWWTQFU.js";import{a as Ct,b as Pt}from"./chunk-AZ2U4T3U.js";import"./chunk-SGYCFQGT.js";import"./chunk-2GVF4P32.js";import{a as kt}from"./chunk-WFXXN3GR.js";import{a as xt,b as St}from"./chunk-YC5WDUOT.js";import{d as ot,g as ge}from"./chunk-YMTLAEZG.js";import"./chunk-G7YPFBNB.js";import{a as ve,b as ut,c as ye,d as pt,e as we,f as ft,h as _e}from"./chunk-SNSQLCH6.js";import{b as wt,c as _t}from"./chunk-BXKJ5BTH.js";import"./chunk-3RK6DDJD.js";import{C as gt,F as vt,G as yt,b as st,g as lt,k as dt,w as ct,x as mt,y as ht}from"./chunk-UJ3DDJ5Q.js";import{i as fe,j as rt,n as it,o as at,p as he,sa as bt,ua as be,va as xe,wa as Se,xa as Ce}from"./chunk-4WMI5X77.js";import{Aa as tt,Db as w,Eb as re,Fb as We,Gb as nt,Nb as m,Ob as u,Pb as F,Qb as C,Rb as P,Tb as oe,Xb as j,Yb as A,ba as Ze,bc as Q,cc as K,db as h,dc as G,ga as et,gc as Ie,hc as f,ib as Fe,ic as M,jc as T,mc as X,nc as J,oc as U,pa as R,pb as ce,qa as E,rc as se,sc as me,uc as ue,vb as _,wc as pe}from"./chunk-B6672ACT.js";import"./chunk-X5YLR3NI.js";import{a as Je,b as Ue,i as k}from"./chunk-ODN5LVDJ.js";function ar(t,e){if(t&1){let n=oe();m(0,"mat-card",3),j("click",function(){let i=R(n).$implicit,a=A();return E(a.onGenerarReporte(i.id))}),m(1,"mat-card-content")(2,"div",4)(3,"mat-icon"),f(4),u()(),m(5,"div",5)(6,"h3"),f(7),u(),m(8,"p"),f(9),u()()(),m(10,"mat-card-actions")(11,"button",6)(12,"mat-icon"),f(13,"file_download"),u(),f(14," Generar "),u()()()}if(t&2){let n=e.$implicit;h(4),M(n.icono),h(3),M(n.nombre),h(2),M(n.descripcion)}}var an=(()=>{class t{constructor(){this.tiposReporte=[{id:"rendimiento",nombre:"Rendimiento",descripcion:"Reporte detallado del rendimiento por obra y frente",icono:"trending_up"},{id:"personal",nombre:"Personal",descripcion:"Evaluaciones y desempe\xF1o del personal",icono:"people"},{id:"actividades",nombre:"Actividades",descripcion:"Estado y progreso de actividades por obra",icono:"assignment"},{id:"kpis",nombre:"KPIs",descripcion:"Indicadores clave de rendimiento consolidados",icono:"insights"}],this.generarReporte=new tt}onGenerarReporte(n){this.generarReporte.emit(n)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=ce({type:t,selectors:[["app-report-generator"]],inputs:{tiposReporte:"tiposReporte"},outputs:{generarReporte:"generarReporte"},decls:3,vars:1,consts:[[1,"report-generator-container"],[1,"report-types-grid"],["class","report-type-card",3,"click",4,"ngFor","ngForOf"],[1,"report-type-card",3,"click"],[1,"report-icon"],[1,"report-info"],["mat-button","","color","primary"]],template:function(r,i){r&1&&(m(0,"div",0)(1,"div",1),_(2,ar,15,3,"mat-card",2),u()()),r&2&&(h(2),w("ngForOf",i.tiposReporte))},dependencies:[he,fe,_e,ve,we,ye,xe,be,Ce,Se,Mt,Dt,ge],styles:[".report-generator-container[_ngcontent-%COMP%]{padding:16px 0}.report-types-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(250px,1fr));gap:20px}.report-type-card[_ngcontent-%COMP%]{cursor:pointer;transition:transform .2s,box-shadow .2s;height:100%;display:flex;flex-direction:column}.report-type-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 6px 12px #0000001a}.report-type-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;text-align:center;padding:20px;flex:1}.report-type-card[_ngcontent-%COMP%]   .report-icon[_ngcontent-%COMP%]{background-color:#f0f4f8;border-radius:50%;width:70px;height:70px;display:flex;align-items:center;justify-content:center;margin-bottom:16px}.report-type-card[_ngcontent-%COMP%]   .report-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:32px;width:32px;height:32px;color:#3f51b5}.report-type-card[_ngcontent-%COMP%]   .report-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px;font-size:18px;font-weight:500;color:#333}.report-type-card[_ngcontent-%COMP%]   .report-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#666;font-size:14px;line-height:1.4}.report-type-card[_ngcontent-%COMP%]   mat-card-actions[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:8px 16px 16px}.report-type-card[_ngcontent-%COMP%]   mat-card-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}@media (max-width: 768px){.report-types-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})}}return t})();function mn(t,e,n,r,i){r=r||{};var a=1.15,o=i.internal.scaleFactor,s=i.internal.getFontSize()/o,c=i.getLineHeightFactor?i.getLineHeightFactor():a,l=s*c,d=/\r\n|\r|\n/g,p="",g=1;if((r.valign==="middle"||r.valign==="bottom"||r.halign==="center"||r.halign==="right")&&(p=typeof t=="string"?t.split(d):t,g=p.length||1),n+=s*(2-a),r.valign==="middle"?n-=g/2*l:r.valign==="bottom"&&(n-=g*l),r.halign==="center"||r.halign==="right"){var v=s;if(r.halign==="center"&&(v*=.5),p&&g>=1){for(var y=0;y<p.length;y++)i.text(p[y],e-i.getStringUnitWidth(p[y])*v,n),n+=l;return i}e-=i.getStringUnitWidth(t)*v}return r.halign==="justify"?i.text(t,e,n,{maxWidth:r.maxWidth||100,align:"justify"}):i.text(t,e,n),i}var on={},ie=function(){function t(e){this.jsPDFDocument=e,this.userStyles={textColor:e.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:e.internal.getFontSize(),fontStyle:e.internal.getFont().fontStyle,font:e.internal.getFont().fontName,lineWidth:e.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:e.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return t.setDefaults=function(e,n){n===void 0&&(n=null),n?n.__autoTableDocumentDefaults=e:on=e},t.unifyColor=function(e){return Array.isArray(e)?e:typeof e=="number"?[e,e,e]:typeof e=="string"?[e]:null},t.prototype.applyStyles=function(e,n){var r,i,a;n===void 0&&(n=!1),e.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(e.fontStyle);var o=this.jsPDFDocument.internal.getFont(),s=o.fontStyle,c=o.fontName;if(e.font&&(c=e.font),e.fontStyle){s=e.fontStyle;var l=this.getFontList()[c];l&&l.indexOf(s)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(l[0]),s=l[0])}if(this.jsPDFDocument.setFont(c,s),e.fontSize&&this.jsPDFDocument.setFontSize(e.fontSize),!n){var d=t.unifyColor(e.fillColor);d&&(r=this.jsPDFDocument).setFillColor.apply(r,d),d=t.unifyColor(e.textColor),d&&(i=this.jsPDFDocument).setTextColor.apply(i,d),d=t.unifyColor(e.lineColor),d&&(a=this.jsPDFDocument).setDrawColor.apply(a,d),typeof e.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(e.lineWidth)}},t.prototype.splitTextToSize=function(e,n,r){return this.jsPDFDocument.splitTextToSize(e,n,r)},t.prototype.rect=function(e,n,r,i,a){return this.jsPDFDocument.rect(e,n,r,i,a)},t.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},t.prototype.getTextWidth=function(e){return this.jsPDFDocument.getTextWidth(e)},t.prototype.getDocument=function(){return this.jsPDFDocument},t.prototype.setPage=function(e){this.jsPDFDocument.setPage(e)},t.prototype.addPage=function(){return this.jsPDFDocument.addPage()},t.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},t.prototype.getGlobalOptions=function(){return on||{}},t.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},t.prototype.pageSize=function(){var e=this.jsPDFDocument.internal.pageSize;return e.width==null&&(e={width:e.getWidth(),height:e.getHeight()}),e},t.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},t.prototype.getLineHeightFactor=function(){var e=this.jsPDFDocument;return e.getLineHeightFactor?e.getLineHeightFactor():1.15},t.prototype.getLineHeight=function(e){return e/this.scaleFactor()*this.getLineHeightFactor()},t.prototype.pageNumber=function(){var e=this.jsPDFDocument.internal.getCurrentPageInfo();return e?e.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},t}(),Be=function(t,e){return Be=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},Be(t,e)};function un(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Be(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var pn=function(t){un(e,t);function e(n){var r=t.call(this)||this;return r._element=n,r}return e}(Array);function or(t){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/t,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function sr(t){var e={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return e[t]}function Me(t,e,n){n.applyStyles(e,!0);var r=Array.isArray(t)?t:[t],i=r.map(function(a){return n.getTextWidth(a)}).reduce(function(a,o){return Math.max(a,o)},0);return i}function fn(t,e,n,r){var i=e.settings.tableLineWidth,a=e.settings.tableLineColor;t.applyStyles({lineWidth:i,lineColor:a});var o=hn(i,!1);o&&t.rect(n.x,n.y,e.getWidth(t.pageSize().width),r.y-n.y,o)}function hn(t,e){var n=t>0,r=e||e===0;return n&&r?"DF":n?"S":r?"F":null}function ke(t,e){var n,r,i,a;if(t=t||e,Array.isArray(t)){if(t.length>=4)return{top:t[0],right:t[1],bottom:t[2],left:t[3]};if(t.length===3)return{top:t[0],right:t[1],bottom:t[2],left:t[1]};if(t.length===2)return{top:t[0],right:t[1],bottom:t[0],left:t[1]};t.length===1?t=t[0]:t=e}return typeof t=="object"?(typeof t.vertical=="number"&&(t.top=t.vertical,t.bottom=t.vertical),typeof t.horizontal=="number"&&(t.right=t.horizontal,t.left=t.horizontal),{left:(n=t.left)!==null&&n!==void 0?n:e,top:(r=t.top)!==null&&r!==void 0?r:e,right:(i=t.right)!==null&&i!==void 0?i:e,bottom:(a=t.bottom)!==null&&a!==void 0?a:e}):(typeof t!="number"&&(t=e),{top:t,right:t,bottom:t,left:t})}function gn(t,e){var n=ke(e.settings.margin,0);return t.pageSize().width-(n.left+n.right)}function lr(t,e,n,r,i){var a={},o=1.3333333333333333,s=He(e,function(z){return i.getComputedStyle(z).backgroundColor});s!=null&&(a.fillColor=s);var c=He(e,function(z){return i.getComputedStyle(z).color});c!=null&&(a.textColor=c);var l=cr(r,n);l&&(a.cellPadding=l);var d="borderTopColor",p=o*n,g=r.borderTopWidth;if(r.borderBottomWidth===g&&r.borderRightWidth===g&&r.borderLeftWidth===g){var v=(parseFloat(g)||0)/p;v&&(a.lineWidth=v)}else a.lineWidth={top:(parseFloat(r.borderTopWidth)||0)/p,right:(parseFloat(r.borderRightWidth)||0)/p,bottom:(parseFloat(r.borderBottomWidth)||0)/p,left:(parseFloat(r.borderLeftWidth)||0)/p},a.lineWidth.top||(a.lineWidth.right?d="borderRightColor":a.lineWidth.bottom?d="borderBottomColor":a.lineWidth.left&&(d="borderLeftColor"));var y=He(e,function(z){return i.getComputedStyle(z)[d]});y!=null&&(a.lineColor=y);var D=["left","right","center","justify"];D.indexOf(r.textAlign)!==-1&&(a.halign=r.textAlign),D=["middle","bottom","top"],D.indexOf(r.verticalAlign)!==-1&&(a.valign=r.verticalAlign);var x=parseInt(r.fontSize||"");isNaN(x)||(a.fontSize=x/o);var O=dr(r);O&&(a.fontStyle=O);var q=(r.fontFamily||"").toLowerCase();return t.indexOf(q)!==-1&&(a.font=q),a}function dr(t){var e="";return(t.fontWeight==="bold"||t.fontWeight==="bolder"||parseInt(t.fontWeight)>=700)&&(e="bold"),(t.fontStyle==="italic"||t.fontStyle==="oblique")&&(e+="italic"),e}function He(t,e){var n=vn(t,e);if(!n)return null;var r=n.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!r||!Array.isArray(r))return null;var i=[parseInt(r[1]),parseInt(r[2]),parseInt(r[3])],a=parseInt(r[4]);return a===0||isNaN(i[0])||isNaN(i[1])||isNaN(i[2])?null:i}function vn(t,e){var n=e(t);return n==="rgba(0, 0, 0, 0)"||n==="transparent"||n==="initial"||n==="inherit"?t.parentElement==null?null:vn(t.parentElement,e):n}function cr(t,e){var n=[t.paddingTop,t.paddingRight,t.paddingBottom,t.paddingLeft],r=96/(72/e),i=(parseInt(t.lineHeight)-parseInt(t.fontSize))/e/2,a=n.map(function(s){return parseInt(s||"0")/r}),o=ke(a,0);return i>o.top&&(o.top=i),i>o.bottom&&(o.bottom=i),o}function yn(t,e,n,r,i){var a,o;r===void 0&&(r=!1),i===void 0&&(i=!1);var s;typeof e=="string"?s=n.document.querySelector(e):s=e;var c=Object.keys(t.getFontList()),l=t.scaleFactor(),d=[],p=[],g=[];if(!s)return console.error("Html table could not be found with input: ",e),{head:d,body:p,foot:g};for(var v=0;v<s.rows.length;v++){var y=s.rows[v],D=(o=(a=y?.parentElement)===null||a===void 0?void 0:a.tagName)===null||o===void 0?void 0:o.toLowerCase(),x=mr(c,l,n,y,r,i);x&&(D==="thead"?d.push(x):D==="tfoot"?g.push(x):p.push(x))}return{head:d,body:p,foot:g}}function mr(t,e,n,r,i,a){for(var o=new pn(r),s=0;s<r.cells.length;s++){var c=r.cells[s],l=n.getComputedStyle(c);if(i||l.display!=="none"){var d=void 0;a&&(d=lr(t,c,e,l,n)),o.push({rowSpan:c.rowSpan,colSpan:c.colSpan,styles:d,_element:c,content:ur(c)})}}var p=n.getComputedStyle(r);if(o.length>0&&(i||p.display!=="none"))return o}function ur(t){var e=t.cloneNode(!0);return e.innerHTML=e.innerHTML.replace(/\n/g,"").replace(/ +/g," "),e.innerHTML=e.innerHTML.split(/<br.*?>/).map(function(n){return n.trim()}).join(`
`),e.innerText||e.textContent||""}function pr(t,e,n){for(var r=0,i=[t,e,n];r<i.length;r++){var a=i[r];a&&typeof a!="object"&&console.error("The options parameter should be of type object, is: "+typeof a),a.startY&&typeof a.startY!="number"&&(console.error("Invalid value for startY option",a.startY),delete a.startY)}}function Y(t,e,n,r,i){if(t==null)throw new TypeError("Cannot convert undefined or null to object");for(var a=Object(t),o=1;o<arguments.length;o++){var s=arguments[o];if(s!=null)for(var c in s)Object.prototype.hasOwnProperty.call(s,c)&&(a[c]=s[c])}return a}function fr(t,e){var n=new ie(t),r=n.getDocumentOptions(),i=n.getGlobalOptions();pr(i,r,e);var a=Y({},i,r,e),o;typeof window<"u"&&(o=window);var s=hr(i,r,e),c=gr(i,r,e),l=vr(n,a),d=wr(n,a,o);return{id:e.tableId,content:d,hooks:c,styles:s,settings:l}}function hr(t,e,n){for(var r={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},i=function(c){if(c==="columnStyles"){var l=t[c],d=e[c],p=n[c];r.columnStyles=Y({},l,d,p)}else{var g=[t,e,n],v=g.map(function(y){return y[c]||{}});r[c]=Y({},v[0],v[1],v[2])}},a=0,o=Object.keys(r);a<o.length;a++){var s=o[a];i(s)}return r}function gr(t,e,n){for(var r=[t,e,n],i={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},a=0,o=r;a<o.length;a++){var s=o[a];s.didParseCell&&i.didParseCell.push(s.didParseCell),s.willDrawCell&&i.willDrawCell.push(s.willDrawCell),s.didDrawCell&&i.didDrawCell.push(s.didDrawCell),s.willDrawPage&&i.willDrawPage.push(s.willDrawPage),s.didDrawPage&&i.didDrawPage.push(s.didDrawPage)}return i}function vr(t,e){var n,r,i,a,o,s,c,l,d,p,g,v,y=ke(e.margin,40/t.scaleFactor()),D=(n=yr(t,e.startY))!==null&&n!==void 0?n:y.top,x;e.showFoot===!0?x="everyPage":e.showFoot===!1?x="never":x=(r=e.showFoot)!==null&&r!==void 0?r:"everyPage";var O;e.showHead===!0?O="everyPage":e.showHead===!1?O="never":O=(i=e.showHead)!==null&&i!==void 0?i:"everyPage";var q=(a=e.useCss)!==null&&a!==void 0?a:!1,z=e.theme||(q?"plain":"striped"),ne=!!e.horizontalPageBreak,er=(o=e.horizontalPageBreakRepeat)!==null&&o!==void 0?o:null;return{includeHiddenHtml:(s=e.includeHiddenHtml)!==null&&s!==void 0?s:!1,useCss:q,theme:z,startY:D,margin:y,pageBreak:(c=e.pageBreak)!==null&&c!==void 0?c:"auto",rowPageBreak:(l=e.rowPageBreak)!==null&&l!==void 0?l:"auto",tableWidth:(d=e.tableWidth)!==null&&d!==void 0?d:"auto",showHead:O,showFoot:x,tableLineWidth:(p=e.tableLineWidth)!==null&&p!==void 0?p:0,tableLineColor:(g=e.tableLineColor)!==null&&g!==void 0?g:200,horizontalPageBreak:ne,horizontalPageBreakRepeat:er,horizontalPageBreakBehaviour:(v=e.horizontalPageBreakBehaviour)!==null&&v!==void 0?v:"afterAllRows"}}function yr(t,e){var n=t.getLastAutoTable(),r=t.scaleFactor(),i=t.pageNumber(),a=!1;if(n&&n.startPageNumber){var o=n.startPageNumber+n.pageNumber-1;a=o===i}return typeof e=="number"?e:(e==null||e===!1)&&a&&n?.finalY!=null?n.finalY+20/r:null}function wr(t,e,n){var r=e.head||[],i=e.body||[],a=e.foot||[];if(e.html){var o=e.includeHiddenHtml;if(n){var s=yn(t,e.html,n,o,e.useCss)||{};r=s.head||r,i=s.body||r,a=s.foot||r}else console.error("Cannot parse html in non browser environment")}var c=e.columns||_r(r,i,a);return{columns:c,head:r,body:i,foot:a}}function _r(t,e,n){var r=t[0]||e[0]||n[0]||[],i=[];return Object.keys(r).filter(function(a){return a!=="_element"}).forEach(function(a){var o=1,s;Array.isArray(r)?s=r[parseInt(a)]:s=r[a],typeof s=="object"&&!Array.isArray(s)&&(o=s?.colSpan||1);for(var c=0;c<o;c++){var l=void 0;Array.isArray(r)?l=i.length:l=a+(c>0?"_".concat(c):"");var d={dataKey:l};i.push(d)}}),i}var Ne=function(){function t(e,n,r){this.table=n,this.pageNumber=n.pageNumber,this.settings=n.settings,this.cursor=r,this.doc=e.getDocument()}return t}(),br=function(t){un(e,t);function e(n,r,i,a,o,s){var c=t.call(this,n,r,s)||this;return c.cell=i,c.row=a,c.column=o,c.section=a.section,c}return e}(Ne),xr=function(){function t(e,n){this.pageNumber=1,this.id=e.id,this.settings=e.settings,this.styles=e.styles,this.hooks=e.hooks,this.columns=n.columns,this.head=n.head,this.body=n.body,this.foot=n.foot}return t.prototype.getHeadHeight=function(e){return this.head.reduce(function(n,r){return n+r.getMaxCellHeight(e)},0)},t.prototype.getFootHeight=function(e){return this.foot.reduce(function(n,r){return n+r.getMaxCellHeight(e)},0)},t.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},t.prototype.callCellHooks=function(e,n,r,i,a,o){for(var s=0,c=n;s<c.length;s++){var l=c[s],d=new br(e,this,r,i,a,o),p=l(d)===!1;if(r.text=Array.isArray(r.text)?r.text:[r.text],p)return!1}return!0},t.prototype.callEndPageHooks=function(e,n){e.applyStyles(e.userStyles);for(var r=0,i=this.hooks.didDrawPage;r<i.length;r++){var a=i[r];a(new Ne(e,this,n))}},t.prototype.callWillDrawPageHooks=function(e,n){for(var r=0,i=this.hooks.willDrawPage;r<i.length;r++){var a=i[r];a(new Ne(e,this,n))}},t.prototype.getWidth=function(e){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var n=this.columns.reduce(function(i,a){return i+a.wrappedWidth},0);return n}else{var r=this.settings.margin;return e-r.left-r.right}},t}(),wn=function(){function t(e,n,r,i,a){a===void 0&&(a=!1),this.height=0,this.raw=e,e instanceof pn&&(this.raw=e._element,this.element=e._element),this.index=n,this.section=r,this.cells=i,this.spansMultiplePages=a}return t.prototype.getMaxCellHeight=function(e){var n=this;return e.reduce(function(r,i){var a;return Math.max(r,((a=n.cells[i.index])===null||a===void 0?void 0:a.height)||0)},0)},t.prototype.hasRowSpan=function(e){var n=this;return e.filter(function(r){var i=n.cells[r.index];return i?i.rowSpan>1:!1}).length>0},t.prototype.canEntireRowFit=function(e,n){return this.getMaxCellHeight(n)<=e},t.prototype.getMinimumRowHeight=function(e,n){var r=this;return e.reduce(function(i,a){var o=r.cells[a.index];if(!o)return 0;var s=n.getLineHeight(o.styles.fontSize),c=o.padding("vertical"),l=c+s;return l>i?l:i},0)},t}(),_n=function(){function t(e,n,r){var i;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=n,this.section=r,this.raw=e;var a=e;e!=null&&typeof e=="object"&&!Array.isArray(e)?(this.rowSpan=e.rowSpan||1,this.colSpan=e.colSpan||1,a=(i=e.content)!==null&&i!==void 0?i:e,e._element&&(this.raw=e._element)):(this.rowSpan=1,this.colSpan=1);var o=a!=null?""+a:"",s=/\r\n|\r|\n/g;this.text=o.split(s)}return t.prototype.getTextPos=function(){var e;if(this.styles.valign==="top")e=this.y+this.padding("top");else if(this.styles.valign==="bottom")e=this.y+this.height-this.padding("bottom");else{var n=this.height-this.padding("vertical");e=this.y+n/2+this.padding("top")}var r;if(this.styles.halign==="right")r=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var i=this.width-this.padding("horizontal");r=this.x+i/2+this.padding("left")}else r=this.x+this.padding("left");return{x:r,y:e}},t.prototype.getContentHeight=function(e,n){n===void 0&&(n=1.15);var r=Array.isArray(this.text)?this.text.length:1,i=this.styles.fontSize/e*n,a=r*i+this.padding("vertical");return Math.max(a,this.styles.minCellHeight)},t.prototype.padding=function(e){var n=ke(this.styles.cellPadding,0);return e==="vertical"?n.top+n.bottom:e==="horizontal"?n.left+n.right:n[e]},t}(),Sr=function(){function t(e,n,r){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=e,this.raw=n,this.index=r}return t.prototype.getMaxCustomCellWidth=function(e){for(var n=0,r=0,i=e.allRows();r<i.length;r++){var a=i[r],o=a.cells[this.index];o&&typeof o.styles.cellWidth=="number"&&(n=Math.max(n,o.styles.cellWidth))}return n},t}();function Cr(t,e){Pr(t,e);var n=[],r=0;e.columns.forEach(function(a){var o=a.getMaxCustomCellWidth(e);o?a.width=o:(a.width=a.wrappedWidth,n.push(a)),r+=a.width});var i=e.getWidth(t.pageSize().width)-r;i&&(i=qe(n,i,function(a){return Math.max(a.minReadableWidth,a.minWidth)})),i&&(i=qe(n,i,function(a){return a.minWidth})),i=Math.abs(i),!e.settings.horizontalPageBreak&&i>.1/t.scaleFactor()&&(i=i<1?i:Math.round(i),console.warn("Of the table content, ".concat(i," units width could not fit page"))),Dr(e),kr(e,t),Mr(e)}function Pr(t,e){var n=t.scaleFactor(),r=e.settings.horizontalPageBreak,i=gn(t,e);e.allRows().forEach(function(a){for(var o=0,s=e.columns;o<s.length;o++){var c=s[o],l=a.cells[c.index];if(l){var d=e.hooks.didParseCell;e.callCellHooks(t,d,l,a,c,null);var p=l.padding("horizontal");l.contentWidth=Me(l.text,l.styles,t)+p;var g=Me(l.text.join(" ").split(/[^\S\u00A0]+/),l.styles,t);if(l.minReadableWidth=g+l.padding("horizontal"),typeof l.styles.cellWidth=="number")l.minWidth=l.styles.cellWidth,l.wrappedWidth=l.styles.cellWidth;else if(l.styles.cellWidth==="wrap"||r===!0)l.contentWidth>i?(l.minWidth=i,l.wrappedWidth=i):(l.minWidth=l.contentWidth,l.wrappedWidth=l.contentWidth);else{var v=10/n;l.minWidth=l.styles.minCellWidth||v,l.wrappedWidth=l.contentWidth,l.minWidth>l.wrappedWidth&&(l.wrappedWidth=l.minWidth)}}}}),e.allRows().forEach(function(a){for(var o=0,s=e.columns;o<s.length;o++){var c=s[o],l=a.cells[c.index];if(l&&l.colSpan===1)c.wrappedWidth=Math.max(c.wrappedWidth,l.wrappedWidth),c.minWidth=Math.max(c.minWidth,l.minWidth),c.minReadableWidth=Math.max(c.minReadableWidth,l.minReadableWidth);else{var d=e.styles.columnStyles[c.dataKey]||e.styles.columnStyles[c.index]||{},p=d.cellWidth||d.minCellWidth;p&&typeof p=="number"&&(c.minWidth=p,c.wrappedWidth=p)}l&&(l.colSpan>1&&!c.minWidth&&(c.minWidth=l.minWidth),l.colSpan>1&&!c.wrappedWidth&&(c.wrappedWidth=l.minWidth))}})}function qe(t,e,n){for(var r=e,i=t.reduce(function(v,y){return v+y.wrappedWidth},0),a=0;a<t.length;a++){var o=t[a],s=o.wrappedWidth/i,c=r*s,l=o.width+c,d=n(o),p=l<d?d:l;e-=p-o.width,o.width=p}if(e=Math.round(e*1e10)/1e10,e){var g=t.filter(function(v){return e<0?v.width>n(v):!0});g.length&&(e=qe(g,e,n))}return e}function Mr(t){for(var e={},n=1,r=t.allRows(),i=0;i<r.length;i++)for(var a=r[i],o=0,s=t.columns;o<s.length;o++){var c=s[o],l=e[c.index];if(n>1)n--,delete a.cells[c.index];else if(l)l.cell.height+=a.height,n=l.cell.colSpan,delete a.cells[c.index],l.left--,l.left<=1&&delete e[c.index];else{var d=a.cells[c.index];if(!d)continue;if(d.height=a.height,d.rowSpan>1){var p=r.length-i,g=d.rowSpan>p?p:d.rowSpan;e[c.index]={cell:d,left:g,row:a}}}}}function Dr(t){for(var e=t.allRows(),n=0;n<e.length;n++)for(var r=e[n],i=null,a=0,o=0,s=0;s<t.columns.length;s++){var c=t.columns[s];if(o-=1,o>1&&t.columns[s+1])a+=c.width,delete r.cells[c.index];else if(i){var l=i;delete r.cells[c.index],i=null,l.width=c.width+a}else{var l=r.cells[c.index];if(!l)continue;if(o=l.colSpan,a=0,l.colSpan>1){i=l,a+=c.width;continue}l.width=c.width+a}}}function kr(t,e){for(var n={count:0,height:0},r=0,i=t.allRows();r<i.length;r++){for(var a=i[r],o=0,s=t.columns;o<s.length;o++){var c=s[o],l=a.cells[c.index];if(l){e.applyStyles(l.styles,!0);var d=l.width-l.padding("horizontal");if(l.styles.overflow==="linebreak")l.text=e.splitTextToSize(l.text,d+1/e.scaleFactor(),{fontSize:l.styles.fontSize});else if(l.styles.overflow==="ellipsize")l.text=sn(l.text,d,l.styles,e,"...");else if(l.styles.overflow==="hidden")l.text=sn(l.text,d,l.styles,e,"");else if(typeof l.styles.overflow=="function"){var p=l.styles.overflow(l.text,d);typeof p=="string"?l.text=[p]:l.text=p}l.contentHeight=l.getContentHeight(e.scaleFactor(),e.getLineHeightFactor());var g=l.contentHeight/l.rowSpan;l.rowSpan>1&&n.count*n.height<g*l.rowSpan?n={height:g,count:l.rowSpan}:n&&n.count>0&&n.height>g&&(g=n.height),g>a.height&&(a.height=g)}}n.count--}}function sn(t,e,n,r,i){return t.map(function(a){return Or(a,e,n,r,i)})}function Or(t,e,n,r,i){var a=1e4*r.scaleFactor();if(e=Math.ceil(e*a)/a,e>=Me(t,n,r))return t;for(;e<Me(t+i,n,r)&&!(t.length<=1);)t=t.substring(0,t.length-1);return t.trim()+i}function Rr(t,e){var n=new ie(t),r=Er(e,n.scaleFactor()),i=new xr(e,r);return Cr(n,i),n.applyStyles(n.userStyles),i}function Er(t,e){var n=t.content,r=Fr(n.columns);if(n.head.length===0){var i=ln(r,"head");i&&n.head.push(i)}if(n.foot.length===0){var i=ln(r,"foot");i&&n.foot.push(i)}var a=t.settings.theme,o=t.styles;return{columns:r,head:Ae("head",n.head,r,o,a,e),body:Ae("body",n.body,r,o,a,e),foot:Ae("foot",n.foot,r,o,a,e)}}function Ae(t,e,n,r,i,a){var o={},s=e.map(function(c,l){for(var d=0,p={},g=0,v=0,y=0,D=n;y<D.length;y++){var x=D[y];if(o[x.index]==null||o[x.index].left===0)if(v===0){var O=void 0;Array.isArray(c)?O=c[x.index-g-d]:O=c[x.dataKey];var q={};typeof O=="object"&&!Array.isArray(O)&&(q=O?.styles||{});var z=Wr(t,x,l,i,r,a,q),ne=new _n(O,z,t);p[x.dataKey]=ne,p[x.index]=ne,v=ne.colSpan-1,o[x.index]={left:ne.rowSpan-1,times:v}}else v--,g++;else o[x.index].left--,v=o[x.index].times,d++}return new wn(c,l,t,p)});return s}function ln(t,e){var n={};return t.forEach(function(r){if(r.raw!=null){var i=Tr(e,r.raw);i!=null&&(n[r.dataKey]=i)}}),Object.keys(n).length>0?n:null}function Tr(t,e){if(t==="head"){if(typeof e=="object")return e.header||null;if(typeof e=="string"||typeof e=="number")return e}else if(t==="foot"&&typeof e=="object")return e.footer;return null}function Fr(t){return t.map(function(e,n){var r,i;return typeof e=="object"?i=(r=e.dataKey)!==null&&r!==void 0?r:n:i=n,new Sr(i,e,n)})}function Wr(t,e,n,r,i,a,o){var s=sr(r),c;t==="head"?c=i.headStyles:t==="body"?c=i.bodyStyles:t==="foot"&&(c=i.footStyles);var l=Y({},s.table,s[t],i.styles,c),d=i.columnStyles[e.dataKey]||i.columnStyles[e.index]||{},p=t==="body"?d:{},g=t==="body"&&n%2===0?Y({},s.alternateRow,i.alternateRowStyles):{},v=or(a),y=Y({},v,l,g,p);return Y(y,o)}function Ir(t,e,n){var r;n===void 0&&(n={});var i=gn(t,e),a=new Map,o=[],s=[],c=[];Array.isArray(e.settings.horizontalPageBreakRepeat)?c=e.settings.horizontalPageBreakRepeat:(typeof e.settings.horizontalPageBreakRepeat=="string"||typeof e.settings.horizontalPageBreakRepeat=="number")&&(c=[e.settings.horizontalPageBreakRepeat]),c.forEach(function(g){var v=e.columns.find(function(y){return y.dataKey===g||y.index===g});v&&!a.has(v.index)&&(a.set(v.index,!0),o.push(v.index),s.push(e.columns[v.index]),i-=v.wrappedWidth)});for(var l=!0,d=(r=n?.start)!==null&&r!==void 0?r:0;d<e.columns.length;){if(a.has(d)){d++;continue}var p=e.columns[d].wrappedWidth;if(l||i>=p)l=!1,o.push(d),s.push(e.columns[d]),i-=p;else break;d++}return{colIndexes:o,columns:s,lastIndex:d-1}}function Hr(t,e){for(var n=[],r=0;r<e.columns.length;r++){var i=Ir(t,e,{start:r});i.columns.length&&(n.push(i),r=i.lastIndex)}return n}function Ar(t,e){var n=e.settings,r=n.startY,i=n.margin,a={x:i.left,y:r},o=e.getHeadHeight(e.columns)+e.getFootHeight(e.columns),s=r+i.bottom+o;if(n.pageBreak==="avoid"){var c=e.body,l=c.reduce(function(g,v){return g+v.height},0);s+=l}var d=new ie(t);(n.pageBreak==="always"||n.startY!=null&&s>d.pageSize().height)&&(xn(d),a.y=i.top),e.callWillDrawPageHooks(d,a);var p=Y({},a);e.startPageNumber=d.pageNumber(),n.horizontalPageBreak?jr(d,e,p,a):(d.applyStyles(d.userStyles),(n.showHead==="firstPage"||n.showHead==="everyPage")&&e.head.forEach(function(g){return L(d,e,g,a,e.columns)}),d.applyStyles(d.userStyles),e.body.forEach(function(g,v){var y=v===e.body.length-1;De(d,e,g,y,p,a,e.columns)}),d.applyStyles(d.userStyles),(n.showFoot==="lastPage"||n.showFoot==="everyPage")&&e.foot.forEach(function(g){return L(d,e,g,a,e.columns)})),fn(d,e,p,a),e.callEndPageHooks(d,a),e.finalY=a.y,t.lastAutoTable=e,d.applyStyles(d.userStyles)}function jr(t,e,n,r){var i=Hr(t,e),a=e.settings;if(a.horizontalPageBreakBehaviour==="afterAllRows")i.forEach(function(l,d){t.applyStyles(t.userStyles),d>0?le(t,e,n,r,l.columns,!0):dn(t,e,r,l.columns),zr(t,e,n,r,l.columns),je(t,e,r,l.columns)});else for(var o=-1,s=i[0],c=function(){var l=o;if(s){t.applyStyles(t.userStyles);var d=s.columns;o>=0?le(t,e,n,r,d,!0):dn(t,e,r,d),l=cn(t,e,o+1,r,d),je(t,e,r,d)}var p=l-o;i.slice(1).forEach(function(g){t.applyStyles(t.userStyles),le(t,e,n,r,g.columns,!0),cn(t,e,o+1,r,g.columns,p),je(t,e,r,g.columns)}),o=l};o<e.body.length-1;)c()}function dn(t,e,n,r){var i=e.settings;t.applyStyles(t.userStyles),(i.showHead==="firstPage"||i.showHead==="everyPage")&&e.head.forEach(function(a){return L(t,e,a,n,r)})}function zr(t,e,n,r,i){t.applyStyles(t.userStyles),e.body.forEach(function(a,o){var s=o===e.body.length-1;De(t,e,a,s,n,r,i)})}function cn(t,e,n,r,i,a){t.applyStyles(t.userStyles),a=a??e.body.length;var o=Math.min(n+a,e.body.length),s=-1;return e.body.slice(n,o).forEach(function(c,l){var d=n+l===e.body.length-1,p=bn(t,e,d,r);c.canEntireRowFit(p,i)&&(L(t,e,c,r,i),s=n+l)}),s}function je(t,e,n,r){var i=e.settings;t.applyStyles(t.userStyles),(i.showFoot==="lastPage"||i.showFoot==="everyPage")&&e.foot.forEach(function(a){return L(t,e,a,n,r)})}function Yr(t,e,n){var r=n.getLineHeight(t.styles.fontSize),i=t.padding("vertical"),a=Math.floor((e-i)/r);return Math.max(0,a)}function Lr(t,e,n,r){var i={};t.spansMultiplePages=!0,t.height=0;for(var a=0,o=0,s=n.columns;o<s.length;o++){var c=s[o],l=t.cells[c.index];if(l){Array.isArray(l.text)||(l.text=[l.text]);var d=new _n(l.raw,l.styles,l.section);d=Y(d,l),d.text=[];var p=Yr(l,e,r);l.text.length>p&&(d.text=l.text.splice(p,l.text.length));var g=r.scaleFactor(),v=r.getLineHeightFactor();l.contentHeight=l.getContentHeight(g,v),l.contentHeight>=e&&(l.contentHeight=e,d.styles.minCellHeight-=e),l.contentHeight>t.height&&(t.height=l.contentHeight),d.contentHeight=d.getContentHeight(g,v),d.contentHeight>a&&(a=d.contentHeight),i[c.index]=d}}var y=new wn(t.raw,-1,t.section,i,!0);y.height=a;for(var D=0,x=n.columns;D<x.length;D++){var c=x[D],d=y.cells[c.index];d&&(d.height=y.height);var l=t.cells[c.index];l&&(l.height=t.height)}return y}function Br(t,e,n,r){var i=t.pageSize().height,a=r.settings.margin,o=a.top+a.bottom,s=i-o;e.section==="body"&&(s-=r.getHeadHeight(r.columns)+r.getFootHeight(r.columns));var c=e.getMinimumRowHeight(r.columns,t),l=c<n;if(c>s)return console.error("Will not be able to print row ".concat(e.index," correctly since it's minimum height is larger than page height")),!0;if(!l)return!1;var d=e.hasRowSpan(r.columns),p=e.getMaxCellHeight(r.columns)>s;return p?(d&&console.error("The content of row ".concat(e.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(d||r.settings.rowPageBreak==="avoid")}function De(t,e,n,r,i,a,o){var s=bn(t,e,r,a);if(n.canEntireRowFit(s,o))L(t,e,n,a,o);else if(Br(t,n,s,e)){var c=Lr(n,s,e,t);L(t,e,n,a,o),le(t,e,i,a,o),De(t,e,c,r,i,a,o)}else le(t,e,i,a,o),De(t,e,n,r,i,a,o)}function L(t,e,n,r,i){r.x=e.settings.margin.left;for(var a=0,o=i;a<o.length;a++){var s=o[a],c=n.cells[s.index];if(!c){r.x+=s.width;continue}t.applyStyles(c.styles),c.x=r.x,c.y=r.y;var l=e.callCellHooks(t,e.hooks.willDrawCell,c,n,s,r);if(l===!1){r.x+=s.width;continue}Nr(t,c,r);var d=c.getTextPos();mn(c.text,d.x,d.y,{halign:c.styles.halign,valign:c.styles.valign,maxWidth:Math.ceil(c.width-c.padding("left")-c.padding("right"))},t.getDocument()),e.callCellHooks(t,e.hooks.didDrawCell,c,n,s,r),r.x+=s.width}r.y+=n.height}function Nr(t,e,n){var r=e.styles;if(t.getDocument().setFillColor(t.getDocument().getFillColor()),typeof r.lineWidth=="number"){var i=hn(r.lineWidth,r.fillColor);i&&t.rect(e.x,n.y,e.width,e.height,i)}else typeof r.lineWidth=="object"&&(r.fillColor&&t.rect(e.x,n.y,e.width,e.height,"F"),qr(t,e,n,r.lineWidth))}function qr(t,e,n,r){var i,a,o,s;r.top&&(i=n.x,a=n.y,o=n.x+e.width,s=n.y,r.right&&(o+=.5*r.right),r.left&&(i-=.5*r.left),c(r.top,i,a,o,s)),r.bottom&&(i=n.x,a=n.y+e.height,o=n.x+e.width,s=n.y+e.height,r.right&&(o+=.5*r.right),r.left&&(i-=.5*r.left),c(r.bottom,i,a,o,s)),r.left&&(i=n.x,a=n.y,o=n.x,s=n.y+e.height,r.top&&(a-=.5*r.top),r.bottom&&(s+=.5*r.bottom),c(r.left,i,a,o,s)),r.right&&(i=n.x+e.width,a=n.y,o=n.x+e.width,s=n.y+e.height,r.top&&(a-=.5*r.top),r.bottom&&(s+=.5*r.bottom),c(r.right,i,a,o,s));function c(l,d,p,g,v){t.getDocument().setLineWidth(l),t.getDocument().line(d,p,g,v,"S")}}function bn(t,e,n,r){var i=e.settings.margin.bottom,a=e.settings.showFoot;return(a==="everyPage"||a==="lastPage"&&n)&&(i+=e.getFootHeight(e.columns)),t.pageSize().height-r.y-i}function le(t,e,n,r,i,a){i===void 0&&(i=[]),a===void 0&&(a=!1),t.applyStyles(t.userStyles),e.settings.showFoot==="everyPage"&&!a&&e.foot.forEach(function(s){return L(t,e,s,r,i)}),e.callEndPageHooks(t,r);var o=e.settings.margin;fn(t,e,n,r),xn(t),e.pageNumber++,r.x=o.left,r.y=o.top,n.y=o.top,e.callWillDrawPageHooks(t,r),e.settings.showHead==="everyPage"&&(e.head.forEach(function(s){return L(t,e,s,r,i)}),t.applyStyles(t.userStyles))}function xn(t){var e=t.pageNumber();t.setPage(e+1);var n=t.pageNumber();return n===e?(t.addPage(),!0):!1}function Vr(t){t.API.autoTable=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e[0],i=fr(this,r),a=Rr(this,i);return Ar(this,a),this},t.API.lastAutoTable=!1,t.API.autoTableText=function(e,n,r,i){mn(e,n,r,i,this)},t.API.autoTableSetDefaults=function(e){return ie.setDefaults(e,this),this},t.autoTableSetDefaults=function(e,n){ie.setDefaults(e,n)},t.API.autoTableHtmlToJson=function(e,n){var r;if(n===void 0&&(n=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var i=new ie(this),a=yn(i,e,window,n,!1),o=a.head,s=a.body,c=((r=o[0])===null||r===void 0?void 0:r.map(function(l){return l.content}))||[];return{columns:c,rows:s,data:s}}}var ze;try{typeof window<"u"&&window&&(Ye=window,Le=Ye.jsPDF||((ze=Ye.jspdf)===null||ze===void 0?void 0:ze.jsPDF),Le&&Vr(Le))}catch(t){console.error("Could not apply autoTable plugin",t)}var Ye,Le;var $r=Math.pow(10,8)*24*60*60*1e3,Ro=-$r,Oe=6048e5,Sn=864e5;var Qr=3600;var Cn=Qr*24,Eo=Cn*7,Kr=Cn*365.2425,Gr=Kr/12,To=Gr*3,Ve=Symbol.for("constructDateFrom");function W(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&Ve in t?t[Ve](e):t instanceof Date?new t.constructor(e):new Date(e)}function S(t,e){return W(e||t,t)}var Xr={};function V(){return Xr}function B(t,e){let n=V(),r=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,i=S(t,e?.in),a=i.getDay(),o=(a<r?7:0)+a-r;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}function Z(t,e){return B(t,Ue(Je({},e),{weekStartsOn:1}))}function Re(t,e){let n=S(t,e?.in),r=n.getFullYear(),i=W(n,0);i.setFullYear(r+1,0,4),i.setHours(0,0,0,0);let a=Z(i),o=W(n,0);o.setFullYear(r,0,4),o.setHours(0,0,0,0);let s=Z(o);return n.getTime()>=a.getTime()?r+1:n.getTime()>=s.getTime()?r:r-1}function $e(t){let e=S(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function Pn(t,...e){let n=W.bind(null,t||e.find(r=>typeof r=="object"));return e.map(n)}function Qe(t,e){let n=S(t,e?.in);return n.setHours(0,0,0,0),n}function Mn(t,e,n){let[r,i]=Pn(n?.in,t,e),a=Qe(r),o=Qe(i),s=+a-$e(a),c=+o-$e(o);return Math.round((s-c)/Sn)}function Dn(t,e){let n=Re(t,e),r=W(e?.in||t,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),Z(r)}function kn(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function On(t){return!(!kn(t)&&typeof t!="number"||isNaN(+S(t)))}function Rn(t,e){let n=S(t,e?.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}var Jr={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},En=(t,e,n)=>{let r,i=Jr[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),n?.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function $(t){return(e={})=>{let n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}var Ur={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Zr={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},ei={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Tn={date:$({formats:Ur,defaultWidth:"full"}),time:$({formats:Zr,defaultWidth:"full"}),dateTime:$({formats:ei,defaultWidth:"full"})};var ti={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Fn=(t,e,n,r)=>ti[t];function I(t){return(e,n)=>{let r=n?.context?String(n.context):"standalone",i;if(r==="formatting"&&t.formattingValues){let o=t.defaultFormattingWidth||t.defaultWidth,s=n?.width?String(n.width):o;i=t.formattingValues[s]||t.formattingValues[o]}else{let o=t.defaultWidth,s=n?.width?String(n.width):t.defaultWidth;i=t.values[s]||t.values[o]}let a=t.argumentCallback?t.argumentCallback(e):e;return i[a]}}var ni={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},ri={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},ii={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},ai={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},oi={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},si={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},li=(t,e)=>{let n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},Wn={ordinalNumber:li,era:I({values:ni,defaultWidth:"wide"}),quarter:I({values:ri,defaultWidth:"wide",argumentCallback:t=>t-1}),month:I({values:ii,defaultWidth:"wide"}),day:I({values:ai,defaultWidth:"wide"}),dayPeriod:I({values:oi,defaultWidth:"wide",formattingValues:si,defaultFormattingWidth:"wide"})};function H(t){return(e,n={})=>{let r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],a=e.match(i);if(!a)return null;let o=a[0],s=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(s)?ci(s,p=>p.test(o)):di(s,p=>p.test(o)),l;l=t.valueCallback?t.valueCallback(c):c,l=n.valueCallback?n.valueCallback(l):l;let d=e.slice(o.length);return{value:l,rest:d}}}function di(t,e){for(let n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function ci(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function Ee(t){return(e,n={})=>{let r=e.match(t.matchPattern);if(!r)return null;let i=r[0],a=e.match(t.parsePattern);if(!a)return null;let o=t.valueCallback?t.valueCallback(a[0]):a[0];o=n.valueCallback?n.valueCallback(o):o;let s=e.slice(i.length);return{value:o,rest:s}}}var mi=/^(\d+)(th|st|nd|rd)?/i,ui=/\d+/i,pi={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},fi={any:[/^b/i,/^(a|c)/i]},hi={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},gi={any:[/1/i,/2/i,/3/i,/4/i]},vi={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},yi={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},wi={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},_i={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},bi={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},xi={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},In={ordinalNumber:Ee({matchPattern:mi,parsePattern:ui,valueCallback:t=>parseInt(t,10)}),era:H({matchPatterns:pi,defaultMatchWidth:"wide",parsePatterns:fi,defaultParseWidth:"any"}),quarter:H({matchPatterns:hi,defaultMatchWidth:"wide",parsePatterns:gi,defaultParseWidth:"any",valueCallback:t=>t+1}),month:H({matchPatterns:vi,defaultMatchWidth:"wide",parsePatterns:yi,defaultParseWidth:"any"}),day:H({matchPatterns:wi,defaultMatchWidth:"wide",parsePatterns:_i,defaultParseWidth:"any"}),dayPeriod:H({matchPatterns:bi,defaultMatchWidth:"any",parsePatterns:xi,defaultParseWidth:"any"})};var Ke={code:"en-US",formatDistance:En,formatLong:Tn,formatRelative:Fn,localize:Wn,match:In,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Hn(t,e){let n=S(t,e?.in);return Mn(n,Rn(n))+1}function An(t,e){let n=S(t,e?.in),r=+Z(n)-+Dn(n);return Math.round(r/Oe)+1}function Te(t,e){let n=S(t,e?.in),r=n.getFullYear(),i=V(),a=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,o=W(e?.in||t,0);o.setFullYear(r+1,0,a),o.setHours(0,0,0,0);let s=B(o,e),c=W(e?.in||t,0);c.setFullYear(r,0,a),c.setHours(0,0,0,0);let l=B(c,e);return+n>=+s?r+1:+n>=+l?r:r-1}function jn(t,e){let n=V(),r=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,i=Te(t,e),a=W(e?.in||t,0);return a.setFullYear(i,0,r),a.setHours(0,0,0,0),B(a,e)}function zn(t,e){let n=S(t,e?.in),r=+B(n,e)-+jn(n,e);return Math.round(r/Oe)+1}function b(t,e){let n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}var N={y(t,e){let n=t.getFullYear(),r=n>0?n:1-n;return b(e==="yy"?r%100:r,e.length)},M(t,e){let n=t.getMonth();return e==="M"?String(n+1):b(n+1,2)},d(t,e){return b(t.getDate(),e.length)},a(t,e){let n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return b(t.getHours()%12||12,e.length)},H(t,e){return b(t.getHours(),e.length)},m(t,e){return b(t.getMinutes(),e.length)},s(t,e){return b(t.getSeconds(),e.length)},S(t,e){let n=e.length,r=t.getMilliseconds(),i=Math.trunc(r*Math.pow(10,n-3));return b(i,e.length)}};var ae={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Ge={G:function(t,e,n){let r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){let r=t.getFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return N.y(t,e)},Y:function(t,e,n,r){let i=Te(t,r),a=i>0?i:1-i;if(e==="YY"){let o=a%100;return b(o,2)}return e==="Yo"?n.ordinalNumber(a,{unit:"year"}):b(a,e.length)},R:function(t,e){let n=Re(t);return b(n,e.length)},u:function(t,e){let n=t.getFullYear();return b(n,e.length)},Q:function(t,e,n){let r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return b(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){let r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return b(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){let r=t.getMonth();switch(e){case"M":case"MM":return N.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){let r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return b(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){let i=zn(t,r);return e==="wo"?n.ordinalNumber(i,{unit:"week"}):b(i,e.length)},I:function(t,e,n){let r=An(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):b(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):N.d(t,e)},D:function(t,e,n){let r=Hn(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):b(r,e.length)},E:function(t,e,n){let r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){let i=t.getDay(),a=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(a);case"ee":return b(a,2);case"eo":return n.ordinalNumber(a,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){let i=t.getDay(),a=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(a);case"cc":return b(a,e.length);case"co":return n.ordinalNumber(a,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n){let r=t.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return b(i,e.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){let i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,n){let r=t.getHours(),i;switch(r===12?i=ae.noon:r===0?i=ae.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,n){let r=t.getHours(),i;switch(r>=17?i=ae.evening:r>=12?i=ae.afternoon:r>=4?i=ae.morning:i=ae.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return N.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):N.H(t,e)},K:function(t,e,n){let r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):b(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):b(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):N.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):N.s(t,e)},S:function(t,e){return N.S(t,e)},X:function(t,e,n){let r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return Ln(r);case"XXXX":case"XX":return ee(r);case"XXXXX":case"XXX":default:return ee(r,":")}},x:function(t,e,n){let r=t.getTimezoneOffset();switch(e){case"x":return Ln(r);case"xxxx":case"xx":return ee(r);case"xxxxx":case"xxx":default:return ee(r,":")}},O:function(t,e,n){let r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+Yn(r,":");case"OOOO":default:return"GMT"+ee(r,":")}},z:function(t,e,n){let r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+Yn(r,":");case"zzzz":default:return"GMT"+ee(r,":")}},t:function(t,e,n){let r=Math.trunc(+t/1e3);return b(r,e.length)},T:function(t,e,n){return b(+t,e.length)}};function Yn(t,e=""){let n=t>0?"-":"+",r=Math.abs(t),i=Math.trunc(r/60),a=r%60;return a===0?n+String(i):n+String(i)+e+b(a,2)}function Ln(t,e){return t%60===0?(t>0?"-":"+")+b(Math.abs(t)/60,2):ee(t,e)}function ee(t,e=""){let n=t>0?"-":"+",r=Math.abs(t),i=b(Math.trunc(r/60),2),a=b(r%60,2);return n+i+e+a}var Bn=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},Nn=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},Si=(t,e)=>{let n=t.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return Bn(t,e);let a;switch(r){case"P":a=e.dateTime({width:"short"});break;case"PP":a=e.dateTime({width:"medium"});break;case"PPP":a=e.dateTime({width:"long"});break;case"PPPP":default:a=e.dateTime({width:"full"});break}return a.replace("{{date}}",Bn(r,e)).replace("{{time}}",Nn(i,e))},qn={p:Nn,P:Si};var Ci=/^D+$/,Pi=/^Y+$/,Mi=["D","DD","YY","YYYY"];function Vn(t){return Ci.test(t)}function $n(t){return Pi.test(t)}function Qn(t,e,n){let r=Di(t,e,n);if(console.warn(r),Mi.includes(t))throw new RangeError(r)}function Di(t,e,n){let r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}var ki=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Oi=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Ri=/^'([^]*?)'?$/,Ei=/''/g,Ti=/[a-zA-Z]/;function te(t,e,n){let r=V(),i=n?.locale??r.locale??Ke,a=n?.firstWeekContainsDate??n?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,o=n?.weekStartsOn??n?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,s=S(t,n?.in);if(!On(s))throw new RangeError("Invalid time value");let c=e.match(Oi).map(d=>{let p=d[0];if(p==="p"||p==="P"){let g=qn[p];return g(d,i.formatLong)}return d}).join("").match(ki).map(d=>{if(d==="''")return{isToken:!1,value:"'"};let p=d[0];if(p==="'")return{isToken:!1,value:Fi(d)};if(Ge[p])return{isToken:!0,value:d};if(p.match(Ti))throw new RangeError("Format string contains an unescaped latin alphabet character `"+p+"`");return{isToken:!1,value:d}});i.localize.preprocessor&&(c=i.localize.preprocessor(s,c));let l={firstWeekContainsDate:a,weekStartsOn:o,locale:i};return c.map(d=>{if(!d.isToken)return d.value;let p=d.value;(!n?.useAdditionalWeekYearTokens&&$n(p)||!n?.useAdditionalDayOfYearTokens&&Vn(p))&&Qn(p,e,String(t));let g=Ge[p[0]];return g(s,p,i.localize,l)}).join("")}function Fi(t){let e=t.match(Ri);return e?e[1].replace(Ei,"'"):t}var Wi={lessThanXSeconds:{one:"menos de un segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"medio minuto",lessThanXMinutes:{one:"menos de un minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"alrededor de 1 hora",other:"alrededor de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 d\xEDa",other:"{{count}} d\xEDas"},aboutXWeeks:{one:"alrededor de 1 semana",other:"alrededor de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"alrededor de 1 mes",other:"alrededor de {{count}} meses"},xMonths:{one:"1 mes",other:"{{count}} meses"},aboutXYears:{one:"alrededor de 1 a\xF1o",other:"alrededor de {{count}} a\xF1os"},xYears:{one:"1 a\xF1o",other:"{{count}} a\xF1os"},overXYears:{one:"m\xE1s de 1 a\xF1o",other:"m\xE1s de {{count}} a\xF1os"},almostXYears:{one:"casi 1 a\xF1o",other:"casi {{count}} a\xF1os"}},Kn=(t,e,n)=>{let r,i=Wi[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),n?.addSuffix?n.comparison&&n.comparison>0?"en "+r:"hace "+r:r};var Ii={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/y"},Hi={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},Ai={full:"{{date}} 'a las' {{time}}",long:"{{date}} 'a las' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Gn={date:$({formats:Ii,defaultWidth:"full"}),time:$({formats:Hi,defaultWidth:"full"}),dateTime:$({formats:Ai,defaultWidth:"full"})};var ji={lastWeek:"'el' eeee 'pasado a la' p",yesterday:"'ayer a la' p",today:"'hoy a la' p",tomorrow:"'ma\xF1ana a la' p",nextWeek:"eeee 'a la' p",other:"P"},zi={lastWeek:"'el' eeee 'pasado a las' p",yesterday:"'ayer a las' p",today:"'hoy a las' p",tomorrow:"'ma\xF1ana a las' p",nextWeek:"eeee 'a las' p",other:"P"},Xn=(t,e,n,r)=>e.getHours()!==1?zi[t]:ji[t];var Yi={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","despu\xE9s de cristo"]},Li={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1\xBA trimestre","2\xBA trimestre","3\xBA trimestre","4\xBA trimestre"]},Bi={narrow:["e","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],wide:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]},Ni={narrow:["d","l","m","m","j","v","s"],short:["do","lu","ma","mi","ju","vi","s\xE1"],abbreviated:["dom","lun","mar","mi\xE9","jue","vie","s\xE1b"],wide:["domingo","lunes","martes","mi\xE9rcoles","jueves","viernes","s\xE1bado"]},qi={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"ma\xF1ana",afternoon:"tarde",evening:"tarde",night:"noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"ma\xF1ana",afternoon:"tarde",evening:"tarde",night:"noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"ma\xF1ana",afternoon:"tarde",evening:"tarde",night:"noche"}},Vi={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"de la ma\xF1ana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"de la ma\xF1ana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"de la ma\xF1ana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"}},$i=(t,e)=>Number(t)+"\xBA",Jn={ordinalNumber:$i,era:I({values:Yi,defaultWidth:"wide"}),quarter:I({values:Li,defaultWidth:"wide",argumentCallback:t=>Number(t)-1}),month:I({values:Bi,defaultWidth:"wide"}),day:I({values:Ni,defaultWidth:"wide"}),dayPeriod:I({values:qi,defaultWidth:"wide",formattingValues:Vi,defaultFormattingWidth:"wide"})};var Qi=/^(\d+)()?/i,Ki=/\d+/i,Gi={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|a\.?\s?e\.?\s?c\.?|d\.?\s?c\.?|e\.?\s?c\.?)/i,wide:/^(antes de cristo|antes de la era com[u]n|despu[e]s de cristo|era com[u]n)/i},Xi={any:[/^ac/i,/^dc/i],wide:[/^(antes de cristo|antes de la era com[u]n)/i,/^(despu[e]s de cristo|era com[u]n)/i]},Ji={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234]()? trimestre/i},Ui={any:[/1/i,/2/i,/3/i,/4/i]},Zi={narrow:/^[efmajsond]/i,abbreviated:/^(ene|feb|mar|abr|may|jun|jul|ago|sep|oct|nov|dic)/i,wide:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i},ea={narrow:[/^e/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^en/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i]},ta={narrow:/^[dlmjvs]/i,short:/^(do|lu|ma|mi|ju|vi|s[a])/i,abbreviated:/^(dom|lun|mar|mi[e]|jue|vie|s[a]b)/i,wide:/^(domingo|lunes|martes|mi[e]rcoles|jueves|viernes|s[a]bado)/i},na={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^do/i,/^lu/i,/^ma/i,/^mi/i,/^ju/i,/^vi/i,/^sa/i]},ra={narrow:/^(a|p|mn|md|(de la|a las) (maana|tarde|noche))/i,any:/^([ap]\.?\s?m\.?|medianoche|mediodia|(de la|a las) (maana|tarde|noche))/i},ia={any:{am:/^a/i,pm:/^p/i,midnight:/^mn/i,noon:/^md/i,morning:/maana/i,afternoon:/tarde/i,evening:/tarde/i,night:/noche/i}},Un={ordinalNumber:Ee({matchPattern:Qi,parsePattern:Ki,valueCallback:function(t){return parseInt(t,10)}}),era:H({matchPatterns:Gi,defaultMatchWidth:"wide",parsePatterns:Xi,defaultParseWidth:"any"}),quarter:H({matchPatterns:Ji,defaultMatchWidth:"wide",parsePatterns:Ui,defaultParseWidth:"any",valueCallback:t=>t+1}),month:H({matchPatterns:Zi,defaultMatchWidth:"wide",parsePatterns:ea,defaultParseWidth:"any"}),day:H({matchPatterns:ta,defaultMatchWidth:"wide",parsePatterns:na,defaultParseWidth:"any"}),dayPeriod:H({matchPatterns:ra,defaultMatchWidth:"any",parsePatterns:ia,defaultParseWidth:"any"})};var de={code:"es",formatDistance:Kn,formatLong:Gn,formatRelative:Xn,localize:Jn,match:Un,options:{weekStartsOn:1,firstWeekContainsDate:1}};var Zn=(()=>{class t{constructor(n){this.supabase=n}getReporteRendimiento(){return k(this,arguments,function*(n={}){try{console.log("Obteniendo reporte de rendimiento con filtros:",n);let r=this.supabase.client.from("actividades").select(`
          *,
          obras(nombre),
          frentes(nombre)
        `);if(n.fecha_inicio){let s=new Date(n.fecha_inicio).toISOString().split("T")[0];r=r.gte("fecha",s)}if(n.fecha_fin){let s=new Date(n.fecha_fin).toISOString().split("T")[0];r=r.lte("fecha",s)}n.obra_id&&(r=r.eq("obra_id",n.obra_id)),n.frente_id&&(r=r.eq("frente_id",n.frente_id));let{data:i,error:a}=yield r;if(a)throw console.error("Error en consulta de actividades:",a),a;if(console.log("Datos de actividades obtenidos:",i?.length||0),!i||i.length===0)return[];let o=new Map;return i.forEach(s=>{let c=`${s.obra_id||"sin-obra"}-${s.frente_id||"sin-frente"}`;o.has(c)||o.set(c,{obra:s.obras?.nombre||"Sin obra asignada",frente:s.frentes?.nombre||"Sin frente asignado",actividades:[],fecha_inicio:s.fecha}),o.get(c).actividades.push(s)}),Array.from(o.values()).map(s=>{let c=s.actividades.filter(p=>p.estado==="finalizado"||p.estado==="completada").length,l=s.actividades.filter(p=>p.estado!=="finalizado"&&p.estado!=="completada").length,d=s.actividades.length>0?c/s.actividades.length*100:0;return{obra:s.obra,frente:s.frente,actividades_completadas:c,actividades_pendientes:l,progreso_promedio:Math.round(d||0),rendimiento_diario:this.calcularRendimientoDiario(s.actividades),fecha_inicio:s.fecha_inicio,fecha_fin_estimada:this.calcularFechaFinEstimada(s.actividades)}})}catch(r){return console.error("Error al obtener reporte de rendimiento:",r),[]}})}getReportePersonal(){return k(this,arguments,function*(n={}){try{console.log("Obteniendo reporte de personal con filtros:",n);let{data:r,error:i}=yield this.supabase.client.from("users").select("id, nombre, rol");if(i)throw console.error("Error al obtener usuarios:",i),i;if(console.log("Usuarios obtenidos:",r?.length||0),!r||r.length===0)return[];let a=this.supabase.client.from("evaluaciones").select("*");if(n.fecha_inicio){let l=new Date(n.fecha_inicio).toISOString().split("T")[0];a=a.gte("fecha_evaluacion",l)}if(n.fecha_fin){let l=new Date(n.fecha_fin).toISOString().split("T")[0];a=a.lte("fecha_evaluacion",l)}n.empleado_id&&(a=a.eq("evaluado_id",n.empleado_id));let{data:o,error:s}=yield a;s&&console.log("No se pudieron obtener evaluaciones:",s),console.log("Evaluaciones obtenidas:",o?.length||0);let c=new Map;return r.forEach(l=>{c.set(l.id,{empleado:l.nombre||`Usuario ${l.id.substring(0,8)}`,rol:l.rol||"Sin rol asignado",evaluaciones:[]})}),o&&o.length>0&&o.forEach(l=>{let d=l.evaluado_id;c.has(d)&&c.get(d).evaluaciones.push(l)}),Array.from(c.values()).map(l=>{let d=l.evaluaciones,p=d.length>0?d.reduce((v,y)=>v+(y.puntuacion_total||0),0)/d.length:0,g=d.length>0?d.sort((v,y)=>new Date(y.fecha_evaluacion).getTime()-new Date(v.fecha_evaluacion).getTime())[0]:null;return{empleado:l.empleado,rol:l.rol,evaluaciones_completadas:d.length,puntuacion_promedio:Math.round(p),fortalezas:this.extraerFortalezas(d),areas_mejora:this.extraerAreasMejora(d),ultima_evaluacion:g?.fecha_evaluacion||"Sin evaluaciones"}})}catch(r){return console.error("Error al obtener reporte de personal:",r),[]}})}getReporteActividades(){return k(this,arguments,function*(n={}){try{console.log("Obteniendo reporte de actividades con filtros:",n);let r=this.supabase.client.from("actividades").select(`
          *,
          obras(nombre),
          frentes(nombre)
        `).order("fecha",{ascending:!1}).limit(100);if(n.fecha_inicio){let o=new Date(n.fecha_inicio).toISOString().split("T")[0];r=r.gte("fecha",o)}if(n.fecha_fin){let o=new Date(n.fecha_fin).toISOString().split("T")[0];r=r.lte("fecha",o)}n.obra_id&&(r=r.eq("obra_id",n.obra_id)),n.estado&&(r=r.eq("estado",n.estado));let{data:i,error:a}=yield r;if(a)throw console.error("Error en consulta de actividades:",a),a;return console.log("Actividades obtenidas:",i?.length||0),i?.map(o=>({fecha:te(new Date(o.fecha),"dd/MM/yyyy",{locale:de}),obra:o.obras?.nombre||"Sin obra",frente:o.frentes?.nombre||"Sin frente",actividad:o.tipo_actividad||o.descripcion||"Sin descripci\xF3n",estado:this.formatearEstado(o.estado),progreso:o.progreso_porcentaje||0,responsable:o.responsable||"Sin asignar",observaciones:o.observaciones||"Sin observaciones"}))||[]}catch(r){return console.error("Error al obtener reporte de actividades:",r),[]}})}getReporteKPIs(n="mes"){return k(this,null,function*(){try{console.log("Obteniendo reporte de KPIs para periodo:",n);let r=this.calcularFechaInicioPeriodo(n),i=new Date().toISOString(),[a,o,s]=yield Promise.all([this.supabase.client.from("obras").select("*").eq("estado","activa"),this.supabase.client.from("actividades").select("*").gte("fecha",r).lte("fecha",i),this.supabase.client.from("evaluaciones").select("*").gte("fecha_evaluacion",r).lte("fecha_evaluacion",i)]),c=a.data||[],l=o.data||[],d=s.data||[];console.log("Datos KPIs obtenidos:",{obras:c.length,actividades:l.length,evaluaciones:d.length});let p=l.filter(x=>x.estado==="finalizado"||x.estado==="completada").length,g=this.calcularRendimientoPromedio(l),v=this.calcularCumplimientoCronograma(l),y=g>75?"subiendo":g>50?"estable":"bajando",D=v>80?"subiendo":v>60?"estable":"bajando";return{periodo:this.formatearPeriodo(n),obras_activas:c.length,actividades_completadas:p,rendimiento_promedio:g,personal_evaluado:d.length,alertas_activas:yield this.contarAlertasActivas(),cumplimiento_cronograma:v,tendencia_rendimiento:y,tendencia_cumplimiento:D}}catch(r){return console.error("Error al obtener reporte de KPIs:",r),{periodo:"Error",obras_activas:0,actividades_completadas:0,rendimiento_promedio:0,personal_evaluado:0,alertas_activas:0,cumplimiento_cronograma:0,tendencia_rendimiento:"estable",tendencia_cumplimiento:"estable"}}})}exportarPDF(n,r,i){return k(this,null,function*(){try{if(console.log(`Generando PDF para ${n} con ${r.length} registros`),!r||r.length===0)throw new Error("No hay datos para exportar");let a=new nn;a.setFont("helvetica"),a.setFontSize(20),a.setTextColor(33,150,243),a.text(i,20,25),a.setDrawColor(33,150,243),a.setLineWidth(.5),a.line(20,30,190,30),a.setFontSize(10),a.setTextColor(100,100,100),a.text(`Generado el: ${te(new Date,"dd/MM/yyyy HH:mm",{locale:de})}`,20,40),a.text(`Total de registros: ${r.length}`,20,45);let o=[],s=[];switch(n){case"rendimiento":o=["Obra","Frente","Completadas","Pendientes","Progreso %","Rendimiento"],s=r.map(d=>[d.obra||"N/A",d.frente||"N/A",d.actividades_completadas.toString(),d.actividades_pendientes.toString(),`${d.progreso_promedio}%`,`${d.rendimiento_diario}%`]);break;case"personal":o=["Empleado","Rol","Evaluaciones","Puntuaci\xF3n","\xDAltima Evaluaci\xF3n"],s=r.map(d=>[d.empleado||"N/A",d.rol||"N/A",d.evaluaciones_completadas.toString(),`${d.puntuacion_promedio}/100`,d.ultima_evaluacion!=="Sin evaluaciones"?te(new Date(d.ultima_evaluacion),"dd/MM/yyyy",{locale:de}):"Sin evaluaciones"]);break;case"actividades":o=["Fecha","Obra","Actividad","Estado","Progreso","Responsable"],s=r.map(d=>[d.fecha||"N/A",d.obra||"N/A",d.actividad||"N/A",d.estado||"N/A",`${d.progreso}%`,d.responsable||"N/A"]);break;case"kpis":if(r.length>0){let d=r[0];o=["M\xE9trica","Valor"],s=[["Obras Activas",d.obras_activas.toString()],["Actividades Completadas",d.actividades_completadas.toString()],["Rendimiento Promedio",`${d.rendimiento_promedio}%`],["Personal Evaluado",d.personal_evaluado.toString()],["Cumplimiento Cronograma",`${d.cumplimiento_cronograma}%`],["Alertas Activas",d.alertas_activas.toString()]]}break}a.autoTable({head:[o],body:s,startY:55,styles:{fontSize:9,cellPadding:4,overflow:"linebreak",halign:"left"},headStyles:{fillColor:[33,150,243],textColor:255,fontStyle:"bold",halign:"center"},alternateRowStyles:{fillColor:[248,249,250]},columnStyles:{0:{cellWidth:"auto"},1:{cellWidth:"auto"},2:{cellWidth:"auto"},3:{cellWidth:"auto"},4:{cellWidth:"auto"},5:{cellWidth:"auto"}},margin:{top:55,left:20,right:20},theme:"striped"});let c=a.getNumberOfPages();for(let d=1;d<=c;d++)a.setPage(d),a.setFontSize(8),a.setTextColor(150,150,150),a.text(`P\xE1gina ${d} de ${c}`,20,a.internal.pageSize.height-10),a.text("Sistema de Gesti\xF3n de Obras Viales",a.internal.pageSize.width-20,a.internal.pageSize.height-10,{align:"right"});let l=`${n}_${te(new Date,"yyyyMMdd_HHmm")}.pdf`;a.save(l),console.log(`PDF generado exitosamente: ${l}`)}catch(a){throw console.error("Error al generar PDF:",a),a}})}calcularRendimientoDiario(n){if(!n||n.length===0)return 0;let r=n.filter(a=>a.estado==="finalizado"),i=new Set(n.map(a=>te(new Date(a.fecha),"yyyy-MM-dd"))).size;return i>0?Math.round(r.length/i*100)/100:0}calcularFechaFinEstimada(n){if(!n||n.length===0)return"No estimada";let r=n.map(a=>new Date(a.fecha)),i=new Date(Math.max(...r.map(a=>a.getTime())));return i.setDate(i.getDate()+30),te(i,"dd/MM/yyyy",{locale:de})}extraerFortalezas(n){return["Puntualidad","Trabajo en equipo","Calidad del trabajo"]}extraerAreasMejora(n){return["Comunicaci\xF3n","Liderazgo"]}formatearEstado(n){return{pendiente:"Pendiente",en_progreso:"En Progreso",completada:"Completada",cancelada:"Cancelada"}[n]||n}calcularFechaInicioPeriodo(n){let r=new Date;switch(n){case"semana":r.setDate(r.getDate()-7);break;case"mes":r.setMonth(r.getMonth()-1);break;case"trimestre":r.setMonth(r.getMonth()-3);break;case"a\xF1o":r.setFullYear(r.getFullYear()-1);break}return r.toISOString()}calcularRendimientoPromedio(n){if(!n.length)return 0;let r=n.reduce((i,a)=>i+(a.progreso_porcentaje||0),0);return Math.round(r/n.length)}calcularCumplimientoCronograma(n){if(!n||n.length===0)return 0;let r=new Date,i=n.filter(o=>{let s=new Date(o.fecha);return(r.getTime()-s.getTime())/(1e3*60*60*24)>7&&o.estado!=="completada"}),a=(n.length-i.length)/n.length*100;return Math.round(a)}contarAlertasActivas(){return k(this,null,function*(){return 5})}formatearPeriodo(n){return{semana:"\xDAltima Semana",mes:"\xDAltimo Mes",trimestre:"\xDAltimo Trimestre",a\u00F1o:"\xDAltimo A\xF1o"}[n]||n}getObras(){return k(this,null,function*(){let{data:n,error:r}=yield this.supabase.client.from("obras").select("id, nombre").eq("estado","activa");return r?[]:n||[]})}getFrente(){return k(this,null,function*(){let{data:n,error:r}=yield this.supabase.client.from("frentes").select("id, nombre, obra_id");return r?[]:n||[]})}getEmpleados(){return k(this,null,function*(){let{data:n,error:r}=yield this.supabase.client.from("users").select("id, nombre, rol");return r?[]:n||[]})}static{this.\u0275fac=function(r){return new(r||t)(et(kt))}}static{this.\u0275prov=Ze({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var oa=["paginatorRendimiento"],sa=["paginatorPersonal"],la=["paginatorActividades"],da=["sortRendimiento"],ca=["sortPersonal"],ma=["sortActividades"],Xe=()=>[5,10,20],ua=t=>["/obras",t],pa=()=>[1,2,3,4,5],fa=t=>["/personal",t],ha=t=>["/actividades",t];function ga(t,e){t&1&&(m(0,"div",59),F(1,"mat-spinner",60),m(2,"p"),f(3,"Cargando reportes..."),u()())}function va(t,e){if(t&1&&(m(0,"div",61)(1,"mat-icon",62),f(2,"error"),u(),m(3,"p"),f(4),u()()),t&2){let n=A();h(4),M(n.error)}}function ya(t,e){if(t&1&&(m(0,"mat-option",22),f(1),u()),t&2){let n=e.$implicit;w("value",n.id),h(),M(n.nombre)}}function wa(t,e){if(t&1&&(m(0,"mat-option",22),f(1),u()),t&2){let n=e.$implicit;w("value",n.id),h(),M(n.nombre)}}function _a(t,e){if(t&1&&(m(0,"mat-option",22),f(1),u()),t&2){let n=e.$implicit;w("value",n.id),h(),M(n.nombre)}}function ba(t,e){if(t&1){let n=oe();m(0,"button",71),j("click",function(){let i=R(n).$implicit,a=A(2);return E(a.cambiarPeriodoKPI(i.valor))}),f(1),u()}if(t&2){let n=e.$implicit,r=A(2);We("active",r.periodoSeleccionado===n.valor),h(),T(" ",n.texto," ")}}function xa(t,e){if(t&1&&(m(0,"mat-card",63)(1,"mat-card-header")(2,"mat-card-title"),f(3,"KPIs Principales"),u(),m(4,"div",64),_(5,ba,2,3,"button",65),u()(),m(6,"mat-card-content")(7,"div",66)(8,"div",67)(9,"div",68),f(10),u(),m(11,"div",69),f(12,"Obras Activas"),u()(),m(13,"div",67)(14,"div",68),f(15),u(),m(16,"div",69),f(17,"Actividades Completadas"),u()(),m(18,"div",67)(19,"div",68),f(20),u(),m(21,"div",69),f(22,"Rendimiento Promedio"),u(),m(23,"div",70)(24,"mat-icon"),f(25),u()()(),m(26,"div",67)(27,"div",68),f(28),u(),m(29,"div",69),f(30,"Cumplimiento de Cronograma"),u(),m(31,"div",70)(32,"mat-icon"),f(33),u()()()()()()),t&2){let n=A();h(5),w("ngForOf",n.periodos),h(5),M(n.reporteKPIs.obras_activas),h(5),M(n.reporteKPIs.actividades_completadas),h(5),M(n.formatearPorcentaje(n.reporteKPIs.rendimiento_promedio)),h(3),re("color",n.obtenerColorTendencia(n.reporteKPIs.tendencia_rendimiento)),h(2),M(n.obtenerIconoTendencia(n.reporteKPIs.tendencia_rendimiento)),h(3),M(n.formatearPorcentaje(n.reporteKPIs.cumplimiento_cronograma)),h(3),re("color",n.obtenerColorTendencia(n.reporteKPIs.tendencia_cumplimiento)),h(2),M(n.obtenerIconoTendencia(n.reporteKPIs.tendencia_cumplimiento))}}function Sa(t,e){t&1&&(m(0,"th",72),f(1," Obra "),u())}function Ca(t,e){if(t&1&&(m(0,"td",73),f(1),u()),t&2){let n=e.$implicit;h(),T(" ",n.obra," ")}}function Pa(t,e){t&1&&(m(0,"th",72),f(1," Frente "),u())}function Ma(t,e){if(t&1&&(m(0,"td",73),f(1),u()),t&2){let n=e.$implicit;h(),T(" ",n.frente," ")}}function Da(t,e){t&1&&(m(0,"th",72),f(1," Completadas "),u())}function ka(t,e){if(t&1&&(m(0,"td",73),f(1),u()),t&2){let n=e.$implicit;h(),T(" ",n.actividades_completadas," ")}}function Oa(t,e){t&1&&(m(0,"th",72),f(1," Pendientes "),u())}function Ra(t,e){if(t&1&&(m(0,"td",73),f(1),u()),t&2){let n=e.$implicit;h(),T(" ",n.actividades_pendientes," ")}}function Ea(t,e){t&1&&(m(0,"th",72),f(1," Progreso "),u())}function Ta(t,e){if(t&1&&(m(0,"td",73)(1,"div",74),F(2,"div",75),m(3,"span"),f(4),u()()()),t&2){let n=e.$implicit,r=A();h(2),re("width",n.progreso_promedio,"%")("background-color",r.obtenerColorProgreso(n.progreso_promedio)),h(2),M(r.formatearPorcentaje(n.progreso_promedio))}}function Fa(t,e){t&1&&(m(0,"th",72),f(1," Rendimiento Diario "),u())}function Wa(t,e){if(t&1&&(m(0,"td",73),f(1),m(2,"mat-icon"),f(3),u()()),t&2){let n=e.$implicit,r=A();h(),T(" ",r.formatearPorcentaje(n.rendimiento_diario)," "),h(),re("color",r.obtenerColorTendencia(n.tendencia)),h(),T(" ",r.obtenerIconoTendencia(n.tendencia)," ")}}function Ia(t,e){t&1&&(m(0,"th",76),f(1," Acciones "),u())}function Ha(t,e){if(t&1&&(m(0,"td",73)(1,"button",77)(2,"mat-icon"),f(3,"visibility"),u()()()),t&2){let n=e.$implicit;h(),w("routerLink",me(1,ua,n.obra_id))}}function Aa(t,e){t&1&&F(0,"tr",78)}function ja(t,e){t&1&&F(0,"tr",79)}function za(t,e){t&1&&(m(0,"th",72),f(1," Empleado "),u())}function Ya(t,e){if(t&1&&(m(0,"td",73),f(1),u()),t&2){let n=e.$implicit;h(),T(" ",n.empleado," ")}}function La(t,e){t&1&&(m(0,"th",72),f(1," Rol "),u())}function Ba(t,e){if(t&1&&(m(0,"td",73),f(1),u()),t&2){let n=e.$implicit;h(),T(" ",n.rol," ")}}function Na(t,e){t&1&&(m(0,"th",72),f(1," Evaluaciones "),u())}function qa(t,e){if(t&1&&(m(0,"td",73),f(1),u()),t&2){let n=e.$implicit;h(),T(" ",n.evaluaciones_completadas," ")}}function Va(t,e){t&1&&(m(0,"th",72),f(1," Puntuaci\xF3n "),u())}function $a(t,e){if(t&1&&(m(0,"mat-icon"),f(1," star "),u()),t&2){let n=e.$implicit,r=A().$implicit;We("filled",n<=r.puntuacion_promedio)("half-filled",n-.5===r.puntuacion_promedio)}}function Qa(t,e){if(t&1&&(m(0,"td",73)(1,"div",80)(2,"div",81),_(3,$a,2,4,"mat-icon",82),u(),m(4,"span"),f(5),ue(6,"number"),u()()()),t&2){let n=e.$implicit;h(3),w("ngForOf",se(5,pa)),h(2),M(pe(6,2,n.puntuacion_promedio,"1.1-1"))}}function Ka(t,e){t&1&&(m(0,"th",72),f(1," \xDAltima Evaluaci\xF3n "),u())}function Ga(t,e){if(t&1&&(m(0,"td",73),f(1),ue(2,"date"),u()),t&2){let n=e.$implicit;h(),T(" ",pe(2,1,n.ultima_evaluacion,"dd/MM/yyyy")," ")}}function Xa(t,e){t&1&&(m(0,"th",76),f(1," Acciones "),u())}function Ja(t,e){if(t&1&&(m(0,"td",73)(1,"button",77)(2,"mat-icon"),f(3,"visibility"),u()()()),t&2){let n=e.$implicit;h(),w("routerLink",me(1,fa,n.empleado_id))}}function Ua(t,e){t&1&&F(0,"tr",78)}function Za(t,e){t&1&&F(0,"tr",79)}function eo(t,e){t&1&&(m(0,"th",72),f(1," Fecha "),u())}function to(t,e){if(t&1&&(m(0,"td",73),f(1),ue(2,"date"),u()),t&2){let n=e.$implicit;h(),T(" ",pe(2,1,n.fecha,"dd/MM/yyyy")," ")}}function no(t,e){t&1&&(m(0,"th",72),f(1," Obra "),u())}function ro(t,e){if(t&1&&(m(0,"td",73),f(1),u()),t&2){let n=e.$implicit;h(),T(" ",n.obra," ")}}function io(t,e){t&1&&(m(0,"th",72),f(1," Actividad "),u())}function ao(t,e){if(t&1&&(m(0,"td",73),f(1),u()),t&2){let n=e.$implicit;h(),T(" ",n.actividad," ")}}function oo(t,e){t&1&&(m(0,"th",72),f(1," Estado "),u())}function so(t,e){if(t&1&&(m(0,"td",73)(1,"span",83),f(2),u()()),t&2){let n=e.$implicit;h(),nt(n.estado.toLowerCase()),h(),M(n.estado)}}function lo(t,e){t&1&&(m(0,"th",72),f(1," Progreso "),u())}function co(t,e){if(t&1&&(m(0,"td",73)(1,"div",74),F(2,"div",75),m(3,"span"),f(4),u()()()),t&2){let n=e.$implicit,r=A();h(2),re("width",n.progreso,"%")("background-color",r.obtenerColorProgreso(n.progreso)),h(2),M(r.formatearPorcentaje(n.progreso))}}function mo(t,e){t&1&&(m(0,"th",72),f(1," Responsable "),u())}function uo(t,e){if(t&1&&(m(0,"td",73),f(1),u()),t&2){let n=e.$implicit;h(),T(" ",n.responsable," ")}}function po(t,e){t&1&&(m(0,"th",76),f(1," Acciones "),u())}function fo(t,e){if(t&1&&(m(0,"td",73)(1,"button",77)(2,"mat-icon"),f(3,"visibility"),u()()()),t&2){let n=e.$implicit;h(),w("routerLink",me(1,ha,n.actividad_id))}}function ho(t,e){t&1&&F(0,"tr",78)}function go(t,e){t&1&&F(0,"tr",79)}var Md=(()=>{class t{constructor(n,r){this.reportesService=n,this.snackBar=r,this.reportesRendimiento=[],this.reportesPersonal=[],this.reportesActividades=[],this.reporteKPIs=null,this.filtros={fecha_inicio:new Date(new Date().setMonth(new Date().getMonth()-1)).toISOString(),fecha_fin:new Date().toISOString(),tipo_reporte:"rendimiento"},this.obras=[],this.frentes=[],this.empleados=[],this.cargando=!1,this.error="",this.dataSourceRendimiento=new Pe,this.dataSourcePersonal=new Pe,this.dataSourceActividades=new Pe,this.columnasRendimiento=["obra","frente","actividades_completadas","actividades_pendientes","progreso_promedio","rendimiento_diario","acciones"],this.columnasPersonal=["empleado","rol","evaluaciones_completadas","puntuacion_promedio","ultima_evaluacion","acciones"],this.columnasActividades=["fecha","obra","actividad","estado","progreso","responsable","acciones"],this.periodos=[{valor:"semana",texto:"\xDAltima Semana"},{valor:"mes",texto:"\xDAltimo Mes"},{valor:"trimestre",texto:"\xDAltimo Trimestre"},{valor:"a\xF1o",texto:"\xDAltimo A\xF1o"}],this.periodoSeleccionado="mes"}ngOnInit(){this.cargarDatos(),this.cargarListasFiltros()}cargarDatos(){this.cargando=!0,this.error="",Promise.all([this.cargarReporteRendimiento(),this.cargarReportePersonal(),this.cargarReporteActividades(),this.cargarReporteKPIs()]).then(()=>{this.cargando=!1}).catch(n=>{this.error="Error al cargar los reportes: "+n.message,this.cargando=!1})}cargarReporteRendimiento(){return k(this,null,function*(){try{this.reportesRendimiento=yield this.reportesService.getReporteRendimiento(this.filtros),this.dataSourceRendimiento.data=this.reportesRendimiento,setTimeout(()=>{this.paginatorRendimiento&&(this.dataSourceRendimiento.paginator=this.paginatorRendimiento),this.sortRendimiento&&(this.dataSourceRendimiento.sort=this.sortRendimiento)})}catch(n){throw n}})}cargarReportePersonal(){return k(this,null,function*(){try{this.reportesPersonal=yield this.reportesService.getReportePersonal(this.filtros),this.dataSourcePersonal.data=this.reportesPersonal,setTimeout(()=>{this.paginatorPersonal&&(this.dataSourcePersonal.paginator=this.paginatorPersonal),this.sortPersonal&&(this.dataSourcePersonal.sort=this.sortPersonal)})}catch(n){throw n}})}cargarReporteActividades(){return k(this,null,function*(){try{this.reportesActividades=yield this.reportesService.getReporteActividades(this.filtros),this.dataSourceActividades.data=this.reportesActividades,setTimeout(()=>{this.paginatorActividades&&(this.dataSourceActividades.paginator=this.paginatorActividades),this.sortActividades&&(this.dataSourceActividades.sort=this.sortActividades)})}catch(n){throw n}})}cargarReporteKPIs(){return k(this,null,function*(){try{this.reporteKPIs=yield this.reportesService.getReporteKPIs(this.periodoSeleccionado)}catch(n){throw n}})}cargarListasFiltros(){return k(this,null,function*(){try{this.obras=yield this.reportesService.getObras(),this.frentes=yield this.reportesService.getFrente(),this.empleados=yield this.reportesService.getEmpleados()}catch{this.snackBar.open("Error al cargar datos para filtros","Cerrar",{duration:3e3})}})}aplicarFiltros(){console.log("Aplicando filtros:",this.filtros),this.cargarDatos()}limpiarFiltros(){this.filtros={fecha_inicio:new Date(new Date().setMonth(new Date().getMonth()-1)).toISOString(),fecha_fin:new Date().toISOString(),tipo_reporte:"rendimiento"},console.log("Filtros limpiados"),this.cargarDatos()}onPeriodoChange(){console.log("Periodo cambiado a:",this.periodoSeleccionado),this.cargarReporteKPIs()}exportarPDF(n){return k(this,null,function*(){try{console.log(`Iniciando exportaci\xF3n PDF para: ${n}`),this.cargando=!0;let r=[],i="";switch(n){case"rendimiento":r=this.reportesRendimiento,i="Reporte de Rendimiento";break;case"personal":r=this.reportesPersonal,i="Reporte de Personal";break;case"actividades":r=this.reportesActividades,i="Reporte de Actividades";break;case"kpis":r=this.reporteKPIs?[this.reporteKPIs]:[],i="Reporte de KPIs";break;default:throw new Error("Tipo de reporte no v\xE1lido")}if(r.length===0){this.snackBar.open("No hay datos para exportar","Cerrar",{duration:3e3});return}yield this.reportesService.exportarPDF(n,r,i),this.snackBar.open("PDF generado exitosamente","Cerrar",{duration:3e3})}catch(r){console.error("Error al exportar PDF:",r),this.snackBar.open(`Error al generar PDF: ${r.message}`,"Cerrar",{duration:5e3})}finally{this.cargando=!1}})}formatearPorcentaje(n){return`${n}%`}formatearFecha(n){if(!n||n==="Sin evaluaciones")return n;try{return new Date(n).toLocaleDateString("es-ES")}catch{return n}}formatearFortalezas(n){return n.join(", ")}formatearAreasMejora(n){return n.join(", ")}getTendenciaIcon(n){switch(n){case"subiendo":return"trending_up";case"bajando":return"trending_down";default:return"trending_flat"}}getTendenciaColor(n){switch(n){case"subiendo":return"success";case"bajando":return"warn";default:return"primary"}}obtenerColorTendencia(n){switch(n){case"subiendo":return"#4caf50";case"bajando":return"#f44336";default:return"#2196f3"}}obtenerIconoTendencia(n){switch(n){case"subiendo":return"trending_up";case"bajando":return"trending_down";default:return"trending_flat"}}obtenerColorProgreso(n){return n>=80?"#4caf50":n>=60?"#ff9800":n>=40?"#ffc107":"#f44336"}cambiarPeriodoKPI(n){this.periodoSeleccionado=n,this.onPeriodoChange()}static{this.\u0275fac=function(r){return new(r||t)(Fe(Zn),Fe(Ct))}}static{this.\u0275cmp=ce({type:t,selectors:[["app-reportes"]],viewQuery:function(r,i){if(r&1&&(Q(oa,5),Q(sa,5),Q(la,5),Q(da,5),Q(ca,5),Q(ma,5)),r&2){let a;K(a=G())&&(i.paginatorRendimiento=a.first),K(a=G())&&(i.paginatorPersonal=a.first),K(a=G())&&(i.paginatorActividades=a.first),K(a=G())&&(i.sortRendimiento=a.first),K(a=G())&&(i.sortPersonal=a.first),K(a=G())&&(i.sortActividades=a.first)}},decls:173,vars:34,consts:[["pickerInicio",""],["pickerFin",""],["sortRendimiento","matSort"],["paginatorRendimiento",""],["sortPersonal","matSort"],["paginatorPersonal",""],["sortActividades","matSort"],["paginatorActividades",""],[1,"reportes-container"],["class","cargando-container",4,"ngIf"],["class","error-container",4,"ngIf"],[1,"generator-card"],[3,"generarReporte"],[1,"filtros-card"],[1,"filtros-grid"],["appearance","outline"],[3,"ngModelChange","ngModel"],["value","rendimiento"],["value","personal"],["value","actividades"],["matInput","",3,"ngModelChange","matDatepicker","ngModel"],["matSuffix","",3,"for"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["align","end"],["mat-button","","color","warn",3,"click"],["mat-raised-button","","color","primary",3,"click"],["class","kpis-card",4,"ngIf"],[1,"reportes-tabs-card"],["dynamicHeight",""],["label","Rendimiento"],[1,"tab-content"],[1,"tab-actions"],["mat-table","","matSort","",1,"mat-elevation-z2",3,"dataSource"],["matColumnDef","obra"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","frente"],["matColumnDef","actividades_completadas"],["matColumnDef","actividades_pendientes"],["matColumnDef","progreso_promedio"],["matColumnDef","rendimiento_diario"],["matColumnDef","acciones"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageSizeOptions"],["label","Personal"],["matColumnDef","empleado"],["matColumnDef","rol"],["matColumnDef","evaluaciones_completadas"],["matColumnDef","puntuacion_promedio"],["matColumnDef","ultima_evaluacion"],["label","Actividades"],["matColumnDef","fecha"],["matColumnDef","actividad"],["matColumnDef","estado"],["matColumnDef","progreso"],["matColumnDef","responsable"],[1,"cargando-container"],["diameter","40"],[1,"error-container"],["color","warn"],[1,"kpis-card"],[1,"periodo-selector"],["mat-button","",3,"active","click",4,"ngFor","ngForOf"],[1,"kpis-grid"],[1,"kpi-item"],[1,"kpi-value"],[1,"kpi-label"],[1,"kpi-trend"],["mat-button","",3,"click"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[1,"progreso-container"],[1,"progreso-barra"],["mat-header-cell",""],["mat-icon-button","","color","primary",3,"routerLink"],["mat-header-row",""],["mat-row",""],[1,"puntuacion-container"],[1,"puntuacion-estrellas"],[3,"filled","half-filled",4,"ngFor","ngForOf"],[1,"estado-badge"]],template:function(r,i){if(r&1){let a=oe();m(0,"div",8),_(1,ga,4,0,"div",9)(2,va,5,1,"div",10),m(3,"mat-card",11)(4,"mat-card-header")(5,"mat-card-title"),f(6,"Generador de Reportes"),u(),m(7,"mat-card-subtitle"),f(8,"Selecciona el tipo de reporte que deseas generar"),u()(),m(9,"mat-card-content")(10,"app-report-generator",12),j("generarReporte",function(s){return R(a),E(i.exportarPDF(s))}),u()()(),m(11,"mat-card",13)(12,"mat-card-header")(13,"mat-card-title"),f(14,"Filtros"),u()(),m(15,"mat-card-content")(16,"div",14)(17,"mat-form-field",15)(18,"mat-label"),f(19,"Tipo de Reporte"),u(),m(20,"mat-select",16),U("ngModelChange",function(s){return R(a),J(i.filtros.tipo_reporte,s)||(i.filtros.tipo_reporte=s),E(s)}),m(21,"mat-option",17),f(22,"Rendimiento"),u(),m(23,"mat-option",18),f(24,"Personal"),u(),m(25,"mat-option",19),f(26,"Actividades"),u()()(),m(27,"mat-form-field",15)(28,"mat-label"),f(29,"Fecha Inicio"),u(),m(30,"input",20),U("ngModelChange",function(s){return R(a),J(i.filtros.fecha_inicio,s)||(i.filtros.fecha_inicio=s),E(s)}),u(),F(31,"mat-datepicker-toggle",21)(32,"mat-datepicker",null,0),u(),m(34,"mat-form-field",15)(35,"mat-label"),f(36,"Fecha Fin"),u(),m(37,"input",20),U("ngModelChange",function(s){return R(a),J(i.filtros.fecha_fin,s)||(i.filtros.fecha_fin=s),E(s)}),u(),F(38,"mat-datepicker-toggle",21)(39,"mat-datepicker",null,1),u(),m(41,"mat-form-field",15)(42,"mat-label"),f(43,"Obra"),u(),m(44,"mat-select",16),U("ngModelChange",function(s){return R(a),J(i.filtros.obra_id,s)||(i.filtros.obra_id=s),E(s)}),m(45,"mat-option",22),f(46,"Todas"),u(),_(47,ya,2,2,"mat-option",23),u()(),m(48,"mat-form-field",15)(49,"mat-label"),f(50,"Frente"),u(),m(51,"mat-select",16),U("ngModelChange",function(s){return R(a),J(i.filtros.frente_id,s)||(i.filtros.frente_id=s),E(s)}),m(52,"mat-option",22),f(53,"Todos"),u(),_(54,wa,2,2,"mat-option",23),u()(),m(55,"mat-form-field",15)(56,"mat-label"),f(57,"Empleado"),u(),m(58,"mat-select",16),U("ngModelChange",function(s){return R(a),J(i.filtros.empleado_id,s)||(i.filtros.empleado_id=s),E(s)}),m(59,"mat-option",22),f(60,"Todos"),u(),_(61,_a,2,2,"mat-option",23),u()()()(),m(62,"mat-card-actions",24)(63,"button",25),j("click",function(){return R(a),E(i.limpiarFiltros())}),f(64,"Limpiar"),u(),m(65,"button",26),j("click",function(){return R(a),E(i.aplicarFiltros())}),f(66,"Aplicar Filtros"),u()()(),_(67,xa,34,11,"mat-card",27),m(68,"mat-card",28)(69,"mat-card-header")(70,"mat-card-title"),f(71,"Reportes Detallados"),u()(),m(72,"mat-card-content")(73,"mat-tab-group",29)(74,"mat-tab",30)(75,"div",31)(76,"div",32)(77,"button",26),j("click",function(){return R(a),E(i.exportarPDF("rendimiento"))}),m(78,"mat-icon"),f(79,"picture_as_pdf"),u(),f(80," Exportar PDF "),u()(),m(81,"table",33,2),C(83,34),_(84,Sa,2,0,"th",35)(85,Ca,2,1,"td",36),P(),C(86,37),_(87,Pa,2,0,"th",35)(88,Ma,2,1,"td",36),P(),C(89,38),_(90,Da,2,0,"th",35)(91,ka,2,1,"td",36),P(),C(92,39),_(93,Oa,2,0,"th",35)(94,Ra,2,1,"td",36),P(),C(95,40),_(96,Ea,2,0,"th",35)(97,Ta,5,5,"td",36),P(),C(98,41),_(99,Fa,2,0,"th",35)(100,Wa,4,4,"td",36),P(),C(101,42),_(102,Ia,2,0,"th",43)(103,Ha,4,3,"td",36),P(),_(104,Aa,1,0,"tr",44)(105,ja,1,0,"tr",45),u(),F(106,"mat-paginator",46,3),u()(),m(108,"mat-tab",47)(109,"div",31)(110,"div",32)(111,"button",26),j("click",function(){return R(a),E(i.exportarPDF("personal"))}),m(112,"mat-icon"),f(113,"picture_as_pdf"),u(),f(114," Exportar PDF "),u()(),m(115,"table",33,4),C(117,48),_(118,za,2,0,"th",35)(119,Ya,2,1,"td",36),P(),C(120,49),_(121,La,2,0,"th",35)(122,Ba,2,1,"td",36),P(),C(123,50),_(124,Na,2,0,"th",35)(125,qa,2,1,"td",36),P(),C(126,51),_(127,Va,2,0,"th",35)(128,Qa,7,6,"td",36),P(),C(129,52),_(130,Ka,2,0,"th",35)(131,Ga,3,4,"td",36),P(),C(132,42),_(133,Xa,2,0,"th",43)(134,Ja,4,3,"td",36),P(),_(135,Ua,1,0,"tr",44)(136,Za,1,0,"tr",45),u(),F(137,"mat-paginator",46,5),u()(),m(139,"mat-tab",53)(140,"div",31)(141,"div",32)(142,"button",26),j("click",function(){return R(a),E(i.exportarPDF("actividades"))}),m(143,"mat-icon"),f(144,"picture_as_pdf"),u(),f(145," Exportar PDF "),u()(),m(146,"table",33,6),C(148,54),_(149,eo,2,0,"th",35)(150,to,3,4,"td",36),P(),C(151,34),_(152,no,2,0,"th",35)(153,ro,2,1,"td",36),P(),C(154,55),_(155,io,2,0,"th",35)(156,ao,2,1,"td",36),P(),C(157,56),_(158,oo,2,0,"th",35)(159,so,3,3,"td",36),P(),C(160,57),_(161,lo,2,0,"th",35)(162,co,5,5,"td",36),P(),C(163,58),_(164,mo,2,0,"th",35)(165,uo,2,1,"td",36),P(),C(166,42),_(167,po,2,0,"th",43)(168,fo,4,3,"td",36),P(),_(169,ho,1,0,"tr",44)(170,go,1,0,"tr",45),u(),F(171,"mat-paginator",46,7),u()()()()()()}if(r&2){let a=Ie(33),o=Ie(40);h(),w("ngIf",i.cargando),h(),w("ngIf",i.error),h(18),X("ngModel",i.filtros.tipo_reporte),h(10),w("matDatepicker",a),X("ngModel",i.filtros.fecha_inicio),h(),w("for",a),h(6),w("matDatepicker",o),X("ngModel",i.filtros.fecha_fin),h(),w("for",o),h(6),X("ngModel",i.filtros.obra_id),h(),w("value",null),h(2),w("ngForOf",i.obras),h(4),X("ngModel",i.filtros.frente_id),h(),w("value",null),h(2),w("ngForOf",i.frentes),h(4),X("ngModel",i.filtros.empleado_id),h(),w("value",null),h(2),w("ngForOf",i.empleados),h(6),w("ngIf",i.reporteKPIs),h(14),w("dataSource",i.dataSourceRendimiento),h(23),w("matHeaderRowDef",i.columnasRendimiento),h(),w("matRowDefColumns",i.columnasRendimiento),h(),w("pageSizeOptions",se(31,Xe)),h(9),w("dataSource",i.dataSourcePersonal),h(20),w("matHeaderRowDef",i.columnasPersonal),h(),w("matRowDefColumns",i.columnasPersonal),h(),w("pageSizeOptions",se(32,Xe)),h(9),w("dataSource",i.dataSourceActividades),h(23),w("matHeaderRowDef",i.columnasActividades),h(),w("matRowDefColumns",i.columnasActividades),h(),w("pageSizeOptions",se(33,Xe))}},dependencies:[he,fe,rt,at,it,ct,st,lt,dt,mt,_e,ve,we,ye,ft,pt,ut,xe,be,bt,Ce,Se,tn,Zt,en,Bt,Tt,Wt,jt,It,Ft,zt,Ht,At,Yt,Lt,qt,Nt,Qt,Vt,$t,yt,vt,ht,gt,_t,wt,Et,Rt,Ot,Jt,Kt,Gt,Xt,Ut,St,xt,Pt,ge,ot,an],styles:['.reportes-container[_ngcontent-%COMP%]{padding:20px;max-width:1200px;margin:0 auto;display:flex;flex-direction:column;gap:20px}.generator-card[_ngcontent-%COMP%]{margin-bottom:20px}.generator-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{margin-bottom:16px}.generator-card[_ngcontent-%COMP%]   mat-card-subtitle[_ngcontent-%COMP%]{margin-top:8px}.cargando-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px;gap:16px}.error-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding:16px;background-color:#ffebee;border-radius:4px;margin-bottom:16px;gap:8px;color:#d32f2f}.filtros-card[_ngcontent-%COMP%]{margin-bottom:20px}.filtros-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:16px}.kpis-card[_ngcontent-%COMP%]{margin-bottom:20px}.kpis-card[_ngcontent-%COMP%]   .mat-card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap}.periodo-selector[_ngcontent-%COMP%]{display:flex;gap:8px;flex-wrap:wrap}.periodo-selector[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background-color:#0000000a;font-weight:500}.kpis-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:24px;margin-top:16px}.kpi-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:16px;background-color:#f5f5f5;border-radius:8px;position:relative}.kpi-item[_ngcontent-%COMP%]   .kpi-value[_ngcontent-%COMP%]{font-size:2rem;font-weight:500;margin-bottom:8px}.kpi-item[_ngcontent-%COMP%]   .kpi-label[_ngcontent-%COMP%]{font-size:.9rem;color:#0009;text-align:center}.kpi-item[_ngcontent-%COMP%]   .kpi-trend[_ngcontent-%COMP%]{position:absolute;top:8px;right:8px;display:flex;align-items:center}.reportes-tabs-card[_ngcontent-%COMP%]   .mat-tab-group[_ngcontent-%COMP%]{margin-top:16px}.tab-content[_ngcontent-%COMP%]{padding:16px 0}.tab-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-bottom:16px}table[_ngcontent-%COMP%]{width:100%}.progreso-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;width:100%;max-width:150px}.progreso-container[_ngcontent-%COMP%]   .progreso-barra[_ngcontent-%COMP%]{height:8px;border-radius:4px;min-width:4px}.progreso-container[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.8rem;white-space:nowrap}.puntuacion-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.puntuacion-container[_ngcontent-%COMP%]   .puntuacion-estrellas[_ngcontent-%COMP%]{display:flex}.puntuacion-container[_ngcontent-%COMP%]   .puntuacion-estrellas[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px;color:#ccc}.puntuacion-container[_ngcontent-%COMP%]   .puntuacion-estrellas[_ngcontent-%COMP%]   .mat-icon.filled[_ngcontent-%COMP%]{color:#ffc107}.puntuacion-container[_ngcontent-%COMP%]   .puntuacion-estrellas[_ngcontent-%COMP%]   .mat-icon.half-filled[_ngcontent-%COMP%]{position:relative}.puntuacion-container[_ngcontent-%COMP%]   .puntuacion-estrellas[_ngcontent-%COMP%]   .mat-icon.half-filled[_ngcontent-%COMP%]:after{content:"";position:absolute;top:0;left:0;width:50%;height:100%;background-color:#ffc107;overflow:hidden}.estado-badge[_ngcontent-%COMP%]{padding:4px 8px;border-radius:12px;font-size:.8rem;font-weight:500;text-transform:uppercase}.estado-badge.completada[_ngcontent-%COMP%]{background-color:#e8f5e9;color:#2e7d32}.estado-badge.en_progreso[_ngcontent-%COMP%]{background-color:#e3f2fd;color:#1565c0}.estado-badge.pendiente[_ngcontent-%COMP%]{background-color:#fff8e1;color:#f57f17}.estado-badge.retrasada[_ngcontent-%COMP%]{background-color:#ffebee;color:#c62828}@media (max-width: 768px){.filtros-grid[_ngcontent-%COMP%], .kpis-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.mat-card-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.mat-card-header[_ngcontent-%COMP%]   .periodo-selector[_ngcontent-%COMP%]{margin-top:16px;width:100%;justify-content:space-between}.tab-actions[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;gap:8px}}']})}}return t})();export{Md as ReportesComponent};
