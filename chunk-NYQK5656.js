import{c as m}from"./chunk-ZJYJPMQY.js";import{ba as l,ga as u,j as s}from"./chunk-OYRL5FJJ.js";import{a as c,b as o}from"./chunk-ODN5LVDJ.js";var h=(()=>{class r{constructor(i){this.supabase=i}searchItems(i,e){let t=this.supabase.client.from("items").select("*");return i&&(t=t.or(`name.ilike.%${i}%,description.ilike.%${i}%`)),e&&(t=t.eq("specialty",e)),s(t.order("name").limit(50).then(({data:n,error:a})=>{if(a)throw console.error("Error searching items:",a),a;return n||[]}))}getAllItems(){return s(this.supabase.client.from("items").select("*").order("specialty",{ascending:!0}).order("name",{ascending:!0}).then(({data:i,error:e})=>e?(console.error("Error fetching items:",e),[]):i||[]))}getItemsBySpecialty(){return s(this.supabase.client.from("items").select("*").order("specialty",{ascending:!0}).order("name",{ascending:!0}).then(({data:i,error:e})=>{if(e)return console.error("Error fetching items by specialty:",e),{arquitectura:[],estructura:[],instalaciones_sanitarias:[],instalaciones_electricas:[],instalaciones_mecanicas:[],comunicaciones:[]};let t={arquitectura:[],estructura:[],instalaciones_sanitarias:[],instalaciones_electricas:[],instalaciones_mecanicas:[],comunicaciones:[]};return(i||[]).forEach(n=>{n.specialty&&n.specialty in t&&t[n.specialty].push(n)}),t}))}getItemById(i){return s(this.supabase.client.from("items").select("*").eq("id",i).single().then(({data:e,error:t})=>{if(t)throw console.error("Error fetching item:",t),t;return e}))}createItem(i){let e=o(c({},i),{metrado:i.metrado||0});return s(this.supabase.client.from("items").insert([e]).select().single().then(({data:t,error:n})=>{if(n)throw console.error("Error creating item:",n),n;return t}))}updateItem(i,e){let t={};return e.name!==void 0&&(t.name=e.name),e.description!==void 0&&(t.description=e.description),e.unit!==void 0&&(t.unit=e.unit),e.materials!==void 0&&(t.materials=e.materials),e.specialty!==void 0&&(t.specialty=e.specialty),e.metrado!==void 0&&(t.metrado=e.metrado),s(this.supabase.client.from("items").update(t).eq("id",i).select().single().then(({data:n,error:a})=>{if(a)throw console.error("Error updating item:",a),a;return n}))}deleteItem(i){return s(this.supabase.client.from("items").delete().eq("id",i).then(({error:e})=>{if(e)throw console.error("Error deleting item:",e),e}))}getSpecialties(){return["arquitectura","estructura","instalaciones_sanitarias","instalaciones_electricas","instalaciones_mecanicas","comunicaciones"]}getSpecialtyDisplayName(i){return{arquitectura:"Arquitectura",estructura:"Estructura",instalaciones_sanitarias:"Instalaciones Sanitarias",instalaciones_electricas:"Instalaciones El\xE9ctricas",instalaciones_mecanicas:"Instalaciones Mec\xE1nicas",comunicaciones:"Comunicaciones"}[i]}static{this.\u0275fac=function(e){return new(e||r)(u(m))}}static{this.\u0275prov=l({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();export{h as a};
