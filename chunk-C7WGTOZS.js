import{a as re,b as me,c as ce,d as le}from"./chunk-EPNA6SYW.js";import{b as de}from"./chunk-ZLVJQ2UH.js";import{a as ee,b as te,d as ie,e as ne,f as oe,g as ae}from"./chunk-JUW7GNWS.js";import{b as K,c as Q}from"./chunk-BXKJ5BTH.js";import{A as Y,C as H,F as U,G as J,b as S,d as p,g as N,h as T,l as V,n as q,q as L,u as A,v as z,x as R,y as G,z as B}from"./chunk-UJ3DDJ5Q.js";import{j as w,p as y,ua as W,va as X,wa as Z,xa as $}from"./chunk-4WMI5X77.js";import{Db as m,Nb as n,Ob as e,Pb as d,Tb as I,Xb as b,db as a,gc as x,hc as i,ib as g,ic as k,jc as f,pa as M,pb as F,qa as C,vb as _}from"./chunk-B6672ACT.js";function pe(r,u){r&1&&(n(0,"mat-error"),i(1," El nombre de la obra es requerido "),e())}function fe(r,u){r&1&&(n(0,"mat-error"),i(1," El nombre no puede exceder los 1000 caracteres "),e())}function ue(r,u){r&1&&(n(0,"mat-error"),i(1," La ubicaci\xF3n es requerida "),e())}function se(r,u){r&1&&(n(0,"mat-error"),i(1," La ubicaci\xF3n no puede exceder los 300 caracteres "),e())}function ge(r,u){r&1&&(n(0,"mat-error"),i(1," La fecha de inicio es requerida "),e())}var Ne=(()=>{class r{constructor(o,l,t){this.fb=o,this.dialogRef=l,this.data=t,this.isEditMode=!1,this.isEditMode=this.data?.mode==="edit",this.projectForm=this.fb.group({nombre:["",[p.required,p.maxLength(1e3)]],ubicacion:["",[p.required,p.maxLength(300)]],fecha_inicio:["",[p.required]],fecha_fin_estimada:[null],descripcion:[""]}),this.isEditMode&&this.data?.obra&&this.populateForm(this.data.obra)}populateForm(o){this.projectForm.patchValue({nombre:o.nombre||"",ubicacion:o.ubicacion||"",fecha_inicio:o.fecha_inicio?new Date(o.fecha_inicio):"",fecha_fin_estimada:o.fecha_fin_estimada?new Date(o.fecha_fin_estimada):null,descripcion:o.descripcion||""})}onCancel(){this.dialogRef.close()}onCreate(){if(this.projectForm.valid){let o=this.projectForm.value,l=c=>c?c instanceof Date?c.toISOString().split("T")[0]:c:null,t={nombre:o.nombre,ubicacion:o.ubicacion,fecha_inicio:l(o.fecha_inicio),estado:"planificacion",descripcion:o.descripcion||void 0,fecha_fin_estimada:l(o.fecha_fin_estimada)};this.isEditMode&&this.data?.obra?.id&&(t.id=this.data.obra.id),this.dialogRef.close({data:t,mode:this.isEditMode?"edit":"create"})}}static{this.\u0275fac=function(l){return new(l||r)(g(z),g(ee),g(te))}}static{this.\u0275cmp=F({type:r,selectors:[["app-create-project-dialog"]],decls:50,vars:16,consts:[["picker",""],["endPicker",""],["mat-dialog-title",""],[1,"project-form",3,"formGroup"],["appearance","outline",1,"full-width"],["matInput","","formControlName","nombre","placeholder","Ej: Edificio Residencial Los Pinos","maxlength","1000"],["align","end"],[4,"ngIf"],["matInput","","formControlName","ubicacion","placeholder","Ej: Av. Principal 123, Ciudad","maxlength","300"],["matInput","","formControlName","fecha_inicio",3,"matDatepicker"],["matSuffix","",3,"for"],["matInput","","formControlName","fecha_fin_estimada",3,"matDatepicker"],["matInput","","formControlName","descripcion","rows","3","placeholder","Descripci\xF3n de la obra..."],["mat-button","",3,"click"],["mat-raised-button","","color","primary",3,"click","disabled"]],template:function(l,t){if(l&1){let c=I();n(0,"h2",2)(1,"mat-icon"),i(2),e(),i(3),e(),n(4,"mat-dialog-content")(5,"form",3)(6,"mat-form-field",4)(7,"mat-label"),i(8,"Nombre de la Obra"),e(),d(9,"input",5),n(10,"mat-hint",6),i(11),e(),_(12,pe,2,0,"mat-error",7)(13,fe,2,0,"mat-error",7),e(),n(14,"mat-form-field",4)(15,"mat-label"),i(16,"Ubicaci\xF3n"),e(),d(17,"input",8),n(18,"mat-hint",6),i(19),e(),_(20,ue,2,0,"mat-error",7)(21,se,2,0,"mat-error",7),e(),n(22,"mat-form-field",4)(23,"mat-label"),i(24,"Fecha de Inicio"),e(),d(25,"input",9)(26,"mat-datepicker-toggle",10)(27,"mat-datepicker",null,0),_(29,ge,2,0,"mat-error",7),e(),n(30,"mat-form-field",4)(31,"mat-label"),i(32,"Fecha de Finalizaci\xF3n Estimada (Opcional)"),e(),d(33,"input",11)(34,"mat-datepicker-toggle",10)(35,"mat-datepicker",null,1),e(),n(37,"mat-form-field",4)(38,"mat-label"),i(39,"Descripci\xF3n (Opcional)"),e(),d(40,"textarea",12),e()()(),n(41,"mat-dialog-actions",6)(42,"button",13),b("click",function(){return M(c),C(t.onCancel())}),n(43,"mat-icon"),i(44,"cancel"),e(),i(45," Cancelar "),e(),n(46,"button",14),b("click",function(){return M(c),C(t.onCreate())}),n(47,"mat-icon"),i(48,"save"),e(),i(49),e()()}if(l&2){let c,s,P,h,O,E,v,j=x(28),D=x(36);a(2),k(t.isEditMode?"edit":"add_circle"),a(),f(" ",t.isEditMode?"Editar Obra":"Crear Nueva Obra"," "),a(2),m("formGroup",t.projectForm),a(6),f("",((c=t.projectForm.get("nombre"))==null||c.value==null?null:c.value.length)||0,"/1000"),a(),m("ngIf",(s=t.projectForm.get("nombre"))==null?null:s.hasError("required")),a(),m("ngIf",(P=t.projectForm.get("nombre"))==null?null:P.hasError("maxlength")),a(6),f("",((h=t.projectForm.get("ubicacion"))==null||h.value==null?null:h.value.length)||0,"/300"),a(),m("ngIf",(O=t.projectForm.get("ubicacion"))==null?null:O.hasError("required")),a(),m("ngIf",(E=t.projectForm.get("ubicacion"))==null?null:E.hasError("maxlength")),a(4),m("matDatepicker",j),a(),m("for",j),a(3),m("ngIf",(v=t.projectForm.get("fecha_inicio"))==null?null:v.hasError("required")),a(4),m("matDatepicker",D),a(),m("for",D),a(12),m("disabled",!t.projectForm.valid),a(3),f(" ",t.isEditMode?"Actualizar Obra":"Crear Obra"," ")}},dependencies:[y,w,R,V,S,N,T,A,q,L,ae,ie,oe,ne,J,U,G,Y,B,H,Q,K,X,W,$,Z,le,re,me,ce,de],styles:[".project-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;min-width:500px;padding:16px 0}@media (max-width: 768px){.project-form[_ngcontent-%COMP%]{min-width:300px;padding:12px 0;gap:12px}}.full-width[_ngcontent-%COMP%]{width:100%}mat-dialog-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;color:#2d9596!important;font-weight:600;font-size:1.5rem;margin-bottom:16px}mat-dialog-title[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#2d9596;font-size:1.5rem}mat-dialog-content[_ngcontent-%COMP%]{padding:0 24px;max-height:70vh;overflow-y:auto}mat-dialog-actions[_ngcontent-%COMP%]{padding:16px 24px;gap:8px;justify-content:flex-end;border-top:1px solid #E5E7EB;margin-top:16px}.mat-mdc-form-field.mat-form-field-appearance-outline[_ngcontent-%COMP%]   .mat-mdc-form-field-outline[_ngcontent-%COMP%]{color:#d1d5db}.mat-mdc-form-field.mat-form-field-appearance-outline.mat-focused[_ngcontent-%COMP%]   .mat-mdc-form-field-outline-thick[_ngcontent-%COMP%]{color:#2d9596}.mat-mdc-form-field.mat-form-field-appearance-outline[_ngcontent-%COMP%]   .mat-mdc-form-field-label[_ngcontent-%COMP%]{color:#6b7280}.mat-mdc-form-field.mat-form-field-appearance-outline.mat-focused[_ngcontent-%COMP%]   .mat-mdc-form-field-label[_ngcontent-%COMP%]{color:#2d9596}.mat-mdc-form-field[_ngcontent-%COMP%]   .mat-mdc-input-element[_ngcontent-%COMP%]{color:#111827}.mat-mdc-form-field[_ngcontent-%COMP%]   .mat-mdc-input-element[_ngcontent-%COMP%]::placeholder{color:#9ca3af}.mat-mdc-button[_ngcontent-%COMP%]{color:#6b7280}.mat-mdc-button[_ngcontent-%COMP%]:hover{background-color:#f3f4f6}.mat-mdc-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:4px}.mat-mdc-raised-button[_ngcontent-%COMP%]{background-color:#2d9596!important;color:#fff!important;font-weight:500}.mat-mdc-raised-button[_ngcontent-%COMP%]:hover:not([disabled]){background-color:#1f6b6c!important;box-shadow:0 4px 8px #0d94884d}.mat-mdc-raised-button[_ngcontent-%COMP%]:disabled{background-color:#d1d5db!important;color:#6b7280!important}.mat-mdc-raised-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:4px}.mat-mdc-form-field-error[_ngcontent-%COMP%]{color:#dc2626;font-size:.75rem}.mat-datepicker-toggle[_ngcontent-%COMP%]{color:#2d9596}textarea.mat-mdc-input-element[_ngcontent-%COMP%]{resize:vertical;min-height:60px}.project-form[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease-in-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.mat-mdc-form-field[_ngcontent-%COMP%]:focus-within   .mat-mdc-form-field-outline-thick[_ngcontent-%COMP%]{border-width:2px}@media (max-width: 480px){.project-form[_ngcontent-%COMP%]{min-width:280px}mat-dialog-content[_ngcontent-%COMP%]{padding:0 16px}mat-dialog-actions[_ngcontent-%COMP%]{padding:12px 16px;flex-direction:column}mat-dialog-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;margin:4px 0}}"]})}}return r})();export{Ne as a};
