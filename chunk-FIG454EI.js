import{a as m}from"./chunk-WFXXN3GR.js";import{ba as l,ga as u,j as n}from"./chunk-B6672ACT.js";import{a as c,b as o}from"./chunk-ODN5LVDJ.js";var h=(()=>{class s{constructor(i){this.supabase=i}searchItems(i,e){let t=this.supabase.client.from("items").select("*");return i&&(t=t.or(`name.ilike.%${i}%,description.ilike.%${i}%`)),e&&(t=t.eq("specialty",e)),n(t.order("name").limit(50).then(({data:a,error:r})=>{if(r)throw r;return a||[]}))}getAllItems(){return n(this.supabase.client.from("items").select("*").order("specialty",{ascending:!0}).order("name",{ascending:!0}).then(({data:i,error:e})=>e?[]:i||[]))}getItemsBySpecialty(){return n(this.supabase.client.from("items").select("*").order("specialty",{ascending:!0}).order("name",{ascending:!0}).then(({data:i,error:e})=>{if(e)return{arquitectura:[],estructura:[],instalaciones_sanitarias:[],instalaciones_electricas:[],instalaciones_mecanicas:[],comunicaciones:[]};let t={arquitectura:[],estructura:[],instalaciones_sanitarias:[],instalaciones_electricas:[],instalaciones_mecanicas:[],comunicaciones:[]};return(i||[]).forEach(a=>{a.specialty&&a.specialty in t&&t[a.specialty].push(a)}),t}))}getItemById(i){return n(this.supabase.client.from("items").select("*").eq("id",i).single().then(({data:e,error:t})=>{if(t)throw t;return e}))}createItem(i){let e=o(c({},i),{metrado:i.metrado||0});return n(this.supabase.client.from("items").insert([e]).select().single().then(({data:t,error:a})=>{if(a)throw a;return t}))}updateItem(i,e){let t={};return e.name!==void 0&&(t.name=e.name),e.description!==void 0&&(t.description=e.description),e.unit!==void 0&&(t.unit=e.unit),e.materials!==void 0&&(t.materials=e.materials),e.specialty!==void 0&&(t.specialty=e.specialty),e.metrado!==void 0&&(t.metrado=e.metrado),n(this.supabase.client.from("items").update(t).eq("id",i).select().single().then(({data:a,error:r})=>{if(r)throw r;return a}))}deleteItem(i){return n(this.supabase.client.from("items").delete().eq("id",i).then(({error:e})=>{if(e)throw e}))}getSpecialties(){return["arquitectura","estructura","instalaciones_sanitarias","instalaciones_electricas","instalaciones_mecanicas","comunicaciones"]}getSpecialtyDisplayName(i){return{arquitectura:"Arquitectura",estructura:"Estructura",instalaciones_sanitarias:"Instalaciones Sanitarias",instalaciones_electricas:"Instalaciones El\xE9ctricas",instalaciones_mecanicas:"Instalaciones Mec\xE1nicas",comunicaciones:"Comunicaciones"}[i]}static{this.\u0275fac=function(e){return new(e||s)(u(m))}}static{this.\u0275prov=l({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})();export{h as a};
